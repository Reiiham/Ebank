import{h as L,j as Me}from"./chunk-A2EWOXQS.js";import{a as R,b as Le}from"./chunk-PHJ6G2XC.js";import{$b as we,Ab as K,B as Y,Ba as k,C as Ce,Cb as Z,E as J,Ea as _,Fa as p,Gb as Ue,Hb as F,Ib as xe,J as u,Jb as D,K as g,Kb as $,Lb as ze,Nb as T,Ob as ee,Pa as a,Pb as Se,Qa as x,Qb as E,Ra as w,Rb as j,Tb as P,Ua as C,Ub as B,Va as b,Vb as te,Wa as v,Wb as V,Xb as q,Yb as U,Za as Q,Zb as He,_a as X,_b as ye,a as Be,ab as ve,ac as Oe,ba as s,bc as Ee,cb as _e,cc as Pe,ec as ne,fa as f,ha as M,hc as Ie,ia as be,ic as N,j as qe,jc as z,la as S,o as We,oa as m,p as ge,pb as je,qa as H,qb as O,va as i,vb as he,wa as n,wb as y,xa as h,z as fe}from"./chunk-BNHO72UU.js";var Je=r=>["clients",r],Qe=r=>["clients",r,"edit"],Xe=r=>["clients",r,"add-account"],Ke=r=>["clients",r,"status"],Ze=r=>["clients",r,"delete"];function $e(r,o){if(r&1&&(i(0,"ul")(1,"li")(2,"a",8),h(3,"i",9),a(4," Voir les D\xE9tails "),n()(),i(5,"li")(6,"a",8),h(7,"i",10),a(8," Modifier "),n()(),i(9,"li")(10,"a",8),h(11,"i",11),a(12," Ajouter un Compte "),n()(),i(13,"li")(14,"a",8),h(15,"i",12),a(16," Statut "),n()(),i(17,"li")(18,"a",8),h(19,"i",13),a(20," Supprimer "),n()()()),r&2){let e=p();s(2),m("routerLink",X(5,Je,e.clientId)),s(4),m("routerLink",X(7,Qe,e.clientId)),s(4),m("routerLink",X(9,Xe,e.clientId)),s(4),m("routerLink",X(11,Ke,e.clientId)),s(4),m("routerLink",X(13,Ze,e.clientId))}}var ke=class r{constructor(o){this.router=o;this.router.events.pipe(We(e=>e instanceof Ue)).subscribe(()=>{let e=this.router.url.match(/clients\/([^/]+)/);this.clientId=e?e[1]:null})}clientId=null;get isCreatingClient(){return this.router.url.includes("/clients/create")}static \u0275fac=function(e){return new(e||r)(f(D))};static \u0275cmp=M({type:r,selectors:[["app-sidebar"]],decls:17,vars:1,consts:[[1,"sidebar"],["routerLink","./","routerLinkActive","active"],[1,"fas","fa-home"],["routerLink","clients","routerLinkActive","active"],[1,"fas","fa-users"],["routerLink","clients/create","routerLinkActive","active"],[1,"fas","fa-user-plus"],[4,"ngIf"],["routerLinkActive","active",3,"routerLink"],[1,"fas","fa-file-alt"],[1,"fas","fa-pen"],[1,"fas","fa-university"],[1,"fas","fa-toggle-on"],[1,"fas","fa-trash"]],template:function(e,t){e&1&&(i(0,"aside",0)(1,"nav")(2,"ul")(3,"li")(4,"a",1),h(5,"i",2),a(6," Tableau de Bord "),n()(),i(7,"li")(8,"a",3),h(9,"i",4),a(10," Liste des Clients "),n()(),i(11,"li")(12,"a",5),h(13,"i",6),a(14," Cr\xE9er un Client "),n()()(),h(15,"hr"),S(16,$e,21,15,"ul",7),n()()),e&2&&(s(16),m("ngIf",t.clientId&&!t.isCreatingClient))},dependencies:[y,O,T,$,ze],styles:[".sidebar[_ngcontent-%COMP%]{width:260px;background-color:#1e3a8a;color:#f8fafc;min-height:100vh;padding:2rem 1rem;font-family:Segoe UI,sans-serif;position:fixed;top:0;left:0;overflow-y:auto;box-shadow:4px 0 12px #0000001a;transition:all .3s ease;z-index:1000;display:flex;flex-direction:column}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex:1}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:1rem}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center;font-size:1.1rem}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;text-decoration:none;color:#f1f5f9;font-size:1rem;padding:.6rem 1rem;border-radius:8px;transition:all .25s ease;position:relative}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#1e293b;color:#fff;transform:translate(5px)}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff;font-weight:700;box-shadow:inset 4px 0 #60a5fa}.sidebar[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;border-top:1px solid #334155;margin:1.5rem 0}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100%;position:relative;min-height:auto;padding:1rem;box-shadow:none}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem}}"]})};var ae=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-layout"]],decls:4,vars:0,consts:[[1,"layout"]],template:function(e,t){e&1&&(i(0,"div",0),h(1,"app-sidebar"),i(2,"main"),h(3,"router-outlet"),n()())},dependencies:[y,T,xe,ke],styles:[".layout[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:#f8fafc}main[_ngcontent-%COMP%]{flex:1;margin-left:260px;padding:2rem;transition:margin-left .3s ease}@media (max-width: 768px){.layout[_ngcontent-%COMP%]{flex-direction:column}main[_ngcontent-%COMP%]{margin-left:0;padding:1rem}.sidebar[_ngcontent-%COMP%]{position:relative;width:100%;box-shadow:none;min-height:auto}}"]})};var et=()=>["/employee/transactions"],tt=()=>["/employee/clients"],se=class r{constructor(o){this.clientService=o}clientCount=0;accountCount=0;ngOnInit(){this.clientService.getClientCount().subscribe(o=>this.clientCount=o),this.clientService.getAccountCount().subscribe(o=>this.accountCount=o)}static \u0275fac=function(e){return new(e||r)(f(R))};static \u0275cmp=M({type:r,selectors:[["app-dashboard"]],decls:33,vars:6,consts:[[1,"dashboard-container"],[1,"dashboard-title"],[1,"stats-grid","top-row"],[1,"stat-card"],[1,"icon-circle"],[1,"fas","fa-user"],[1,"stat-info"],[1,"fas","fa-credit-card"],[1,"stats-grid","bottom-row"],[1,"stat-card","square-card","link-card",3,"routerLink"],[1,"fas","fa-money-bill-transfer"],[1,"fas","fa-search"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"h1",1),a(2,"Tableau de Bord"),n(),i(3,"div",2)(4,"div",3)(5,"div",4),h(6,"i",5),n(),i(7,"div",6)(8,"h2"),a(9,"Clients"),n(),i(10,"p"),a(11),n()()(),i(12,"div",3)(13,"div",4),h(14,"i",7),n(),i(15,"div",6)(16,"h2"),a(17,"Comptes"),n(),i(18,"p"),a(19),n()()()(),i(20,"div",8)(21,"div",9)(22,"div",4),h(23,"i",10),n(),i(24,"div",6)(25,"h2"),a(26,"Effectuer une transaction"),n()()(),i(27,"div",9)(28,"div",4),h(29,"i",11),n(),i(30,"div",6)(31,"h2"),a(32,"Trouver un client"),n()()()()()),e&2&&(s(11),x(t.clientCount),s(8),x(t.accountCount),s(2),m("routerLink",Q(4,et)),s(6),m("routerLink",Q(5,tt)))},dependencies:[y,T,$],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px;font-family:Roboto,sans-serif}.dashboard-title[_ngcontent-%COMP%]{font-size:28px;margin-bottom:30px;color:#1e3a8a;text-align:center}.top-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:30px}.bottom-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.square-card[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;text-align:center;aspect-ratio:1 / 1;padding:30px 20px}.square-card[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{margin:0 0 20px;width:70px;height:70px;font-size:30px;padding:20px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 10px #0000001a;transition:transform .3s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.icon-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e3a8a);color:#fff;border-radius:50%;padding:16px;font-size:24px;margin-right:20px;display:flex;align-items:center;justify-content:center}.stat-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#1e3a8a}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:5px 0 0;color:#3b82f6}"]})};var Te=class r{constructor(o){this.http=o}baseUrl=`${ee.apiUrl}/employee`;getAuthHeaders(){let o=localStorage.getItem("authToken")||sessionStorage.getItem("authToken")||localStorage.getItem("token");console.log("\u{1F511} ServiceManager Token found:",o?"YES":"NO"),console.log("\u{1F511} Token from localStorage authToken:",localStorage.getItem("authToken")?"YES":"NO"),console.log("\u{1F511} Token from sessionStorage authToken:",sessionStorage.getItem("authToken")?"YES":"NO"),console.log("\u{1F511} Token from localStorage token:",localStorage.getItem("token")?"YES":"NO");let e=new K({"Content-Type":"application/json"});return o?(e=e.set("Authorization",`Bearer ${o}`),console.log("\u{1F511} Authorization header set with token")):console.error("\u{1F6A8} NO TOKEN FOUND - Request will fail"),e}handleError=(o="operation")=>e=>(console.error(`\u274C ServiceManager ${o} failed:`,e),console.error(`\u274C Error status: ${e.status}`),console.error(`\u274C Error message: ${e.message}`),console.error("\u274C Error body:",e.error),e.status===401&&(console.error("\u{1F6A8} UNAUTHORIZED - Token might be invalid"),localStorage.removeItem("token"),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken")),qe(()=>e));activateServices(o){console.log("\u{1F527} Calling activateServices() with data:",o),console.log("\u{1F527} Data type:",typeof o),console.log("\u{1F527} Data JSON:",JSON.stringify(o,null,2));let e=`${this.baseUrl}/clients/activer-services`;console.log("\u{1F310} URL:",e);let t=this.getAuthHeaders();return console.log("\u{1F310} Headers:",t.keys()),this.http.post(e,o,{headers:t,responseType:"text"}).pipe(fe(l=>{console.log("\u2705 Activate services SUCCESS:",l),console.log("\u2705 Result type:",typeof l)}),ge(this.handleError("activateServices")))}suspendServices(o,e){console.log("\u23F8\uFE0F Calling suspendServices() for client:",o,"with data:",e);let t=`${this.baseUrl}/clients/${o}/suspend-services`;return console.log("\u{1F310} URL:",t),this.http.put(t,e,{headers:this.getAuthHeaders(),responseType:"text"}).pipe(fe(l=>console.log("\u2705 Suspend services result:",l)),ge(this.handleError("suspendServices")))}reactivateServices(o,e){console.log("\u25B6\uFE0F Calling reactivateServices() for client:",o,"services:",e);let t=`${this.baseUrl}/clients/${o}/reactivate-services`;return console.log("\u{1F310} URL:",t),this.http.put(t,e,{headers:this.getAuthHeaders(),responseType:"text"}).pipe(fe(l=>console.log("\u2705 Reactivate services result:",l)),ge(this.handleError("reactivateServices")))}static \u0275fac=function(e){return new(e||r)(J(Z))};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};function it(r,o){if(r&1&&(i(0,"div")(1,"p")(2,"strong"),a(3,"\u{1F4B0} Solde :"),n(),a(4),ve(5,"currency"),n()()),r&2){let e=p(2);s(4),w(" ",_e(5,1,e.client.accounts[0].balance,"MAD"),"")}}function ot(r,o){if(r&1&&(i(0,"div",8)(1,"p")(2,"strong"),a(3,"\u{1F464} Nom :"),n(),a(4),n(),i(5,"p")(6,"strong"),a(7,"\u{1F194} ID :"),n(),a(8),n(),S(9,it,6,4,"div",9),n()),r&2){let e=p();s(4),w(" ",e.client.fullName,""),s(4),w(" ",e.client.clientId,""),s(),m("ngIf",e.client.accounts==null?null:e.client.accounts.length)}}function rt(r,o){if(r&1&&(i(0,"div",10),a(1),n()),r&2){let e=p();s(),x(e.message)}}function at(r,o){if(r&1&&(i(0,"div",11),a(1),n()),r&2){let e=p();s(),x(e.error)}}function st(r,o){if(r&1){let e=k();i(0,"button",5),_("click",function(){let l=u(e).$implicit,c=p(2);return g(c.toggleService(l,c.newServices))}),a(1),n()}if(r&2){let e=o.$implicit,t=p(2);H("selected",t.newServices.includes(e)),s(),w(" ",e," ")}}function lt(r,o){if(r&1){let e=k();i(0,"div",12)(1,"h4"),a(2,"Choisir des services \xE0 activer"),n(),i(3,"div",13),S(4,st,2,3,"button",14),n(),i(5,"button",15),_("click",function(){u(e);let l=p();return g(l.activate())}),a(6,"Activer les Services"),n()()}if(r&2){let e=p();s(4),m("ngForOf",e.availableServices)}}function ct(r,o){if(r&1){let e=k();i(0,"button",5),_("click",function(){let l=u(e).$implicit,c=p(2);return g(c.toggleService(l,c.suspendedServices))}),a(1),n()}if(r&2){let e=o.$implicit,t=p(2);H("selected",t.suspendedServices.includes(e)),s(),w(" ",e," ")}}function dt(r,o){if(r&1){let e=k();i(0,"div",12)(1,"h4"),a(2,"Services \xE0 suspendre"),n(),i(3,"textarea",16),v("ngModelChange",function(l){u(e);let c=p();return b(c.suspensionReason,l)||(c.suspensionReason=l),g(l)}),n(),i(4,"textarea",17),v("ngModelChange",function(l){u(e);let c=p();return b(c.suspensionMessage,l)||(c.suspensionMessage=l),g(l)}),n(),i(5,"div",13),S(6,ct,2,3,"button",14),n(),i(7,"button",18),_("click",function(){u(e);let l=p();return g(l.suspend())}),a(8,"Suspendre"),n()()}if(r&2){let e=p();s(3),C("ngModel",e.suspensionReason),s(),C("ngModel",e.suspensionMessage),s(2),m("ngForOf",e.availableServices)}}function mt(r,o){if(r&1){let e=k();i(0,"button",5),_("click",function(){let l=u(e).$implicit,c=p(2);return g(c.toggleService(l,c.reactivatedServices))}),a(1),n()}if(r&2){let e=o.$implicit,t=p(2);H("selected",t.reactivatedServices.includes(e)),s(),w(" ",e," ")}}function pt(r,o){if(r&1){let e=k();i(0,"div",12)(1,"h4"),a(2,"Services \xE0 r\xE9activer"),n(),i(3,"div",13),S(4,mt,2,3,"button",14),n(),i(5,"button",19),_("click",function(){u(e);let l=p();return g(l.reactivate())}),a(6,"R\xE9activer"),n()()}if(r&2){let e=p();s(4),m("ngForOf",e.availableServices)}}var le=class r{constructor(o,e,t){this.route=o;this.clientService=e;this.serviceManager=t;console.log("\u{1F50D} ClientDetailsComponent constructor called")}client;clientId="";message="";error="";isLoading=!1;activeTab="activer";availableServices=["VIREMENT","PAIEMENTS_EN_LIGNE","CONSULTATION_SOLDE","HISTORIQUE_TRANSACTIONS","CHEQUIER","BLOQUER_CARTE","PRET_PERSONNEL","EPARGNE","INVESTISSEMENT","ALERTES","FACTURES","MULTIDEVISES","SERVICE_CLIENT","MESSAGERIE_SECURIS\xC9E"];newServices=[];suspendedServices=[];reactivatedServices=[];suspensionReason="";suspensionMessage="";ngOnInit(){console.log("\u{1F50D} ClientDetailsComponent ngOnInit started");let o=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");console.log("\u{1F50D} Token in ClientDetails ngOnInit:",o?"EXISTS":"MISSING");let e=this.route.snapshot.paramMap.get("id");console.log("\u{1F50D} Route param ID:",e),e?(this.clientId=e,this.isLoading=!0,console.log("\u{1F50D} About to call clientService.getClientById"),this.clientService.getClientById(e).subscribe({next:t=>{console.log("\u2705 getClientById SUCCESS:",t),this.client=t},error:t=>{console.error("\u274C getClientById ERROR:",t),console.error("\u274C Error status:",t.status),console.error("\u274C Error message:",t.message),(t.status===401||t.status===403)&&console.error("\u{1F6A8} AUTHENTICATION ERROR - This might trigger logout"),this.error="Erreur lors du chargement du client."},complete:()=>{console.log("\u{1F50D} getClientById completed"),this.isLoading=!1}})):console.error("\u274C No client ID found in route params")}get isEligible(){if(!this.client)return!1;let o=this.client.compteBloque===null||this.client.compteBloque===!1,e=this.client.documentsComplets===null||this.client.documentsComplets===!0;return o&&e}toggleService(o,e){let t=e.indexOf(o);t>-1?e.splice(t,1):e.push(o)}activate(){console.log("\u{1F6A8} ACTIVATE METHOD CALLED"),this.clearMessages(),console.log("\u{1F50D} Activate method called"),console.log("\u{1F50D} Client data:",this.client),console.log("\u{1F50D} Client ID:",this.clientId);let o=localStorage.getItem("authToken")||sessionStorage.getItem("authToken")||localStorage.getItem("token");console.log("\u{1F511} Token check in activate method:",o?"EXISTS":"MISSING"),this.clientService.getClientById(this.clientId).subscribe({next:e=>{if(console.log("\u{1F504} Client reloaded:",e),this.client=e,console.log("\u{1F50D} About to check isEligible..."),console.log("\u{1F50D} isEligible value:",this.isEligible),!this.isEligible){console.log("\u274C NOT ELIGIBLE - Setting error message"),this.error="Le client est bloqu\xE9 ou n'a pas tous les documents complets.";return}if(console.log("\u2705 Client is eligible, checking services..."),this.newServices.length===0){console.log("\u274C No services selected"),this.error="Veuillez s\xE9lectionner des services \xE0 activer.";return}console.log("\u{1F50D} Services to activate:",this.newServices);let t={clientId:this.clientId,services:this.newServices};console.log("\u{1F50D} Request payload:",JSON.stringify(t,null,2)),console.log("\u{1F50D} Request type check:"),console.log("  - clientId type:",typeof t.clientId),console.log("  - services type:",typeof t.services),console.log("  - services is array:",Array.isArray(t.services)),this.isLoading=!0,console.log("\u{1F680} About to call serviceManager.activateServices..."),this.serviceManager.activateServices(t).subscribe({next:l=>{console.log("\u2705 Services activated successfully"),console.log("\u2705 Response:",l),console.log("\u2705 Response type:",typeof l),this.message=l||"Services activ\xE9s avec succ\xE8s.",this.newServices=[]},error:l=>{console.error("\u274C activateServices ERROR:",l),console.error("\u274C Full error object:",JSON.stringify(l,null,2)),console.error("\u274C Error details:",{status:l.status,statusText:l.statusText,message:l.message,error:l.error,url:l.url,name:l.name});let c="Erreur lors de l'activation";switch(l.status){case 0:c+=" - Probl\xE8me de connexion au serveur";break;case 400:c+=" - Donn\xE9es invalides",l.error?.message&&(c+=`: ${l.error.message}`);break;case 401:c+=" - Non autoris\xE9 (token invalide)";break;case 403:c+=" - Acc\xE8s refus\xE9";break;case 404:c+=" - Service non trouv\xE9";break;case 500:c+=" - Erreur serveur interne";break;default:c+=` - Code erreur: ${l.status}`,l.error?.message&&(c+=`: ${l.error.message}`)}this.error=c},complete:()=>{console.log("\u{1F50D} activateServices completed"),this.isLoading=!1}})},error:e=>{console.error("\u274C Reload client ERROR:",e),console.error("\u274C Reload error details:",{status:e.status,statusText:e.statusText,message:e.message,error:e.error}),this.error="Impossible de v\xE9rifier les statuts du client.",this.isLoading=!1}})}suspend(){if(this.clearMessages(),this.suspendedServices.length===0){this.error="Veuillez s\xE9lectionner des services \xE0 suspendre.";return}let o={servicesToSuspend:this.suspendedServices,reason:this.suspensionReason,notificationMessage:this.suspensionMessage};this.isLoading=!0,this.serviceManager.suspendServices(this.clientId,o).subscribe({next:()=>this.message="Services suspendus avec succ\xE8s.",error:e=>{console.error("\u274C suspendServices ERROR:",e),this.error="Erreur lors de la suspension."},complete:()=>this.isLoading=!1})}reactivate(){if(this.clearMessages(),this.reactivatedServices.length===0){this.error="Veuillez s\xE9lectionner des services \xE0 r\xE9activer.";return}this.isLoading=!0,this.serviceManager.reactivateServices(this.clientId,this.reactivatedServices).subscribe({next:()=>this.message="Services r\xE9activ\xE9s avec succ\xE8s.",error:o=>{console.error("\u274C reactivateServices ERROR:",o),this.error="Erreur lors de la r\xE9activation."},complete:()=>this.isLoading=!1})}clearMessages(){this.message="",this.error=""}static \u0275fac=function(e){return new(e||r)(f(F),f(R),f(Te))};static \u0275cmp=M({type:r,selectors:[["app-client-details"]],decls:17,vars:12,consts:[[1,"client-details-container"],["class","client-info",4,"ngIf"],["class","alert success",4,"ngIf"],["class","alert error",4,"ngIf"],[1,"tabs"],[3,"click"],[1,"tab-content"],["class","service-group",4,"ngIf"],[1,"client-info"],[4,"ngIf"],[1,"alert","success"],[1,"alert","error"],[1,"service-group"],[1,"service-grid"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"primary",3,"click"],["placeholder","Raison de suspension",3,"ngModelChange","ngModel"],["placeholder","Message au client",3,"ngModelChange","ngModel"],[1,"warning",3,"click"],[1,"success",3,"click"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"h2"),a(2,"D\xE9tails du Client"),n(),S(3,ot,10,3,"div",1)(4,rt,2,1,"div",2)(5,at,2,1,"div",3),i(6,"div",4)(7,"button",5),_("click",function(){return t.activeTab="activer"}),a(8,"\u2705 Activer"),n(),i(9,"button",5),_("click",function(){return t.activeTab="suspendre"}),a(10,"\u26D4 Suspendre"),n(),i(11,"button",5),_("click",function(){return t.activeTab="reactiver"}),a(12,"\u267B\uFE0F R\xE9activer"),n()(),i(13,"div",6),S(14,lt,7,1,"div",7)(15,dt,9,3,"div",7)(16,pt,7,1,"div",7),n()()),e&2&&(s(3),m("ngIf",t.client),s(),m("ngIf",t.message),s(),m("ngIf",t.error),s(2),H("active",t.activeTab==="activer"),s(2),H("active",t.activeTab==="suspendre"),s(2),H("active",t.activeTab==="reactiver"),s(3),m("ngIf",t.activeTab==="activer"),s(),m("ngIf",t.activeTab==="suspendre"),s(),m("ngIf",t.activeTab==="reactiver"))},dependencies:[y,je,O,he,N,E,P,V],styles:[".client-details-container[_ngcontent-%COMP%]{background-color:#f8fafc;padding:30px;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;text-align:center}.client-info[_ngcontent-%COMP%]{background:linear-gradient(to right,#fff,#f9fafb);border-radius:16px;padding:28px 32px;box-shadow:0 10px 30px #0000000f;margin-bottom:30px;font-family:Segoe UI,sans-serif;color:#1e3a8a;max-width:500px;width:100%;transition:transform .2s ease}.client-info[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.client-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:10px 0;display:flex;align-items:center;gap:8px;color:#0f172a}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-size:28px;margin-bottom:30px;color:#1e3a8a;text-align:center}.account-table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 8px;background-color:transparent;margin:0 auto;width:auto}.account-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .account-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 20px;text-align:left;font-size:15px}.account-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0edff;color:#1e3a8a;font-weight:600;border-radius:8px}.account-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;color:#374151;border-radius:8px;box-shadow:0 1px 4px #0000000a;transition:transform .2s ease}.account-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{transform:translateY(-2px);background-color:#f0f8ff}.tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin:2rem 0 1rem}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #cbd5e1;border-radius:10px;font-size:15px;padding:10px 24px;font-weight:700;cursor:pointer;transition:all .3s ease;color:#1e3a8a}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#2563eb;border-color:#2563eb;color:#fff}.service-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:20px 0}.service-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;background-color:#f0f4ff;border:2px solid #c7d2fe;border-radius:10px;cursor:pointer;font-weight:600;transition:.3s ease;color:#1e40af;white-space:nowrap;word-break:break-word;text-align:center;min-height:50px;min-width:180px;box-shadow:0 2px 4px #0000000d}.service-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e0e7ff;border-color:#a5b4fc}.service-grid[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{background-color:#7fa0d2;color:#fff;border-color:#738ac4;box-shadow:0 2px 6px #4f46e54d}textarea[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;padding:10px;font-family:inherit;border-radius:8px;border:1px solid #d1d5db;background-color:#f9fafb;font-size:15px}button.primary[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff}button.warning[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}button.success[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}button.primary[_ngcontent-%COMP%], button.warning[_ngcontent-%COMP%], button.success[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;border:none;margin-top:10px;font-weight:700;cursor:pointer;transition:background-color .2s ease}.alert[_ngcontent-%COMP%]{padding:10px;border-radius:6px;margin:10px 0}.alert.success[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.alert.error[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}body[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;background-color:#f1f5f9;color:#1f2937;margin:0;padding:0}"]})};function ut(r,o){if(r&1&&(i(0,"div",35),a(1),n()),r&2){let e=p();s(),x(e.error)}}function gt(r,o){if(r&1&&(i(0,"div",36),a(1),n()),r&2){let e=p();s(),x(e.message)}}function ft(r,o){if(r&1){let e=k();i(0,"div",37),_("click",function(){u(e);let l=p();return g(l.toggleRecap())}),n()}}function Ct(r,o){if(r&1){let e=k();i(0,"div",38)(1,"div",39),_("click",function(l){return u(e),g(l.stopPropagation())}),i(2,"h3"),a(3,"R\xE9capitulatif"),n(),i(4,"ul")(5,"li")(6,"strong"),a(7,"Pr\xE9nom :"),n(),a(8),n(),i(9,"li")(10,"strong"),a(11,"Nom :"),n(),a(12),n(),i(13,"li")(14,"strong"),a(15,"CIN :"),n(),a(16),n(),i(17,"li")(18,"strong"),a(19,"Email :"),n(),a(20),n(),i(21,"li")(22,"strong"),a(23,"T\xE9l\xE9phone :"),n(),a(24),n(),i(25,"li")(26,"strong"),a(27,"Date de naissance :"),n(),a(28),n(),i(29,"li")(30,"strong"),a(31,"Type de compte :"),n(),a(32),n(),i(33,"li")(34,"strong"),a(35,"Solde initial :"),n(),a(36),ve(37,"currency"),n(),i(38,"li")(39,"strong"),a(40,"Documents complets :"),n(),a(41),n(),i(42,"li")(43,"strong"),a(44,"Compte bloqu\xE9 :"),n(),a(45),n()(),i(46,"button",40),_("click",function(){u(e);let l=p();return g(l.toggleRecap())}),a(47,"Fermer"),n()()()}if(r&2){let e=p();s(8),w(" ",e.firstName,""),s(4),w(" ",e.lastName,""),s(4),w(" ",e.cin,""),s(4),w(" ",e.email,""),s(4),w(" ",e.tel,""),s(4),w(" ",e.birthDate,""),s(4),w(" ",e.accountType,""),s(4),w(" ",_e(37,10,e.balance,"EUR"),""),s(5),w(" ",e.documentsComplets?"Oui":"Non",""),s(4),w(" ",e.compteBloque?"Oui":"Non","")}}var ce=class r{constructor(o,e,t){this.clientService=o;this.router=e;this.toastr=t}firstName="";lastName="";cin="";email="";tel="";birthDate="";accountType="courant";balance=0;documentsComplets=!1;compteBloque=!1;message="";error="";formatDate(o){if(!o)return"";let e=new Date(o);return isNaN(e.getTime())?"":e.toISOString().split("T")[0]}create(){this.error="";let o={firstName:this.firstName,lastName:this.lastName,email:this.email,tel:this.tel,birthDate:this.formatDate(this.birthDate),accountType:this.accountType,balance:this.balance,cin:this.cin};this.clientService.createClient(o).subscribe({next:()=>{this.message="Client cr\xE9\xE9 avec succ\xE8s.",this.toastr.success("Client cr\xE9\xE9 avec succ\xE8s.","Audit log"),this.router.navigate(["/employee/clients"])},error:()=>{this.error="Erreur lors de la cr\xE9ation du client.",this.toastr.error("Erreur lors de la cr\xE9ation.","Audit \xE9chou\xE9")}})}showRecap=!1;toggleRecap(){this.showRecap=!this.showRecap}static \u0275fac=function(e){return new(e||r)(f(R),f(D),f(L))};static \u0275cmp=M({type:r,selectors:[["app-client-create"]],decls:59,vars:14,consts:[["form","ngForm"],[1,"create-client-form"],["class","error",4,"ngIf"],["class","success",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","name","firstName","required","",3,"ngModelChange","ngModel"],["for","lastName"],["type","text","id","lastName","name","lastName","required","",3,"ngModelChange","ngModel"],["for","cin"],["type","text","id","cin","name","cin","required","","placeholder","Ex: AB123456",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","tel"],["type","tel","id","tel","name","tel","required","",3,"ngModelChange","ngModel"],["for","birthDate"],["type","date","id","birthDate","name","birthDate","required","",3,"ngModelChange","ngModel"],["for","accountType"],["id","accountType","name","accountType","required","",3,"ngModelChange","ngModel"],["value","courant"],["value","\xE9pargne"],["for","balance"],["type","number","id","balance","name","balance","required","",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],[1,"checkbox-item"],["type","checkbox","id","documentsComplets","name","documentsComplets",3,"ngModelChange","ngModel"],["for","documentsComplets"],["type","checkbox","id","compteBloque","name","compteBloque",3,"ngModelChange","ngModel"],["for","compteBloque"],[1,"form-actions"],["type","submit"],["type","button",3,"click"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[1,"error"],[1,"success"],[1,"modal-backdrop",3,"click"],[1,"modal"],[1,"modal-content",3,"click"],[3,"click"]],template:function(e,t){if(e&1){let l=k();i(0,"div",1)(1,"h2"),a(2,"Inscription d'un Nouveau Client"),n(),S(3,ut,2,1,"div",2)(4,gt,2,1,"div",3),i(5,"form",4,0),_("ngSubmit",function(){return u(l),g(t.create())}),i(7,"div",5)(8,"label",6),a(9,"Pr\xE9nom :"),n(),i(10,"input",7),v("ngModelChange",function(d){return u(l),b(t.firstName,d)||(t.firstName=d),g(d)}),n()(),i(11,"div",5)(12,"label",8),a(13,"Nom :"),n(),i(14,"input",9),v("ngModelChange",function(d){return u(l),b(t.lastName,d)||(t.lastName=d),g(d)}),n()(),i(15,"div",5)(16,"label",10),a(17,"CIN :"),n(),i(18,"input",11),v("ngModelChange",function(d){return u(l),b(t.cin,d)||(t.cin=d),g(d)}),n()(),i(19,"div",5)(20,"label",12),a(21,"Email :"),n(),i(22,"input",13),v("ngModelChange",function(d){return u(l),b(t.email,d)||(t.email=d),g(d)}),n()(),i(23,"div",5)(24,"label",14),a(25,"T\xE9l\xE9phone :"),n(),i(26,"input",15),v("ngModelChange",function(d){return u(l),b(t.tel,d)||(t.tel=d),g(d)}),n()(),i(27,"div",5)(28,"label",16),a(29,"Date de naissance :"),n(),i(30,"input",17),v("ngModelChange",function(d){return u(l),b(t.birthDate,d)||(t.birthDate=d),g(d)}),n()(),i(31,"div",5)(32,"label",18),a(33,"Type de compte :"),n(),i(34,"select",19),v("ngModelChange",function(d){return u(l),b(t.accountType,d)||(t.accountType=d),g(d)}),i(35,"option",20),a(36,"Courant"),n(),i(37,"option",21),a(38,"\xC9pargne"),n()()(),i(39,"div",5)(40,"label",22),a(41,"Solde initial :"),n(),i(42,"input",23),v("ngModelChange",function(d){return u(l),b(t.balance,d)||(t.balance=d),g(d)}),n()(),i(43,"div",24)(44,"div",25)(45,"input",26),v("ngModelChange",function(d){return u(l),b(t.documentsComplets,d)||(t.documentsComplets=d),g(d)}),n(),i(46,"label",27),a(47,"Documents complets ?"),n()(),i(48,"div",25)(49,"input",28),v("ngModelChange",function(d){return u(l),b(t.compteBloque,d)||(t.compteBloque=d),g(d)}),n(),i(50,"label",29),a(51,"Compte bloqu\xE9 ?"),n()()(),i(52,"div",30)(53,"button",31),a(54,"Cr\xE9er"),n()()(),i(55,"button",32),_("click",function(){return u(l),g(t.toggleRecap())}),a(56,"Voir le r\xE9capitulatif"),n(),S(57,ft,1,0,"div",33)(58,Ct,48,13,"div",34),n()}e&2&&(s(3),m("ngIf",t.error),s(),m("ngIf",t.message),s(6),C("ngModel",t.firstName),s(4),C("ngModel",t.lastName),s(4),C("ngModel",t.cin),s(4),C("ngModel",t.email),s(4),C("ngModel",t.tel),s(4),C("ngModel",t.birthDate),s(4),C("ngModel",t.accountType),s(8),C("ngModel",t.balance),s(3),C("ngModel",t.documentsComplets),s(4),C("ngModel",t.compteBloque),s(8),m("ngIf",t.showRecap),s(),m("ngIf",t.showRecap))},dependencies:[y,O,he,N,q,Ee,Pe,E,U,Se,Oe,P,B,ne,V,te,T],styles:[".create-client-form[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:16px;max-width:700px;margin:40px auto;box-shadow:0 12px 30px #00000014;font-family:Segoe UI,sans-serif;color:#1e293b}.create-client-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1e3a8a;text-align:center;font-size:28px;margin-bottom:32px;font-weight:700}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:6px;font-size:15px;color:#1e293b}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:1px solid #cbd5e1;border-radius:10px;font-size:15px;background-color:#f9fafb;transition:border-color .3s,box-shadow .3s}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f640}.form-actions[_ngcontent-%COMP%]{text-align:center;margin-top:30px}button[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff;padding:12px 28px;font-weight:600;font-size:15px;border:none;border-radius:10px;cursor:pointer;transition:background-color .2s ease}button[_ngcontent-%COMP%]:hover{background-color:#1e40af}.success[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{padding:12px;border-radius:8px;margin-bottom:20px;font-size:15px;font-weight:500;text-align:center}.success[_ngcontent-%COMP%]{background-color:#dcfce7;color:#15803d}.error[_ngcontent-%COMP%]{background-color:#fee2e2;color:#b91c1c}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#1e293b80;z-index:99}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);background:#fff;padding:30px;border-radius:16px;box-shadow:0 10px 30px #00000026;z-index:100;width:90%;max-width:520px;animation:_ngcontent-%COMP%_fadeInUp .25s ease-out}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#1e3a8a;text-align:center;font-size:22px;margin-bottom:20px}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-bottom:20px}.modal-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;font-size:15px;color:#334155}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff;padding:10px 24px;border-radius:8px;border:none;font-weight:600;cursor:pointer;display:block;margin:0 auto;transition:background-color .2s ease}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1d4ed8}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}@media (max-width: 500px){.create-client-form[_ngcontent-%COMP%]{padding:24px}button[_ngcontent-%COMP%]{width:100%}}.checkbox-group[_ngcontent-%COMP%]{display:flex;gap:40px;align-items:center;margin-top:10px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px}"]})};function bt(r,o){if(r&1&&(i(0,"div",15),a(1),n()),r&2){let e=p();s(),x(e.error)}}function vt(r,o){if(r&1&&(i(0,"div",16),a(1),n()),r&2){let e=p();s(),x(e.message)}}var de=class r{constructor(o,e,t){this.route=o;this.clientService=e;this.router=t}client;updatedFirstName="";updatedLastName="";updatedEmail="";updatedPhone="";supervisorPassword="";updatedDocumentsComplets=!1;updatedCompteBloque=!1;message="";error="";ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&this.clientService.getClientById(o).subscribe({next:e=>{this.client=e;let t=e.fullName.split(" ");this.updatedFirstName=t[0],this.updatedLastName=t.slice(1).join(" "),this.updatedEmail=e.email??"",this.updatedPhone=e.phone??""},error:()=>this.error="Erreur lors du chargement du client."})}update(){if(!this.client)return;let o={clientId:this.client.clientId,newFirstName:this.updatedFirstName,newLastName:this.updatedLastName,newEmail:this.updatedEmail,newTel:this.updatedPhone,supervisorCode:this.supervisorPassword};console.log("\u{1F680} Envoi de la mise \xE0 jour:",o),this.clientService.updateClient(o).subscribe({next:e=>{console.log("\u2705 R\xE9ponse re\xE7ue:",e),this.message="Client mis \xE0 jour avec succ\xE8s \u2705",setTimeout(()=>{this.router.navigate(["/employee/clients"])},1e3)},error:e=>{console.error("\u274C Erreur compl\xE8te:",e),console.error("\u274C Status:",e.status),console.error("\u274C Message:",e.message),this.error="Erreur de mise \xE0 jour ou mot de passe invalide \u274C"}})}static \u0275fac=function(e){return new(e||r)(f(F),f(R),f(D))};static \u0275cmp=M({type:r,selectors:[["app-client-update"]],decls:37,vars:9,consts:[["form","ngForm"],[1,"update-container"],["class","alert error",4,"ngIf"],["class","alert success",4,"ngIf"],[1,"form-grid",3,"ngSubmit"],[1,"form-group"],["name","firstName","required","",3,"ngModelChange","ngModel"],["name","lastName","required","",3,"ngModelChange","ngModel"],["name","email","type","email",3,"ngModelChange","ngModel"],["name","phone",3,"ngModelChange","ngModel"],["type","checkbox","name","documentsComplets",3,"ngModelChange","ngModel"],["type","checkbox","name","compteBloque",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"alert","error"],[1,"alert","success"]],template:function(e,t){if(e&1){let l=k();i(0,"div",1)(1,"h2"),a(2,"\u{1F4DD} Modifier le Client"),n(),S(3,bt,2,1,"div",2)(4,vt,2,1,"div",3),i(5,"form",4,0),_("ngSubmit",function(){return u(l),g(t.update())}),i(7,"div",5)(8,"label"),a(9,"Pr\xE9nom :"),n(),i(10,"input",6),v("ngModelChange",function(d){return u(l),b(t.updatedFirstName,d)||(t.updatedFirstName=d),g(d)}),n()(),i(11,"div",5)(12,"label"),a(13,"Nom :"),n(),i(14,"input",7),v("ngModelChange",function(d){return u(l),b(t.updatedLastName,d)||(t.updatedLastName=d),g(d)}),n()(),i(15,"div",5)(16,"label"),a(17,"Email :"),n(),i(18,"input",8),v("ngModelChange",function(d){return u(l),b(t.updatedEmail,d)||(t.updatedEmail=d),g(d)}),n()(),i(19,"div",5)(20,"label"),a(21,"T\xE9l\xE9phone :"),n(),i(22,"input",9),v("ngModelChange",function(d){return u(l),b(t.updatedPhone,d)||(t.updatedPhone=d),g(d)}),n()(),i(23,"div",5)(24,"label")(25,"input",10),v("ngModelChange",function(d){return u(l),b(t.updatedDocumentsComplets,d)||(t.updatedDocumentsComplets=d),g(d)}),n(),a(26," Documents complets ? "),n()(),i(27,"div",5)(28,"label")(29,"input",11),v("ngModelChange",function(d){return u(l),b(t.updatedCompteBloque,d)||(t.updatedCompteBloque=d),g(d)}),n(),a(30," Compte bloqu\xE9 ? "),n()(),i(31,"div",12)(32,"label"),a(33,"Mot de passe superviseur :"),n(),i(34,"input",13),v("ngModelChange",function(d){return u(l),b(t.supervisorPassword,d)||(t.supervisorPassword=d),g(d)}),n()(),i(35,"button",14),a(36,"Mettre \xE0 jour"),n()()()}e&2&&(s(3),m("ngIf",t.error),s(),m("ngIf",t.message),s(6),C("ngModel",t.updatedFirstName),s(4),C("ngModel",t.updatedLastName),s(4),C("ngModel",t.updatedEmail),s(4),C("ngModel",t.updatedPhone),s(3),C("ngModel",t.updatedDocumentsComplets),s(4),C("ngModel",t.updatedCompteBloque),s(5),C("ngModel",t.supervisorPassword))},dependencies:[y,O,N,q,E,Se,P,B,ne,V,te],styles:[".update-container[_ngcontent-%COMP%]{max-width:760px;margin:3rem auto;padding:2.5rem;background-color:#fff;border-radius:16px;box-shadow:0 12px 24px #0000000f;font-family:Segoe UI,sans-serif}.update-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#1e3a8a;font-size:28px;margin-bottom:2rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem 2rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.4rem;color:#1e293b}input[_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #cbd5e1;border-radius:8px;background-color:#f9fafb;transition:border-color .3s,box-shadow .3s}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f640}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.btn-submit[_ngcontent-%COMP%]{grid-column:span 2;padding:.9rem;background-color:#2563eb;color:#fff;font-weight:700;font-size:1rem;border:none;border-radius:10px;cursor:pointer;transition:background-color .2s ease}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#1d4ed8}.alert[_ngcontent-%COMP%]{text-align:center;padding:.9rem;border-radius:8px;margin-bottom:1.5rem;font-weight:500}.alert.error[_ngcontent-%COMP%]{background-color:#fee2e2;color:#b91c1c}.alert.success[_ngcontent-%COMP%]{background-color:#dcfce7;color:#15803d}@media (max-width: 600px){.full-width[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{grid-column:span 1}}"]})};function _t(r,o){if(r&1&&(i(0,"div",9),a(1),n()),r&2){let e=p();s(),x(e.message)}}function ht(r,o){if(r&1&&(i(0,"div",10),a(1),n()),r&2){let e=p();s(),x(e.error)}}var me=class r{constructor(o,e,t,l){this.route=o;this.router=e;this.clientService=t;this.toastr=l}clientId="";message="";error="";clientName="";supervisorCode="";ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&(this.clientId=o,this.clientService.getClientById(o).subscribe({next:e=>{this.clientName=e.fullName},error:()=>{this.error="Erreur lors du chargement du client."}}))}confirmDelete(){let o={clientId:this.clientId,supervisorCode:this.supervisorCode};this.clientService.deleteClient(o).subscribe({next:()=>{this.toastr.success("Client supprim\xE9 avec succ\xE8s.","Action audit\xE9e"),this.router.navigate(["/clients"])},error:e=>{e.status===401?this.toastr.error("Code superviseur incorrect.","\xC9chec audit"):e.status===400?this.toastr.warning(e.error,"Suppression refus\xE9e"):this.toastr.error("Erreur inattendue.","Audit \xE9chou\xE9")}})}cancel(){this.router.navigate(["/clients",this.clientId])}static \u0275fac=function(e){return new(e||r)(f(F),f(D),f(R),f(L))};static \u0275cmp=M({type:r,selectors:[["app-client-delete"]],decls:19,vars:5,consts:[[1,"client-delete-container"],["class","alert success",4,"ngIf"],["class","alert error",4,"ngIf"],[1,"form-group"],["for","supervisorCode"],["type","password","id","supervisorCode","placeholder","Entrez le code superviseur",1,"input",3,"ngModelChange","ngModel"],[1,"button-group"],[1,"btn","delete",3,"click"],[1,"btn","cancel",3,"click"],[1,"alert","success"],[1,"alert","error"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"h2"),a(2,"\u{1F5D1}\uFE0F Suppression du Client"),n(),S(3,_t,2,1,"div",1)(4,ht,2,1,"div",2),i(5,"p"),a(6," \xCAtes-vous s\xFBr de vouloir supprimer le client "),i(7,"strong"),a(8),n(),a(9),n(),i(10,"div",3)(11,"label",4),a(12,"Code superviseur"),n(),i(13,"input",5),v("ngModelChange",function(c){return b(t.supervisorCode,c)||(t.supervisorCode=c),c}),n()(),i(14,"div",6)(15,"button",7),_("click",function(){return t.confirmDelete()}),a(16,"\u2705 Oui, Supprimer"),n(),i(17,"button",8),_("click",function(){return t.cancel()}),a(18,"\u274C Annuler"),n()()()),e&2&&(s(3),m("ngIf",t.message),s(),m("ngIf",t.error),s(4),x(t.clientName),s(),w(" (ID: ",t.clientId,") ? "),s(4),C("ngModel",t.supervisorCode))},dependencies:[y,O,Me,N,E,P,V],styles:[".client-delete-container[_ngcontent-%COMP%]{max-width:600px;margin:60px auto;padding:2rem;background-color:#fff;border-radius:16px;box-shadow:0 15px 30px #0000000d;text-align:center;font-family:Segoe UI,sans-serif}.client-delete-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#dc2626;font-size:28px;margin-bottom:1.5rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.client-delete-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.15rem;color:#1e293b;margin-bottom:2rem}.client-delete-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:#000}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;font-weight:500;margin-bottom:1.5rem;font-size:15px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.alert.success[_ngcontent-%COMP%]{background-color:#dcfce7;color:#15803d}.alert.error[_ngcontent-%COMP%]{background-color:#fee2e2;color:#b91c1c}.form-group[_ngcontent-%COMP%]{margin-bottom:1.8rem;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#334155}.input[_ngcontent-%COMP%]{width:100%;padding:.7rem 1rem;border:1px solid #cbd5e1;border-radius:8px;font-size:16px;transition:border-color .2s}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f626}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;border:none;transition:background-color .25s ease;display:flex;align-items:center;gap:.5rem}.btn.delete[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff}.btn.delete[_ngcontent-%COMP%]:hover{background-color:#b91c1c}.btn.cancel[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#1e293b}.btn.cancel[_ngcontent-%COMP%]:hover{background-color:#e2e8f0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}"]})};function xt(r,o){if(r&1&&(i(0,"div",9),a(1),n()),r&2){let e=p(2);s(),x(e.message)}}function Mt(r,o){if(r&1&&(i(0,"div",10),a(1),n()),r&2){let e=p(2);s(),x(e.error)}}function St(r,o){if(r&1){let e=k();i(0,"div",2)(1,"div",3)(2,"label"),a(3,"Compte bloqu\xE9 :"),n(),i(4,"label")(5,"input",4),v("ngModelChange",function(l){u(e);let c=p();return b(c.compteBloque,l)||(c.compteBloque=l),g(l)}),n(),a(6," Oui"),n(),i(7,"label")(8,"input",4),v("ngModelChange",function(l){u(e);let c=p();return b(c.compteBloque,l)||(c.compteBloque=l),g(l)}),n(),a(9," Non"),n()(),i(10,"div",3)(11,"label"),a(12,"Documents complets :"),n(),i(13,"label")(14,"input",5),v("ngModelChange",function(l){u(e);let c=p();return b(c.documentsComplets,l)||(c.documentsComplets=l),g(l)}),n(),a(15," Oui"),n(),i(16,"label")(17,"input",5),v("ngModelChange",function(l){u(e);let c=p();return b(c.documentsComplets,l)||(c.documentsComplets=l),g(l)}),n(),a(18," Non"),n()(),i(19,"button",6),_("click",function(){u(e);let l=p();return g(l.toggle())}),a(20,"Mettre \xE0 jour"),n(),S(21,xt,2,1,"div",7)(22,Mt,2,1,"div",8),n()}if(r&2){let e=p();s(5),C("ngModel",e.compteBloque),m("value",!0),s(3),C("ngModel",e.compteBloque),m("value",!1),s(6),C("ngModel",e.documentsComplets),m("value",!0),s(3),C("ngModel",e.documentsComplets),m("value",!1),s(4),m("ngIf",e.message),s(),m("ngIf",e.error)}}var pe=class r{constructor(o,e,t){this.route=o;this.router=e;this.clientService=t}clientId="";compteBloque=!1;documentsComplets=!0;message="";error="";ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&(this.clientId=o,this.clientService.getClientById(o).subscribe({next:e=>{this.compteBloque=e.compteBloque??!1,this.documentsComplets=e.documentsComplets??!0},error:()=>this.error="Erreur lors du chargement du client."}))}toggle(){this.message="",this.error="",console.log(">>> Mise \xE0 jour du statut :",this.compteBloque,this.documentsComplets),this.clientService.toggleClientStatus(this.clientId,this.compteBloque,this.documentsComplets).subscribe({next:()=>this.message="Statuts mis \xE0 jour avec succ\xE8s",error:()=>this.error="Erreur lors de la mise \xE0 jour du statut"})}static \u0275fac=function(e){return new(e||r)(f(F),f(D),f(R))};static \u0275cmp=M({type:r,selectors:[["app-client-status-toggle"]],decls:4,vars:1,consts:[[1,"status-container"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"field-group"],["type","radio","name","compteBloque",3,"ngModelChange","ngModel","value"],["type","radio","name","documentsComplets",3,"ngModelChange","ngModel","value"],[1,"btn-update",3,"click"],["class","success",4,"ngIf"],["class","error",4,"ngIf"],[1,"success"],[1,"error"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"h2"),a(2,"\u{1F6E0}\uFE0F Modifier le Statut du Client"),n(),S(3,St,23,10,"div",1),n()),e&2&&(s(3),m("ngIf",t.clientId))},dependencies:[y,O,N,E,He,P,V],styles:[".status-container[_ngcontent-%COMP%]{max-width:600px;margin:50px auto;padding:2.5rem;background-color:#fff;border-radius:16px;box-shadow:0 10px 24px #0000000d;font-family:Segoe UI,sans-serif}.status-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#1e3a8a;font-size:26px;margin-bottom:2.5rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-child{font-weight:600;font-size:15px;color:#1e293b;margin-bottom:.2rem}.field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:15px;color:#334155}.field-group[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:8px;accent-color:#2563eb;transform:scale(1.1)}.btn-update[_ngcontent-%COMP%]{padding:12px 24px;background-color:#2563eb;color:#fff;font-weight:600;font-size:15px;border:none;border-radius:10px;cursor:pointer;align-self:flex-start;transition:background-color .2s ease}.btn-update[_ngcontent-%COMP%]:hover{background-color:#1e40af}.success[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{padding:.75rem;border-radius:8px;margin-top:1rem;font-size:15px;font-weight:500;text-align:left;max-width:100%}.success[_ngcontent-%COMP%]{color:#15803d;background-color:#dcfce7}.error[_ngcontent-%COMP%]{color:#b91c1c;background-color:#fee2e2}@media (max-width: 480px){.btn-update[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};var yt=()=>["virement"],wt=()=>["operation"],Ne=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-transaction-selector"]],decls:12,vars:4,consts:[[1,"page-title"],[1,"transaction-grid"],[1,"transaction-card",3,"routerLink"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-hand-holding-usd"]],template:function(e,t){e&1&&(i(0,"h2",0),a(1,"Choisir une transaction"),n(),i(2,"div",1)(3,"div",2),h(4,"i",3),i(5,"h3"),a(6,"Virement"),n()(),i(7,"div",2),h(8,"i",4),i(9,"h3"),a(10,"D\xE9p\xF4t/Retrait"),n()()(),h(11,"router-outlet")),e&2&&(s(3),m("routerLink",Q(2,yt)),s(4),m("routerLink",Q(3,wt)))},dependencies:[y,T,xe,$],styles:[".page-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;margin-bottom:20px}.transaction-grid[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:20px}.transaction-card[_ngcontent-%COMP%]{width:200px;height:200px;background:#f9fafb;border-radius:12px;box-shadow:0 4px 10px #0000001a;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#1e3a8a;font-size:18px;cursor:pointer;transition:transform .2s}.transaction-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.transaction-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px;margin-bottom:10px}"]})};var Re=class r{constructor(o){this.http=o}apiUrl=`${ee.apiUrl}/employee/employee/transfer`;effectuerVirement(o){let e=localStorage.getItem("token")||"",t=new K({"Content-Type":"application/json",Authorization:`Bearer ${e}`});return console.log("VirementService charg\xE9 avec URL :",this.apiUrl),this.http.post(this.apiUrl,o,{headers:t,responseType:"text"})}static \u0275fac=function(e){return new(e||r)(J(Z))};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};function Et(r,o){if(r&1&&(i(0,"div",12),a(1),n()),r&2){let e=p();s(),x(e.successMessage)}}function Pt(r,o){if(r&1&&(i(0,"div",13),a(1),n()),r&2){let e=p();s(),x(e.errorMessage)}}var re=class r{constructor(o,e,t){this.fb=o;this.virementService=e;this.toastr=t;this.virementForm=this.fb.group({fromAccountId:["",j.required],toRib:["",j.required],amount:["",[j.required,j.min(1)]]})}virementForm;successMessage="";errorMessage="";effectuerVirement(){if(this.virementForm.invalid)return;let o=this.virementForm.value;this.virementService.effectuerVirement(o).subscribe({next:e=>{this.toastr.success("Virement effectu\xE9 avec succ\xE8s \u2705"),this.virementForm.reset()},error:e=>{this.toastr.error(e.error||"Erreur inconnue \u274C")}})}static \u0275fac=function(e){return new(e||r)(f(Ie),f(Re),f(L))};static \u0275cmp=M({type:r,selectors:[["app-virement"]],decls:19,vars:4,consts:[[1,"page-title"],[1,"virement-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","fromAccountId"],["id","fromAccountId","type","text","formControlName","fromAccountId","placeholder","UUID du compte source",1,"form-control"],["for","toRib"],["id","toRib","type","text","formControlName","toRib","placeholder","RIB du compte destinataire",1,"form-control"],["for","amount"],["id","amount","type","number","formControlName","amount","placeholder","Montant \xE0 transf\xE9rer",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","alert alert-success mt-2",4,"ngIf"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"alert","alert-success","mt-2"],[1,"alert","alert-danger","mt-2"]],template:function(e,t){e&1&&(i(0,"h2",0),a(1,"Effectuer un virement"),n(),i(2,"form",1),_("ngSubmit",function(){return t.effectuerVirement()}),i(3,"div",2)(4,"label",3),a(5,"Compte source (ID)"),n(),h(6,"input",4),n(),i(7,"div",2)(8,"label",5),a(9,"RIB du destinataire"),n(),h(10,"input",6),n(),i(11,"div",2)(12,"label",7),a(13,"Montant"),n(),h(14,"input",8),n(),i(15,"button",9),a(16," Valider "),n(),S(17,Et,2,1,"div",10)(18,Pt,2,1,"div",11),n()),e&2&&(s(2),m("formGroup",t.virementForm),s(13),m("disabled",t.virementForm.invalid),s(2),m("ngIf",t.successMessage),s(),m("ngIf",t.errorMessage))},dependencies:[z,q,E,U,P,B,ye,we,O],styles:[".virement-form[_ngcontent-%COMP%]{max-width:450px;margin:30px auto;padding:30px;border:1px solid #e2e8f0;border-radius:16px;background-color:#fff;box-shadow:0 10px 25px #0000000f;font-family:Segoe UI,sans-serif}.page-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;font-weight:700;margin-bottom:30px;color:#1e3a8a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:600;color:#334155;display:block;margin-bottom:6px}input.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:1px solid #cbd5e1;border-radius:10px;background-color:#f9fafb;transition:border-color .3s ease}input.form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:none;box-shadow:0 0 0 3px #3b82f640}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:700;background-color:#2563eb;color:#fff;border:none;border-radius:10px;cursor:pointer;transition:background-color .25s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1e40af}button[disabled][_ngcontent-%COMP%]{background-color:#94a3b8;cursor:not-allowed}.alert[_ngcontent-%COMP%]{margin-top:16px;padding:10px;border-radius:8px;font-size:15px;text-align:center}.alert-success[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.alert-danger[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}"]})};var Ve=class r{constructor(o){this.http=o}baseUrl=`${ee.apiUrl}/employee`;getAuthHeaders(){let o=localStorage.getItem("token")||"";return new K({"Content-Type":"application/json",Authorization:`Bearer ${o}`})}deposit(o,e){let t=`${this.baseUrl}/operations/deposit`,l={accountId:o,amount:e};return this.http.post(t,l,{headers:this.getAuthHeaders(),responseType:"text"})}withdraw(o,e){let t=`${this.baseUrl}/operations/withdraw`,l={accountId:o,amount:e};return this.http.post(t,l,{headers:this.getAuthHeaders(),responseType:"text"})}static \u0275fac=function(e){return new(e||r)(J(Z))};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};function kt(r,o){if(r&1&&(i(0,"div",12),a(1),n()),r&2){let e=p();s(),x(e.message)}}function Tt(r,o){if(r&1&&(i(0,"div",13),a(1),n()),r&2){let e=p();s(),x(e.error)}}var Ae=class r{constructor(o,e,t){this.opService=o;this.router=e;this.toastr=t}amount=0;accountId="";message="";error="";deposit(){if(!this.accountId||this.amount<=0){this.error="Veuillez saisir un ID de compte valide et un montant positif",this.message="";return}this.opService.deposit(this.accountId,this.amount).subscribe({next:()=>{this.message="\u{1F4B0} D\xE9p\xF4t effectu\xE9 avec succ\xE8s",this.error="",this.toastr.success("D\xE9p\xF4t effectu\xE9 avec succ\xE8s"),this.router.navigate(["/employee/clients"])},error:o=>{this.error=o.error||"Erreur lors du d\xE9p\xF4t",this.message="",this.toastr.error(this.error)}})}withdraw(){if(!this.accountId||this.amount<=0){this.error="Veuillez saisir un ID de compte valide et un montant positif",this.message="";return}this.opService.withdraw(this.accountId,this.amount).subscribe({next:()=>{this.message="\u{1F3E7} Retrait effectu\xE9 avec succ\xE8s",this.error="",this.toastr.success("Retrait effectu\xE9 avec succ\xE8s"),this.router.navigate(["/employee/clients"])},error:o=>{this.error=o.error||"Erreur lors du retrait",this.message="",this.toastr.error(this.error)}})}onSubmit(){this.amount>0?this.deposit():this.amount<0?this.withdraw():(this.error="Veuillez entrer un montant diff\xE9rent de z\xE9ro.",this.message="")}static \u0275fac=function(e){return new(e||r)(f(Ve),f(D),f(L))};static \u0275cmp=M({type:r,selectors:[["app-operation"]],decls:18,vars:6,consts:[[1,"page-title"],[1,"operation-form",3,"ngSubmit"],[1,"form-group"],["for","accountId"],["id","accountId","type","text","name","accountId","placeholder","UUID du compte","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","amount"],["id","amount","type","number","name","amount","placeholder","Montant (positif pour d\xE9p\xF4t, n\xE9gatif pour retrait)","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"button-group"],["type","button",1,"btn","btn-success",3,"click","disabled"],["type","button",1,"btn","btn-warning",3,"click","disabled"],["class","alert alert-success mt-2",4,"ngIf"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"alert","alert-success","mt-2"],[1,"alert","alert-danger","mt-2"]],template:function(e,t){e&1&&(i(0,"h2",0),a(1,"Effectuer une op\xE9ration"),n(),i(2,"form",1),_("ngSubmit",function(){return t.onSubmit()}),i(3,"div",2)(4,"label",3),a(5,"ID du compte"),n(),i(6,"input",4),v("ngModelChange",function(c){return b(t.accountId,c)||(t.accountId=c),c}),n()(),i(7,"div",2)(8,"label",5),a(9,"Montant"),n(),i(10,"input",6),v("ngModelChange",function(c){return b(t.amount,c)||(t.amount=c),c}),n()(),i(11,"div",7)(12,"button",8),_("click",function(){return t.deposit()}),a(13," \u{1F4B0} D\xE9p\xF4t "),n(),i(14,"button",9),_("click",function(){return t.withdraw()}),a(15," \u{1F3E7} Retrait "),n()(),S(16,kt,2,1,"div",10)(17,Tt,2,1,"div",11),n()),e&2&&(s(6),C("ngModel",t.accountId),s(4),C("ngModel",t.amount),s(2),m("disabled",!t.accountId||t.amount<=0),s(2),m("disabled",!t.accountId||t.amount<=0),s(2),m("ngIf",t.message),s(),m("ngIf",t.error))},dependencies:[N,q,E,U,P,B,ne,V,te,z,y,O],styles:[".operation-form[_ngcontent-%COMP%]{max-width:450px;margin:30px auto;padding:25px;border:1px solid #e2e8f0;border-radius:16px;background-color:#fff;box-shadow:0 8px 24px #0000000f;font-family:Segoe UI,sans-serif}.page-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;margin-bottom:25px;font-weight:600;color:#1e3a8a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600;color:#334155}input.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:1px solid #cbd5e1;border-radius:10px;background-color:#f8fafc;transition:border-color .3s ease}input.form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:none;box-shadow:0 0 0 3px #3b82f633}button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:700;border:none;border-radius:10px;cursor:pointer;margin-bottom:12px;transition:background-color .3s ease;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#10b981}.btn-success[_ngcontent-%COMP%]:hover{background-color:#059669}.btn-warning[_ngcontent-%COMP%]{background-color:#3b82f6}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#2563eb}.alert-success[_ngcontent-%COMP%], .alert-danger[_ngcontent-%COMP%]{text-align:center;margin-top:15px;font-size:15px;padding:10px;border-radius:8px}.alert-success[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.alert-danger[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}"]})};var ue=class r{constructor(o,e,t,l,c){this.fb=o;this.route=e;this.clientService=t;this.toastr=l;this.router=c}accountForm;clientId;ngOnInit(){this.clientId=Number(this.route.snapshot.paramMap.get("id")),this.accountForm=this.fb.group({type:["courant",j.required],balance:[0,[j.required,j.min(.01)]]})}submit(o){if(o&&o.preventDefault(),this.accountForm.invalid)return;let e=Be({clientId:this.clientId},this.accountForm.value);this.clientService.addAccount(e).subscribe({next:t=>{this.toastr.success("\u2705 Compte ajout\xE9 avec succ\xE8s"),this.router.navigate(["/employee/clients",this.clientId])},error:t=>{console.error(t),this.toastr.error(t.error?.message||"Erreur lors de la cr\xE9ation du compte")}})}static \u0275fac=function(e){return new(e||r)(f(Ie),f(F),f(R),f(L),f(D))};static \u0275cmp=M({type:r,selectors:[["app-add-account"]],decls:18,vars:2,consts:[[1,"add-account-container"],[1,"account-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","type"],["id","type","formControlName","type"],["value","courant"],["value","epargne"],["for","balance"],["type","number","id","balance","formControlName","balance"],["type","submit",1,"btn-submit",3,"disabled"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"h2"),a(2,"\u{1F3E6} Ajouter un Nouveau Compte"),n(),i(3,"form",1),_("ngSubmit",function(){return t.submit()}),i(4,"div",2)(5,"label",3),a(6,"Type de compte"),n(),i(7,"select",4)(8,"option",5),a(9,"Compte courant"),n(),i(10,"option",6),a(11,"Compte \xE9pargne"),n()()(),i(12,"div",2)(13,"label",7),a(14,"Solde initial"),n(),h(15,"input",8),n(),i(16,"button",9),a(17,"Cr\xE9er le compte"),n()()()),e&2&&(s(3),m("formGroup",t.accountForm),s(13),m("disabled",t.accountForm.invalid))},dependencies:[z,q,Ee,Pe,E,U,Oe,P,B,ye,we],styles:[".add-account-container[_ngcontent-%COMP%]{max-width:760px;margin:3rem auto;padding:2.5rem;background-color:#fff;border-radius:16px;box-shadow:0 12px 24px #0000000f;font-family:Segoe UI,sans-serif}.add-account-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#1e3a8a;font-size:28px;margin-bottom:2rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.account-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem 2rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.4rem;color:#1e293b}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #cbd5e1;border-radius:8px;background-color:#f9fafb;transition:border-color .3s,box-shadow .3s}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f640}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.btn-submit[_ngcontent-%COMP%]{grid-column:span 2;padding:.9rem;background-color:#2563eb;color:#fff;font-weight:700;font-size:1rem;border:none;border-radius:10px;cursor:pointer;transition:background-color .2s ease}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#1d4ed8}.alert[_ngcontent-%COMP%]{text-align:center;padding:.9rem;border-radius:8px;margin-bottom:1.5rem;font-weight:500}.alert.error[_ngcontent-%COMP%]{background-color:#fee2e2;color:#b91c1c}.alert.success[_ngcontent-%COMP%]{background-color:#dcfce7;color:#15803d}@media (max-width: 600px){.full-width[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{grid-column:span 1}}"]})};var Dt=[{path:"",component:ae,children:[{path:"",component:se},{path:"clients",component:Le},{path:"clients/create",component:ce},{path:"clients/:id",component:le},{path:"clients/:id/edit",component:de},{path:"clients/:id/delete",component:me},{path:"clients/:id/status",component:pe},{path:"clients/:id/add-account",component:ue},{path:"transactions",component:Ne,children:[{path:"virement",component:re},{path:"operation",component:Ae}]}]}],Fe=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=be({type:r});static \u0275inj=Ce({imports:[T.forChild(Dt),T]})};var Ye=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=be({type:r});static \u0275inj=Ce({imports:[y,N,z,T,Fe,Me,re]})};export{Ye as BanqueModule};
