import{a as Ti,b as dt,c as At,d as kt,e as Me,f as qi,g as zi,h as Wi,i as Ui,j as ji,k as Hi,m as $i,n as Qi,o as Ki,p as Gi}from"./chunk-AZH6KGKE.js";import{a as I,b as ue,c as Ei,d as yn,e as Le,f as Ot,g as ct,i as Pi}from"./chunk-3EKQ5VQE.js";import{$ as ai,$b as Ii,A as R,Aa as xt,Ab as oe,B as ae,Ba as L,Bb as Ee,C as ot,Cb as ve,D as ii,Db as Ci,E as Z,Ea as w,Eb as Mi,F as Oe,Fa as g,Ga as mi,Ha as bn,Hb as wi,Ia as ui,Ib as xi,J as _,Ja as St,Jb as Ie,K as b,Ka as Qe,L as _n,La as Ke,M as ri,Mb as Si,Oa as Ae,Ob as Ce,Pa as m,Q as oi,Qa as N,Qb as De,R as Ct,Ra as W,Rb as mt,Sa as ke,Ta as pi,Tb as Re,Ua as T,Ub as Ye,V as Mt,Va as O,Vb as It,W as st,Wa as A,Wb as Xe,Xb as Je,Y as si,Yb as Oi,Zb as Ai,_b as ki,a as $e,aa as li,ab as ce,ac as Di,ba as d,bb as Et,bc as Ri,c as ti,cb as Se,cc as Ni,da as ci,dc as Vi,ec as Dt,fa as j,fb as gi,fc as Bi,g as vt,gc as Rt,ha as ee,hc as Fi,i as _e,ia as at,ic as Ze,j as re,ja as di,jb as Pt,jc as Li,k as fn,la as E,na as le,nb as Tt,oa as f,p as V,pa as wt,pb as Ge,qa as B,qb as be,ra as xe,rb as hi,tb as fi,ub as _i,va as s,vb as bi,wa as a,wb as ye,x as ni,xa as F,xb as lt,yb as yi,z as U,zb as vi}from"./chunk-OMX5D2LD.js";function Yi(r){return new R(3e3,!1)}function eo(){return new R(3100,!1)}function to(){return new R(3101,!1)}function no(r){return new R(3001,!1)}function io(r){return new R(3003,!1)}function ro(r){return new R(3004,!1)}function Ji(r,t){return new R(3005,!1)}function Zi(){return new R(3006,!1)}function er(){return new R(3007,!1)}function tr(r,t){return new R(3008,!1)}function nr(r){return new R(3002,!1)}function ir(r,t,e,n,i){return new R(3010,!1)}function rr(){return new R(3011,!1)}function or(){return new R(3012,!1)}function sr(){return new R(3200,!1)}function ar(){return new R(3202,!1)}function lr(){return new R(3013,!1)}function cr(r){return new R(3014,!1)}function dr(r){return new R(3015,!1)}function mr(r){return new R(3016,!1)}function ur(r,t){return new R(3404,!1)}function oo(r){return new R(3502,!1)}function pr(r){return new R(3503,!1)}function gr(){return new R(3300,!1)}function hr(r){return new R(3504,!1)}function fr(r){return new R(3301,!1)}function _r(r,t){return new R(3302,!1)}function br(r){return new R(3303,!1)}function yr(r,t){return new R(3400,!1)}function vr(r){return new R(3401,!1)}function Cr(r){return new R(3402,!1)}function Mr(r,t){return new R(3505,!1)}function Pe(r){switch(r.length){case 0:return new Le;case 1:return r[0];default:return new Ot(r)}}function wn(r,t,e=new Map,n=new Map){let i=[],o=[],l=-1,c=null;if(t.forEach(u=>{let p=u.get("offset"),y=p==l,h=y&&c||new Map;u.forEach((k,P)=>{let C=P,S=k;if(P!=="offset")switch(C=r.normalizePropertyName(C,i),S){case ct:S=e.get(P);break;case ue:S=n.get(P);break;default:S=r.normalizeStyleValue(P,C,S,i);break}h.set(C,S)}),y||o.push(h),c=h,l=p}),i.length)throw oo(i);return o}function Nt(r,t,e,n){switch(t){case"start":r.onStart(()=>n(e&&vn(e,"start",r)));break;case"done":r.onDone(()=>n(e&&vn(e,"done",r)));break;case"destroy":r.onDestroy(()=>n(e&&vn(e,"destroy",r)));break}}function vn(r,t,e){let n=e.totalTime,i=!!e.disabled,o=Vt(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,n??r.totalTime,i),l=r._data;return l!=null&&(o._data=l),o}function Vt(r,t,e,n,i="",o=0,l){return{element:r,triggerName:t,fromState:e,toState:n,phaseName:i,totalTime:o,disabled:!!l}}function te(r,t,e){let n=r.get(t);return n||r.set(t,n=e),n}function xn(r){let t=r.indexOf(":"),e=r.substring(1,t),n=r.slice(t+1);return[e,n]}var so=typeof document>"u"?null:document.documentElement;function Bt(r){let t=r.parentNode||r.host||null;return t===so?null:t}function ao(r){return r.substring(1,6)=="ebkit"}var qe=null,Xi=!1;function wr(r){qe||(qe=lo()||{},Xi=qe.style?"WebkitAppearance"in qe.style:!1);let t=!0;return qe.style&&!ao(r)&&(t=r in qe.style,!t&&Xi&&(t="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in qe.style)),t}function lo(){return typeof document<"u"?document.body:null}function Sn(r,t){for(;t;){if(t===r)return!0;t=Bt(t)}return!1}function En(r,t,e){if(e)return Array.from(r.querySelectorAll(t));let n=r.querySelector(t);return n?[n]:[]}var co=1e3,Pn="{{",mo="}}",Tn="ng-enter",Ft="ng-leave",ut="ng-trigger",pt=".ng-trigger",On="ng-animating",Lt=".ng-animating";function we(r){if(typeof r=="number")return r;let t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Cn(parseFloat(t[1]),t[2])}function Cn(r,t){switch(t){case"s":return r*co;default:return r}}function gt(r,t,e){return r.hasOwnProperty("duration")?r:uo(r,t,e)}function uo(r,t,e){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,l="";if(typeof r=="string"){let c=r.match(n);if(c===null)return t.push(Yi(r)),{duration:0,delay:0,easing:""};i=Cn(parseFloat(c[1]),c[2]);let u=c[3];u!=null&&(o=Cn(parseFloat(u),c[4]));let p=c[5];p&&(l=p)}else i=r;if(!e){let c=!1,u=t.length;i<0&&(t.push(eo()),c=!0),o<0&&(t.push(to()),c=!0),c&&t.splice(u,0,Yi(r))}return{duration:i,delay:o,easing:l}}function xr(r){return r.length?r[0]instanceof Map?r:r.map(t=>new Map(Object.entries(t))):[]}function pe(r,t,e){t.forEach((n,i)=>{let o=qt(i);e&&!e.has(i)&&e.set(i,r.style[o]),r.style[o]=n})}function Ne(r,t){t.forEach((e,n)=>{let i=qt(n);r.style[i]=""})}function et(r){return Array.isArray(r)?r.length==1?r[0]:Ei(r):r}function Sr(r,t,e){let n=t.params||{},i=An(r);i.length&&i.forEach(o=>{n.hasOwnProperty(o)||e.push(no(o))})}var Mn=new RegExp(`${Pn}\\s*(.+?)\\s*${mo}`,"g");function An(r){let t=[];if(typeof r=="string"){let e;for(;e=Mn.exec(r);)t.push(e[1]);Mn.lastIndex=0}return t}function tt(r,t,e){let n=`${r}`,i=n.replace(Mn,(o,l)=>{let c=t[l];return c==null&&(e.push(io(l)),c=""),c.toString()});return i==n?r:i}var po=/-+([a-z0-9])/g;function qt(r){return r.replace(po,(...t)=>t[1].toUpperCase())}function Er(r,t){return r===0||t===0}function Pr(r,t,e){if(e.size&&t.length){let n=t[0],i=[];if(e.forEach((o,l)=>{n.has(l)||i.push(l),n.set(l,o)}),i.length)for(let o=1;o<t.length;o++){let l=t[o];i.forEach(c=>l.set(c,zt(r,c)))}}return t}function ne(r,t,e){switch(t.type){case I.Trigger:return r.visitTrigger(t,e);case I.State:return r.visitState(t,e);case I.Transition:return r.visitTransition(t,e);case I.Sequence:return r.visitSequence(t,e);case I.Group:return r.visitGroup(t,e);case I.Animate:return r.visitAnimate(t,e);case I.Keyframes:return r.visitKeyframes(t,e);case I.Style:return r.visitStyle(t,e);case I.Reference:return r.visitReference(t,e);case I.AnimateChild:return r.visitAnimateChild(t,e);case I.AnimateRef:return r.visitAnimateRef(t,e);case I.Query:return r.visitQuery(t,e);case I.Stagger:return r.visitStagger(t,e);default:throw ro(t.type)}}function zt(r,t){return window.getComputedStyle(r)[t]}var Qn=(()=>{class r{validateStyleProperty(e){return wr(e)}containsElement(e,n){return Sn(e,n)}getParentElement(e){return Bt(e)}query(e,n,i){return En(e,n,i)}computeStyle(e,n,i){return i||""}animate(e,n,i,o,l,c=[],u){return new Le(i,o)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=ae({token:r,factory:r.\u0275fac})}return r})(),We=class{static NOOP=new Qn},Ue=class{};var go=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),$t=class extends Ue{normalizePropertyName(t,e){return qt(t)}normalizeStyleValue(t,e,n,i){let o="",l=n.toString().trim();if(go.has(e)&&n!==0&&n!=="0")if(typeof n=="number")o="px";else{let c=n.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&c[1].length==0&&i.push(Ji(t,n))}return l+o}};var Qt="*";function ho(r,t){let e=[];return typeof r=="string"?r.split(/\s*,\s*/).forEach(n=>fo(n,e,t)):e.push(r),e}function fo(r,t,e){if(r[0]==":"){let u=_o(r,e);if(typeof u=="function"){t.push(u);return}r=u}let n=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return e.push(dr(r)),t;let i=n[1],o=n[2],l=n[3];t.push(Tr(i,l));let c=i==Qt&&l==Qt;o[0]=="<"&&!c&&t.push(Tr(l,i))}function _o(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(mr(r)),"* => *"}}var Wt=new Set(["true","1"]),Ut=new Set(["false","0"]);function Tr(r,t){let e=Wt.has(r)||Ut.has(r),n=Wt.has(t)||Ut.has(t);return(i,o)=>{let l=r==Qt||r==i,c=t==Qt||t==o;return!l&&e&&typeof i=="boolean"&&(l=i?Wt.has(r):Ut.has(r)),!c&&n&&typeof o=="boolean"&&(c=o?Wt.has(t):Ut.has(t)),l&&c}}var Fr=":self",bo=new RegExp(`s*${Fr}s*,?`,"g");function Lr(r,t,e,n){return new Vn(r).build(t,e,n)}var Or="",Vn=class{_driver;constructor(t){this._driver=t}build(t,e,n){let i=new Bn(e);return this._resetContextStyleTimingState(i),ne(this,et(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=Or,t.collectedStyles=new Map,t.collectedStyles.set(Or,new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0,o=[],l=[];return t.name.charAt(0)=="@"&&e.errors.push(Zi()),t.definitions.forEach(c=>{if(this._resetContextStyleTimingState(e),c.type==I.State){let u=c,p=u.name;p.toString().split(/\s*,\s*/).forEach(y=>{u.name=y,o.push(this.visitState(u,e))}),u.name=p}else if(c.type==I.Transition){let u=this.visitTransition(c,e);n+=u.queryCount,i+=u.depCount,l.push(u)}else e.errors.push(er())}),{type:I.Trigger,name:t.name,states:o,transitions:l,queryCount:n,depCount:i,options:null}}visitState(t,e){let n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){let o=new Set,l=i||{};n.styles.forEach(c=>{c instanceof Map&&c.forEach(u=>{An(u).forEach(p=>{l.hasOwnProperty(p)||o.add(p)})})}),o.size&&e.errors.push(tr(t.name,[...o.values()]))}return{type:I.State,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let n=ne(this,et(t.animation),e),i=ho(t.expr,e.errors);return{type:I.Transition,matchers:i,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ze(t.options)}}visitSequence(t,e){return{type:I.Sequence,steps:t.steps.map(n=>ne(this,n,e)),options:ze(t.options)}}visitGroup(t,e){let n=e.currentTime,i=0,o=t.steps.map(l=>{e.currentTime=n;let c=ne(this,l,e);return i=Math.max(i,e.currentTime),c});return e.currentTime=i,{type:I.Group,steps:o,options:ze(t.options)}}visitAnimate(t,e){let n=Mo(t.timings,e.errors);e.currentAnimateTimings=n;let i,o=t.styles?t.styles:yn({});if(o.type==I.Keyframes)i=this.visitKeyframes(o,e);else{let l=t.styles,c=!1;if(!l){c=!0;let p={};n.easing&&(p.easing=n.easing),l=yn(p)}e.currentTime+=n.duration+n.delay;let u=this.visitStyle(l,e);u.isEmptyStep=c,i=u}return e.currentAnimateTimings=null,{type:I.Animate,timings:n,style:i,options:null}}visitStyle(t,e){let n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){let n=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let c of i)typeof c=="string"?c===ue?n.push(c):e.errors.push(nr(c)):n.push(new Map(Object.entries(c)));let o=!1,l=null;return n.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(l=c.get("easing"),c.delete("easing")),!o)){for(let u of c.values())if(u.toString().indexOf(Pn)>=0){o=!0;break}}}),{type:I.Style,styles:n,easing:l,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let n=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;n&&o>0&&(o-=n.duration+n.delay),t.styles.forEach(l=>{typeof l!="string"&&l.forEach((c,u)=>{let p=e.collectedStyles.get(e.currentQuerySelector),y=p.get(u),h=!0;y&&(o!=i&&o>=y.startTime&&i<=y.endTime&&(e.errors.push(ir(u,y.startTime,y.endTime,o,i)),h=!1),o=y.startTime),h&&p.set(u,{startTime:o,endTime:i}),e.options&&Sr(c,e.options,e.errors)})})}visitKeyframes(t,e){let n={type:I.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(rr()),n;let i=1,o=0,l=[],c=!1,u=!1,p=0,y=t.steps.map(H=>{let $=this._makeStyleAst(H,e),Y=$.offset!=null?$.offset:Co($.styles),K=0;return Y!=null&&(o++,K=$.offset=Y),u=u||K<0||K>1,c=c||K<p,p=K,l.push(K),$});u&&e.errors.push(or()),c&&e.errors.push(sr());let h=t.steps.length,k=0;o>0&&o<h?e.errors.push(ar()):o==0&&(k=i/(h-1));let P=h-1,C=e.currentTime,S=e.currentAnimateTimings,q=S.duration;return y.forEach((H,$)=>{let Y=k>0?$==P?1:k*$:l[$],K=Y*q;e.currentTime=C+S.delay+K,S.duration=K,this._validateStyleAst(H,e),H.offset=Y,n.styles.push(H)}),n}visitReference(t,e){return{type:I.Reference,animation:ne(this,et(t.animation),e),options:ze(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:I.AnimateChild,options:ze(t.options)}}visitAnimateRef(t,e){return{type:I.AnimateRef,animation:this.visitReference(t.animation,e),options:ze(t.options)}}visitQuery(t,e){let n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[o,l]=yo(t.selector);e.currentQuerySelector=n.length?n+" "+o:o,te(e.collectedStyles,e.currentQuerySelector,new Map);let c=ne(this,et(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:I.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:c,originalSelector:t.selector,options:ze(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(lr());let n=t.timings==="full"?{duration:0,delay:0,easing:"full"}:gt(t.timings,e.errors,!0);return{type:I.Stagger,animation:ne(this,et(t.animation),e),timings:n,options:null}}};function yo(r){let t=!!r.split(/\s*,\s*/).find(e=>e==Fr);return t&&(r=r.replace(bo,"")),r=r.replace(/@\*/g,pt).replace(/@\w+/g,e=>pt+"-"+e.slice(1)).replace(/:animating/g,Lt),[r,t]}function vo(r){return r?$e({},r):null}var Bn=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function Co(r){if(typeof r=="string")return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){let n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(r instanceof Map&&r.has("offset")){let e=r;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Mo(r,t){if(r.hasOwnProperty("duration"))return r;if(typeof r=="number"){let o=gt(r,t).duration;return kn(o,0,"")}let e=r;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=kn(0,0,"");return o.dynamic=!0,o.strValue=e,o}let i=gt(e,t);return kn(i.duration,i.delay,i.easing)}function ze(r){return r?(r=$e({},r),r.params&&(r.params=vo(r.params))):r={},r}function kn(r,t,e){return{duration:r,delay:t,easing:e}}function Kn(r,t,e,n,i,o,l=null,c=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:n,duration:i,delay:o,totalTime:i+o,easing:l,subTimeline:c}}var ft=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},wo=1,xo=":enter",So=new RegExp(xo,"g"),Eo=":leave",Po=new RegExp(Eo,"g");function qr(r,t,e,n,i,o=new Map,l=new Map,c,u,p=[]){return new Fn().buildKeyframes(r,t,e,n,i,o,l,c,u,p)}var Fn=class{buildKeyframes(t,e,n,i,o,l,c,u,p,y=[]){p=p||new ft;let h=new Ln(t,e,p,i,o,y,[]);h.options=u;let k=u.delay?we(u.delay):0;h.currentTimeline.delayNextStep(k),h.currentTimeline.setStyles([l],null,h.errors,u),ne(this,n,h);let P=h.timelines.filter(C=>C.containsAnimation());if(P.length&&c.size){let C;for(let S=P.length-1;S>=0;S--){let q=P[S];if(q.element===e){C=q;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([c],null,h.errors,u)}return P.length?P.map(C=>C.buildKeyframes()):[Kn(e,[],[],[],0,k,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let n=e.subInstructions.get(e.element);if(n){let i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,l=this._visitSubInstructions(n,i,i.options);o!=l&&e.transformIntoNewTimeline(l)}e.previousNode=t}visitAnimateRef(t,e){let n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(let i of t){let o=i?.delay;if(o){let l=typeof o=="number"?o:we(tt(o,i?.params??{},e.errors));n.delayNextStep(l)}}}_visitSubInstructions(t,e,n){let o=e.currentTimeline.currentTime,l=n.duration!=null?we(n.duration):null,c=n.delay!=null?we(n.delay):null;return l!==0&&t.forEach(u=>{let p=e.appendInstructionToTimeline(u,l,c);o=Math.max(o,p.duration+p.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),ne(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let n=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==I.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Kt);let l=we(o.delay);i.delayNextStep(l)}t.steps.length&&(t.steps.forEach(l=>ne(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let n=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?we(t.options.delay):0;t.steps.forEach(l=>{let c=e.createSubContext(t.options);o&&c.delayNextStep(o),ne(this,l,c),i=Math.max(i,c.currentTimeline.currentTime),n.push(c.currentTimeline)}),n.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let n=t.strValue,i=e.params?tt(n,e.params,e.errors):n;return gt(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());let o=t.style;o.type==I.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(n.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.hasCurrentStyleProperties()&&n.forwardFrame();let o=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(o):n.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let n=e.currentAnimateTimings,i=e.currentTimeline.duration,o=n.duration,c=e.createSubContext().currentTimeline;c.easing=n.easing,t.styles.forEach(u=>{let p=u.offset||0;c.forwardTime(p*o),c.setStyles(u.styles,u.easing,e.errors,e.options),c.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(c),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){let n=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?we(i.delay):0;o&&(e.previousNode.type===I.Style||n==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Kt);let l=n,c=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=c.length;let u=null;c.forEach((p,y)=>{e.currentQueryIndex=y;let h=e.createSubContext(t.options,p);o&&h.delayNextStep(o),p===e.element&&(u=h.currentTimeline),ne(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe();let k=h.currentTimeline.currentTime;l=Math.max(l,k)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let n=e.parentContext,i=e.currentTimeline,o=t.timings,l=Math.abs(o.duration),c=l*(e.currentQueryTotal-1),u=l*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=c-u;break;case"full":u=n.currentStaggerTime;break}let y=e.currentTimeline;u&&y.delayNextStep(u);let h=y.currentTime;ne(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-h+(i.startTime-n.currentTimeline.startTime)}},Kt={},Ln=class r{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Kt;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,n,i,o,l,c,u){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=o,this.errors=l,this.timelines=c,this.currentTimeline=u||new Gt(this._driver,e,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let n=t,i=this.options;n.duration!=null&&(i.duration=we(n.duration)),n.delay!=null&&(i.delay=we(n.delay));let o=n.params;if(o){let l=i.params;l||(l=this.options.params={}),Object.keys(o).forEach(c=>{(!e||!l.hasOwnProperty(c))&&(l[c]=tt(o[c],l,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let n=t.params={};Object.keys(e).forEach(i=>{n[i]=e[i]})}}return t}createSubContext(t=null,e,n){let i=e||this.element,o=new r(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Kt,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){let i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},o=new qn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,o,l){let c=[];if(i&&c.push(this.element),t.length>0){t=t.replace(So,"."+this._enterClassName),t=t.replace(Po,"."+this._leaveClassName);let u=n!=1,p=this._driver.query(this.element,t,u);n!==0&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),c.push(...p)}return!o&&c.length==0&&l.push(cr(e)),c}},Gt=class r{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new r(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=wo,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||ue),this._currentKeyframe.set(e,ue);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&this._previousKeyframe.set("easing",e);let o=i&&i.params||{},l=To(t,this._globalTimelineStyles);for(let[c,u]of l){let p=tt(u,o,n);this._pendingStyles.set(c,p),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??ue),this._updateStyle(c,p)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{let i=this._styleSummary.get(n);(!i||e.time>i.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,n=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((c,u)=>{let p=new Map([...this._backFill,...c]);p.forEach((y,h)=>{y===ct?t.add(h):y===ue&&e.add(h)}),n||p.set("offset",u/this.duration),i.push(p)});let o=[...t.values()],l=[...e.values()];if(n){let c=i[0],u=new Map(c);c.set("offset",0),u.set("offset",1),i=[c,u]}return Kn(this.element,i,o,l,this.duration,this.startTime,this.easing,!1)}},qn=class extends Gt{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,n,i,o,l,c=!1){super(t,e,l.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=c,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],l=n+e,c=e/l,u=new Map(t[0]);u.set("offset",0),o.push(u);let p=new Map(t[0]);p.set("offset",Ar(c)),o.push(p);let y=t.length-1;for(let h=1;h<=y;h++){let k=new Map(t[h]),P=k.get("offset"),C=e+P*n;k.set("offset",Ar(C/l)),o.push(k)}n=l,e=0,i="",t=o}return Kn(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}};function Ar(r,t=3){let e=Math.pow(10,t-1);return Math.round(r*e)/e}function To(r,t){let e=new Map,n;return r.forEach(i=>{if(i==="*"){n??=t.keys();for(let o of n)e.set(o,ue)}else for(let[o,l]of i)e.set(o,l)}),e}function kr(r,t,e,n,i,o,l,c,u,p,y,h,k){return{type:0,element:r,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:n,toStyles:l,timelines:c,queriedElements:u,preStyleProps:p,postStyleProps:y,totalTime:h,errors:k}}var In={},Yt=class{_triggerName;ast;_stateStyles;constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return Oo(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,n):new Map}build(t,e,n,i,o,l,c,u,p,y){let h=[],k=this.ast.options&&this.ast.options.params||In,P=c&&c.params||In,C=this.buildStyles(n,P,h),S=u&&u.params||In,q=this.buildStyles(i,S,h),H=new Set,$=new Map,Y=new Map,K=i==="void",je={params:zr(S,k),delay:this.ast.options?.delay},he=y?[]:qr(t,e,this.ast.animation,o,l,C,q,je,p,h),X=0;return he.forEach(J=>{X=Math.max(J.duration+J.delay,X)}),h.length?kr(e,this._triggerName,n,i,K,C,q,[],[],$,Y,X,h):(he.forEach(J=>{let Ve=J.element,He=te($,Ve,new Set);J.preStyleProps.forEach(Be=>He.add(Be));let Xn=te(Y,Ve,new Set);J.postStyleProps.forEach(Be=>Xn.add(Be)),Ve!==e&&H.add(Ve)}),kr(e,this._triggerName,n,i,K,C,q,he,[...H.values()],$,Y,X))}};function Oo(r,t,e,n,i){return r.some(o=>o(t,e,n,i))}function zr(r,t){let e=$e({},t);return Object.entries(r).forEach(([n,i])=>{i!=null&&(e[n]=i)}),e}var zn=class{styles;defaultParams;normalizer;constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){let n=new Map,i=zr(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((l,c)=>{l&&(l=tt(l,i,e));let u=this.normalizer.normalizePropertyName(c,e);l=this.normalizer.normalizeStyleValue(c,u,l,e),n.set(c,l)})}),n}};function Ao(r,t,e){return new Wn(r,t,e)}var Wn=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,e.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new zn(i.style,o,n))}),Ir(this.states,"true","1"),Ir(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new Yt(t,i,this.states))}),this.fallbackTransition=ko(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(l=>l.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}};function ko(r,t,e){let n=[(l,c)=>!0],i={type:I.Sequence,steps:[],options:null},o={type:I.Transition,animation:i,matchers:n,options:null,queryCount:0,depCount:0};return new Yt(r,o,t)}function Ir(r,t,e){r.has(t)?r.has(e)||r.set(e,r.get(t)):r.has(e)&&r.set(t,r.get(e))}var Io=new ft,Un=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n}register(t,e){let n=[],i=[],o=Lr(this._driver,e,n,i);if(n.length)throw pr(n);this._animations.set(t,o)}_buildPlayer(t,e,n){let i=t.element,o=wn(this._normalizer,t.keyframes,e,n);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){let i=[],o=this._animations.get(t),l,c=new Map;if(o?(l=qr(this._driver,e,o,Tn,Ft,new Map,new Map,n,Io,i),l.forEach(y=>{let h=te(c,y.element,new Map);y.postStyleProps.forEach(k=>h.set(k,null))})):(i.push(gr()),l=[]),i.length)throw hr(i);c.forEach((y,h)=>{y.forEach((k,P)=>{y.set(P,this._driver.computeStyle(h,P,ue))})});let u=l.map(y=>{let h=c.get(y.element);return this._buildPlayer(y,new Map,h)}),p=Pe(u);return this._playersById.set(t,p),p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw fr(t);return e}listen(t,e,n,i){let o=Vt(e,"","","");return Nt(this._getPlayer(t),n,o,i),()=>{}}command(t,e,n,i){if(n=="register"){this.register(t,i[0]);return}if(n=="create"){let l=i[0]||{};this.create(t,e,l);return}let o=this._getPlayer(t);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},Dr="ng-animate-queued",Do=".ng-animate-queued",Dn="ng-animate-disabled",Ro=".ng-animate-disabled",No="ng-star-inserted",Vo=".ng-star-inserted",Bo=[],Wr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Fo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ge="__ng_removed",_t=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let n=t&&t.hasOwnProperty("value"),i=n?t.value:t;if(this.value=qo(i),n){let o=t,{value:l}=o,c=ti(o,["value"]);this.options=c}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let n=this.options.params;Object.keys(e).forEach(i=>{n[i]==null&&(n[i]=e[i])})}}},ht="void",Rn=new _t(ht),jn=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this._hostClassName="ng-tns-"+t,de(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.has(e))throw _r(n,e);if(n==null||n.length==0)throw br(e);if(!zo(n))throw yr(n,e);let o=te(this._elementListeners,t,[]),l={name:e,phase:n,callback:i};o.push(l);let c=te(this._engine.statesByElement,t,new Map);return c.has(e)||(de(t,ut),de(t,ut+"-"+e),c.set(e,Rn)),()=>{this._engine.afterFlush(()=>{let u=o.indexOf(l);u>=0&&o.splice(u,1),this._triggers.has(e)||c.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw vr(t);return e}trigger(t,e,n,i=!0){let o=this._getTrigger(e),l=new bt(this.id,e,t),c=this._engine.statesByElement.get(t);c||(de(t,ut),de(t,ut+"-"+e),this._engine.statesByElement.set(t,c=new Map));let u=c.get(e),p=new _t(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&p.absorbOptions(u.options),c.set(e,p),u||(u=Rn),!(p.value===ht)&&u.value===p.value){if(!jo(u.params,p.params)){let S=[],q=o.matchStyles(u.value,u.params,S),H=o.matchStyles(p.value,p.params,S);S.length?this._engine.reportError(S):this._engine.afterFlush(()=>{Ne(t,q),pe(t,H)})}return}let k=te(this._engine.playersByElement,t,[]);k.forEach(S=>{S.namespaceId==this.id&&S.triggerName==e&&S.queued&&S.destroy()});let P=o.matchTransition(u.value,p.value,t,p.params),C=!1;if(!P){if(!i)return;P=o.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:u,toState:p,player:l,isFallbackTransition:C}),C||(de(t,Dr),l.onStart(()=>{nt(t,Dr)})),l.onDone(()=>{let S=this.players.indexOf(l);S>=0&&this.players.splice(S,1);let q=this._engine.playersByElement.get(t);if(q){let H=q.indexOf(l);H>=0&&q.splice(H,1)}}),this.players.push(l),k.push(l),l}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let n=this._engine.driver.query(t,pt,!0);n.forEach(i=>{if(i[ge])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(l=>l.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,n,i){let o=this._engine.statesByElement.get(t),l=new Map;if(o){let c=[];if(o.forEach((u,p)=>{if(l.set(p,u.value),this._triggers.has(p)){let y=this.trigger(t,p,ht,i);y&&c.push(y)}}),c.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,l),n&&Pe(c).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){let i=new Set;e.forEach(o=>{let l=o.name;if(i.has(l))return;i.add(l);let u=this._triggers.get(l).fallbackTransition,p=n.get(l)||Rn,y=new _t(ht),h=new bt(this.id,l,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:l,transition:u,fromState:p,toState:y,player:h,isFallbackTransition:!0})})}}removeNode(t,e){let n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){let o=n.players.length?n.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let l=t;for(;l=l.parentNode;)if(n.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{let o=t[ge];(!o||o===Wr)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){de(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(n=>{let i=n.player;if(i.destroyed)return;let o=n.element,l=this._elementListeners.get(o);l&&l.forEach(c=>{if(c.name==n.triggerName){let u=Vt(o,n.triggerName,n.fromState.value,n.toState.value);u._data=t,Nt(n.player,c.phase,u,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((n,i)=>{let o=n.transition.ast.depCount,l=i.transition.ast.depCount;return o==0||l==0?o-l:this._engine.driver.containsElement(n.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Hn=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){let n=new jn(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){let n=this._namespaceList,i=this.namespacesByHostElement;if(n.length-1>=0){let l=!1,c=this.driver.getParentElement(e);for(;c;){let u=i.get(c);if(u){let p=n.indexOf(u);n.splice(p+1,0,t),l=!0;break}c=this.driver.getParentElement(c)}l||n.unshift(t)}else n.push(t);return i.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(t);this.namespacesByHostElement.delete(n.hostElement);let i=this._namespaceList.indexOf(n);i>=0&&this._namespaceList.splice(i,1),n.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,n=this.statesByElement.get(t);if(n){for(let i of n.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}}return e}trigger(t,e,n,i){if(jt(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!jt(e))return;let o=e[ge];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(t){let l=this._fetchNamespace(t);l&&l.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),de(t,Dn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),nt(t,Dn))}removeNode(t,e,n){if(jt(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(t,e,n,i,o){this.collectedLeaveElements.push(e),e[ge]={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,n,i,o){return jt(e)?this._fetchNamespace(t).listen(e,n,i,o):()=>{}}_buildInstruction(t,e,n,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,pt,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Lt,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Pe(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[ge];if(e&&e.setForRemoval){if(t[ge]=Wr,e.namespaceId){this.destroyInnerAnimations(t);let n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Dn)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Ro,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,i)=>this._balanceNamespaceList(n,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let i=this.collectedEnterElements[n];de(i,No)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{e=this._flushAnimations(n,t)}finally{for(let i=0;i<n.length;i++)n[i]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let i=this.collectedLeaveElements[n];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],e.length?Pe(e).onDone(()=>{n.forEach(i=>i())}):n.forEach(i=>i())}}reportError(t){throw Cr(t)}_flushAnimations(t,e){let n=new ft,i=[],o=new Map,l=[],c=new Map,u=new Map,p=new Map,y=new Set;this.disabledNodes.forEach(v=>{y.add(v);let M=this.driver.query(v,Do,!0);for(let x=0;x<M.length;x++)y.add(M[x])});let h=this.bodyNode,k=Array.from(this.statesByElement.keys()),P=Vr(k,this.collectedEnterElements),C=new Map,S=0;P.forEach((v,M)=>{let x=Tn+S++;C.set(M,x),v.forEach(D=>de(D,x))});let q=[],H=new Set,$=new Set;for(let v=0;v<this.collectedLeaveElements.length;v++){let M=this.collectedLeaveElements[v],x=M[ge];x&&x.setForRemoval&&(q.push(M),H.add(M),x.hasAnimation?this.driver.query(M,Vo,!0).forEach(D=>H.add(D)):$.add(M))}let Y=new Map,K=Vr(k,Array.from(H));K.forEach((v,M)=>{let x=Ft+S++;Y.set(M,x),v.forEach(D=>de(D,x))}),t.push(()=>{P.forEach((v,M)=>{let x=C.get(M);v.forEach(D=>nt(D,x))}),K.forEach((v,M)=>{let x=Y.get(M);v.forEach(D=>nt(D,x))}),q.forEach(v=>{this.processLeaveNode(v)})});let je=[],he=[];for(let v=this._namespaceList.length-1;v>=0;v--)this._namespaceList[v].drainQueuedTransitions(e).forEach(x=>{let D=x.player,Q=x.element;if(je.push(D),this.collectedEnterElements.length){let G=Q[ge];if(G&&G.setForMove){if(G.previousTriggersValues&&G.previousTriggersValues.has(x.triggerName)){let Fe=G.previousTriggersValues.get(x.triggerName),se=this.statesByElement.get(x.element);if(se&&se.has(x.triggerName)){let yt=se.get(x.triggerName);yt.value=Fe,se.set(x.triggerName,yt)}}D.destroy();return}}let fe=!h||!this.driver.containsElement(h,Q),ie=Y.get(Q),Te=C.get(Q),z=this._buildInstruction(x,n,Te,ie,fe);if(z.errors&&z.errors.length){he.push(z);return}if(fe){D.onStart(()=>Ne(Q,z.fromStyles)),D.onDestroy(()=>pe(Q,z.toStyles)),i.push(D);return}if(x.isFallbackTransition){D.onStart(()=>Ne(Q,z.fromStyles)),D.onDestroy(()=>pe(Q,z.toStyles)),i.push(D);return}let ei=[];z.timelines.forEach(G=>{G.stretchStartingKeyframe=!0,this.disabledNodes.has(G.element)||ei.push(G)}),z.timelines=ei,n.append(Q,z.timelines);let Zr={instruction:z,player:D,element:Q};l.push(Zr),z.queriedElements.forEach(G=>te(c,G,[]).push(D)),z.preStyleProps.forEach((G,Fe)=>{if(G.size){let se=u.get(Fe);se||u.set(Fe,se=new Set),G.forEach((yt,hn)=>se.add(hn))}}),z.postStyleProps.forEach((G,Fe)=>{let se=p.get(Fe);se||p.set(Fe,se=new Set),G.forEach((yt,hn)=>se.add(hn))})});if(he.length){let v=[];he.forEach(M=>{v.push(Mr(M.triggerName,M.errors))}),je.forEach(M=>M.destroy()),this.reportError(v)}let X=new Map,J=new Map;l.forEach(v=>{let M=v.element;n.has(M)&&(J.set(M,M),this._beforeAnimationBuild(v.player.namespaceId,v.instruction,X))}),i.forEach(v=>{let M=v.element;this._getPreviousPlayers(M,!1,v.namespaceId,v.triggerName,null).forEach(D=>{te(X,M,[]).push(D),D.destroy()})});let Ve=q.filter(v=>Br(v,u,p)),He=new Map;Nr(He,this.driver,$,p,ue).forEach(v=>{Br(v,u,p)&&Ve.push(v)});let Be=new Map;P.forEach((v,M)=>{Nr(Be,this.driver,new Set(v),u,ct)}),Ve.forEach(v=>{let M=He.get(v),x=Be.get(v);He.set(v,new Map([...M?.entries()??[],...x?.entries()??[]]))});let gn=[],Jn=[],Zn={};l.forEach(v=>{let{element:M,player:x,instruction:D}=v;if(n.has(M)){if(y.has(M)){x.onDestroy(()=>pe(M,D.toStyles)),x.disabled=!0,x.overrideTotalTime(D.totalTime),i.push(x);return}let Q=Zn;if(J.size>1){let ie=M,Te=[];for(;ie=ie.parentNode;){let z=J.get(ie);if(z){Q=z;break}Te.push(ie)}Te.forEach(z=>J.set(z,Q))}let fe=this._buildAnimation(x.namespaceId,D,X,o,Be,He);if(x.setRealPlayer(fe),Q===Zn)gn.push(x);else{let ie=this.playersByElement.get(Q);ie&&ie.length&&(x.parentPlayer=Pe(ie)),i.push(x)}}else Ne(M,D.fromStyles),x.onDestroy(()=>pe(M,D.toStyles)),Jn.push(x),y.has(M)&&i.push(x)}),Jn.forEach(v=>{let M=o.get(v.element);if(M&&M.length){let x=Pe(M);v.setRealPlayer(x)}}),i.forEach(v=>{v.parentPlayer?v.syncPlayerEvents(v.parentPlayer):v.destroy()});for(let v=0;v<q.length;v++){let M=q[v],x=M[ge];if(nt(M,Ft),x&&x.hasAnimation)continue;let D=[];if(c.size){let fe=c.get(M);fe&&fe.length&&D.push(...fe);let ie=this.driver.query(M,Lt,!0);for(let Te=0;Te<ie.length;Te++){let z=c.get(ie[Te]);z&&z.length&&D.push(...z)}}let Q=D.filter(fe=>!fe.destroyed);Q.length?Wo(this,M,Q):this.processLeaveNode(M)}return q.length=0,gn.forEach(v=>{this.players.push(v),v.onDone(()=>{v.destroy();let M=this.players.indexOf(v);this.players.splice(M,1)}),v.play()}),gn}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,o){let l=[];if(e){let c=this.playersByQueriedElement.get(t);c&&(l=c)}else{let c=this.playersByElement.get(t);if(c){let u=!o||o==ht;c.forEach(p=>{p.queued||!u&&p.triggerName!=i||l.push(p)})}}return(n||i)&&(l=l.filter(c=>!(n&&n!=c.namespaceId||i&&i!=c.triggerName))),l}_beforeAnimationBuild(t,e,n){let i=e.triggerName,o=e.element,l=e.isRemovalTransition?void 0:t,c=e.isRemovalTransition?void 0:i;for(let u of e.timelines){let p=u.element,y=p!==o,h=te(n,p,[]);this._getPreviousPlayers(p,y,l,c,e.toState).forEach(P=>{let C=P.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),P.destroy(),h.push(P)})}Ne(o,e.fromStyles)}_buildAnimation(t,e,n,i,o,l){let c=e.triggerName,u=e.element,p=[],y=new Set,h=new Set,k=e.timelines.map(C=>{let S=C.element;y.add(S);let q=S[ge];if(q&&q.removedBeforeQueried)return new Le(C.duration,C.delay);let H=S!==u,$=Uo((n.get(S)||Bo).map(X=>X.getRealPlayer())).filter(X=>{let J=X;return J.element?J.element===S:!1}),Y=o.get(S),K=l.get(S),je=wn(this._normalizer,C.keyframes,Y,K),he=this._buildPlayer(C,je,$);if(C.subTimeline&&i&&h.add(S),H){let X=new bt(t,c,S);X.setRealPlayer(he),p.push(X)}return he});p.forEach(C=>{te(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>Lo(this.playersByQueriedElement,C.element,C))}),y.forEach(C=>de(C,On));let P=Pe(k);return P.onDestroy(()=>{y.forEach(C=>nt(C,On)),pe(u,e.toStyles)}),h.forEach(C=>{te(i,C,[]).push(P)}),P}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Le(t.duration,t.delay)}},bt=class{namespaceId;triggerName;element;_player=new Le;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(i=>Nt(t,n,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){te(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Lo(r,t,e){let n=r.get(t);if(n){if(n.length){let i=n.indexOf(e);n.splice(i,1)}n.length==0&&r.delete(t)}return n}function qo(r){return r??null}function jt(r){return r&&r.nodeType===1}function zo(r){return r=="start"||r=="done"}function Rr(r,t){let e=r.style.display;return r.style.display=t??"none",e}function Nr(r,t,e,n,i){let o=[];e.forEach(u=>o.push(Rr(u)));let l=[];n.forEach((u,p)=>{let y=new Map;u.forEach(h=>{let k=t.computeStyle(p,h,i);y.set(h,k),(!k||k.length==0)&&(p[ge]=Fo,l.push(p))}),r.set(p,y)});let c=0;return e.forEach(u=>Rr(u,o[c++])),l}function Vr(r,t){let e=new Map;if(r.forEach(c=>e.set(c,[])),t.length==0)return e;let n=1,i=new Set(t),o=new Map;function l(c){if(!c)return n;let u=o.get(c);if(u)return u;let p=c.parentNode;return e.has(p)?u=p:i.has(p)?u=n:u=l(p),o.set(c,u),u}return t.forEach(c=>{let u=l(c);u!==n&&e.get(u).push(c)}),e}function de(r,t){r.classList?.add(t)}function nt(r,t){r.classList?.remove(t)}function Wo(r,t,e){Pe(e).onDone(()=>r.processLeaveNode(t))}function Uo(r){let t=[];return Ur(r,t),t}function Ur(r,t){for(let e=0;e<r.length;e++){let n=r[e];n instanceof Ot?Ur(n.players,t):t.push(n)}}function jo(r,t){let e=Object.keys(r),n=Object.keys(t);if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let o=e[i];if(!t.hasOwnProperty(o)||r[o]!==t[o])return!1}return!0}function Br(r,t,e){let n=e.get(r);if(!n)return!1;let i=t.get(r);return i?n.forEach(o=>i.add(o)):t.set(r,n),e.delete(r),!0}var it=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,n){this._driver=e,this._normalizer=n,this._transitionEngine=new Hn(t.body,e,n),this._timelineEngine=new Un(t.body,e,n),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,n,i,o){let l=t+"-"+i,c=this._triggerCache[l];if(!c){let u=[],p=[],y=Lr(this._driver,o,u,p);if(u.length)throw ur(i,u);c=Ao(i,y,this._normalizer),this._triggerCache[l]=c}this._transitionEngine.registerTrigger(e,i,c)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n){this._transitionEngine.removeNode(t,e,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if(n.charAt(0)=="@"){let[o,l]=xn(n),c=i;this._timelineEngine.command(o,e,l,c)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,o){if(n.charAt(0)=="@"){let[l,c]=xn(n);return this._timelineEngine.listen(l,e,c,o)}return this._transitionEngine.listen(t,e,n,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function Ho(r,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=Nn(t[0]),t.length>1&&(n=Nn(t[t.length-1]))):t instanceof Map&&(e=Nn(t)),e||n?new $o(r,e,n):null}var $o=(()=>{class r{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i;let o=r.initialStylesByElement.get(e);o||r.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&pe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pe(this._element,this._initialStyles),this._endStyles&&(pe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Ne(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ne(this._element,this._endStyles),this._endStyles=null),pe(this._element,this._initialStyles),this._state=3)}}return r})();function Nn(r){let t=null;return r.forEach((e,n)=>{Qo(n)&&(t=t||new Map,t.set(n,e))}),t}function Qo(r){return r==="display"||r==="position"}var Xt=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,i)=>{i!=="offset"&&t.set(i,this._finished?n:zt(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},Jt=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return Sn(t,e)}getParentElement(t){return Bt(t)}query(t,e,n){return En(t,e,n)}computeStyle(t,e,n){return zt(t,e)}animate(t,e,n,i,o,l=[]){let c=i==0?"both":"forwards",u={duration:n,delay:i,fill:c};o&&(u.easing=o);let p=new Map,y=l.filter(P=>P instanceof Xt);Er(n,i)&&y.forEach(P=>{P.currentSnapshot.forEach((C,S)=>p.set(S,C))});let h=xr(e).map(P=>new Map(P));h=Pr(t,h,p);let k=Ho(t,h);return new Xt(t,h,u,k)}};var Ht="@",jr="@.disabled",Zt=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,n,i){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,i=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,n){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Ht&&e==jr?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,i){return this.delegate.listen(t,e,n,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},$n=class extends Zt{factory;constructor(t,e,n,i,o){super(e,n,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Ht?e.charAt(1)=="."&&e==jr?(n=n===void 0?!0:!!n,this.disableAnimations(t,n)):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n,i){if(e.charAt(0)==Ht){let o=Ko(t),l=e.slice(1),c="";return l.charAt(0)!=Ht&&([l,c]=Go(l)),this.engine.listen(this.namespaceId,o,l,c,u=>{let p=u._data||-1;this.factory.scheduleListenerCallback(p,n,u)})}return this.delegate.listen(t,e,n,i)}};function Ko(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}function Go(r){let t=r.indexOf("."),e=r.substring(0,t),n=r.slice(t+1);return[e,n]}var en=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,e.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(t,e){let n="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let p=this._rendererCache,y=p.get(i);if(!y){let h=()=>p.delete(i);y=new Zt(n,i,this.engine,h),p.set(i,y)}return y}let o=e.id,l=e.id+"-"+this._currentId;this._currentId++,this.engine.register(l,t);let c=p=>{Array.isArray(p)?p.forEach(c):this.engine.registerTrigger(o,l,t,p.name,p)};return e.data.animation.forEach(c),new $n(this,l,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(n));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[l,c]=o;l(c)}),this._animationCallbacksBuffer=[]})}),i.push([e,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var Xo=(()=>{class r extends it{constructor(e,n,i){super(e,n,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||r)(Z(Tt),Z(We),Z(Ue))};static \u0275prov=ae({token:r,factory:r.\u0275fac})}return r})();function Jo(){return new $t}function Zo(r,t,e){return new en(r,t,e)}var Hr=[{provide:Ue,useFactory:Jo},{provide:it,useClass:Xo},{provide:ci,useFactory:Zo,deps:[yi,it,oi]}],Fa=[{provide:We,useClass:Qn},{provide:st,useValue:"NoopAnimations"},...Hr],es=[{provide:We,useFactory:()=>new Jt},{provide:st,useFactory:()=>"BrowserAnimations"},...Hr];function $r(){return si("NgEagerAnimations"),[...es]}var ts=["*",[["mat-toolbar-row"]]],ns=["*","mat-toolbar-row"],is=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275dir=di({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return r})(),Qr=(()=>{class r{_elementRef=Oe(Ct);_platform=Oe(Ti);_document=Oe(Tt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=ee({type:r,selectors:[["mat-toolbar"]],contentQueries:function(n,i,o){if(n&1&&ui(o,is,5),n&2){let l;Qe(l=Ke())&&(i._toolbarRows=l)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(n,i){n&2&&(xe(i.color?"mat-"+i.color:""),B("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",i._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:ns,decls:2,vars:0,template:function(n,i){n&1&&(mi(ts),bn(0),bn(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return r})();var Kr=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=at({type:r});static \u0275inj=ot({imports:[dt,dt]})}return r})();function ss(r,t){if(r&1){let e=L();s(0,"button",4),w("click",function(){_(e);let i=g();return b(i.logout())}),m(1,"Logout"),a()}}function as(r,t){r&1&&(s(0,"button",5),m(1,"Login"),a())}var tn=class r{constructor(t,e,n){this.authService=t;this.router=e;this.platformId=n}isLoggedIn(){return lt(this.platformId)?this.authService.isLoggedIn():!1}logout(){this.authService.logout(),lt(this.platformId)&&this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||r)(j(Me),j(Ie),j(Mt))};static \u0275cmp=ee({type:r,selectors:[["app-root"]],decls:7,vars:2,consts:[["color","primary"],[1,"spacer"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","routerLink","/login",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","routerLink","/login"]],template:function(e,n){e&1&&(s(0,"mat-toolbar",0)(1,"span"),m(2,"E-Banking App"),a(),F(3,"span",1),E(4,ss,2,0,"button",2)(5,as,2,0,"button",3),a(),F(6,"router-outlet")),e&2&&(d(4),f("ngIf",n.isLoggedIn()),d(),f("ngIf",!n.isLoggedIn()))},dependencies:[xi,Kr,Qr,kt,At,ye,be],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:20px auto;padding:20px}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.spacer[_ngcontent-%COMP%]{flex:1}"]})};var ls=["determinateSpinner"];function cs(r,t){if(r&1&&(_n(),s(0,"svg",11),F(1,"circle",12),a()),r&2){let e=g();le("viewBox",e._viewBox()),d(),wt("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),le("r",e._circleRadius())}}var ds=new ii("mat-progress-spinner-default-options",{providedIn:"root",factory:ms});function ms(){return{diameter:Gr}}var Gr=100,us=10,Yr=(()=>{class r{_elementRef=Oe(Ct);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=Oe(st,{optional:!0}),n=Oe(ds);this._noopAnimations=e==="NoopAnimations"&&!!n&&!n._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",n&&(n.color&&(this.color=this._defaultColor=n.color),n.diameter&&(this.diameter=n.diameter),n.strokeWidth&&(this.strokeWidth=n.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=Gr;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-us)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=ee({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,i){if(n&1&&St(ls,5),n&2){let o;Qe(o=Ke())&&(i._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,i){n&2&&(le("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),xe("mat-"+i.color),wt("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),B("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Pt],diameter:[2,"diameter","diameter",Pt],strokeWidth:[2,"strokeWidth","strokeWidth",Pt]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,i){if(n&1&&(E(0,cs,2,8,"ng-template",null,0,gi),s(2,"div",2,1),_n(),s(4,"svg",3),F(5,"circle",4),a()(),ri(),s(6,"div",5)(7,"div",6)(8,"div",7),xt(9,8),a(),s(10,"div",9),xt(11,8),a(),s(12,"div",10),xt(13,8),a()()()),n&2){let o=Ae(1);d(4),le("viewBox",i._viewBox()),d(),wt("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),le("r",i._circleRadius()),d(4),f("ngTemplateOutlet",o),d(2),f("ngTemplateOutlet",o),d(2),f("ngTemplateOutlet",o)}},dependencies:[hi],styles:[`.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return r})();var Xr=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=at({type:r});static \u0275inj=ot({imports:[dt]})}return r})();function gs(r,t){if(r&1&&(s(0,"div",14),m(1),a()),r&2){let e=g(2);d(),N(e.errorMessage)}}function hs(r,t){if(r&1&&(s(0,"div",15),m(1),a()),r&2){let e=g(2);d(),N(e.successMessage)}}function fs(r,t){r&1&&(s(0,"span"),m(1,"Se connecter"),a())}function _s(r,t){r&1&&F(0,"mat-spinner",16)}function bs(r,t){if(r&1){let e=L();s(0,"form",5,0),w("ngSubmit",function(){_(e);let i=g();return b(i.onSubmit())}),s(2,"mat-form-field",6)(3,"mat-label"),m(4,"Identifiant"),a(),s(5,"input",7),A("ngModelChange",function(i){_(e);let o=g();return O(o.username,i)||(o.username=i),b(i)}),a()(),s(6,"mat-form-field",6)(7,"mat-label"),m(8,"Mot de passe"),a(),s(9,"input",8),A("ngModelChange",function(i){_(e);let o=g();return O(o.password,i)||(o.password=i),b(i)}),a()(),E(10,gs,2,1,"div",9)(11,hs,2,1,"div",10),s(12,"button",11),E(13,fs,2,0,"span",12)(14,_s,1,0,"mat-spinner",13),a()()}if(r&2){let e=Ae(1),n=g();d(5),T("ngModel",n.username),d(4),T("ngModel",n.password),d(),f("ngIf",n.errorMessage),d(),f("ngIf",n.successMessage),d(),f("disabled",n.isLoading||e.invalid),d(),f("ngIf",!n.isLoading),d(),f("ngIf",n.isLoading)}}function ys(r,t){if(r&1&&(s(0,"div",14),m(1),a()),r&2){let e=g(2);d(),N(e.errorMessage)}}function vs(r,t){if(r&1&&(s(0,"div",15),m(1),a()),r&2){let e=g(2);d(),N(e.successMessage)}}function Cs(r,t){r&1&&(s(0,"span"),m(1,"V\xE9rifier"),a())}function Ms(r,t){r&1&&F(0,"mat-spinner",16)}function ws(r,t){if(r&1){let e=L();s(0,"form",5,1),w("ngSubmit",function(){_(e);let i=g();return b(i.onVerify2FA())}),s(2,"div",17)(3,"p"),m(4,"Un code de v\xE9rification a \xE9t\xE9 envoy\xE9 \xE0 votre t\xE9l\xE9phone."),a(),s(5,"p"),m(6,"Veuillez saisir le code \xE0 6 chiffres ci-dessous :"),a()(),s(7,"mat-form-field",6)(8,"mat-label"),m(9,"Code de v\xE9rification"),a(),s(10,"input",18),A("ngModelChange",function(i){_(e);let o=g();return O(o.pin,i)||(o.pin=i),b(i)}),a()(),E(11,ys,2,1,"div",9)(12,vs,2,1,"div",10),s(13,"div",19)(14,"button",20),E(15,Cs,2,0,"span",12)(16,Ms,1,0,"mat-spinner",13),a(),s(17,"button",21),w("click",function(){_(e);let i=g();return b(i.onResend2FA())}),m(18," Renvoyer le code "),a(),s(19,"button",22),w("click",function(){_(e);let i=g();return b(i.onBackToLogin())}),m(20," Retour "),a()()()}if(r&2){let e=Ae(1),n=g();d(10),T("ngModel",n.pin),d(),f("ngIf",n.errorMessage),d(),f("ngIf",n.successMessage),d(2),f("disabled",n.isLoading||e.invalid),d(),f("ngIf",!n.isLoading),d(),f("ngIf",n.isLoading),d(),f("disabled",n.isLoading),d(2),f("disabled",n.isLoading)}}var sn=class r{constructor(t,e){this.authService=t;this.router=e}username="";password="";pin="";errorMessage="";successMessage="";isLoading=!1;requires2FA=!1;currentUsername="";ngOnInit(){console.log("LoginComponent initialized")}onSubmit(){if(this.errorMessage="",this.successMessage="",!this.username||!this.password){this.errorMessage="Veuillez remplir le nom d'utilisateur et le mot de passe.";return}this.isLoading=!0,console.log("Attempting login with username:",this.username),this.authService.login(this.username,this.password).subscribe({next:t=>{console.log("Login response:",t),t.requires2FA==="true"||t.requires2FA===!0?(this.isLoading=!1,this.requires2FA=!0,this.currentUsername=t.username||this.username,this.successMessage=t.message||"Code de v\xE9rification envoy\xE9 \xE0 votre t\xE9l\xE9phone.",this.password=""):this.handleSuccessfulLogin(t)},error:t=>{this.isLoading=!1,this.errorMessage=t.message||"Identifiants invalides",console.error("Login error:",t)}})}onVerify2FA(){if(this.errorMessage="",this.successMessage="",!this.pin){this.errorMessage="Veuillez saisir le code PIN.";return}this.isLoading=!0,console.log("Attempting 2FA verification for username:",this.currentUsername),this.authService.verify2FA(this.currentUsername,this.pin).subscribe({next:t=>{console.log("2FA verification response:",t),this.handleSuccessfulLogin(t)},error:t=>{this.isLoading=!1,this.errorMessage=t.message||"Code PIN invalide ou expir\xE9",console.error("2FA verification error:",t),this.pin=""}})}onResend2FA(){this.errorMessage="",this.successMessage="",this.isLoading=!0,this.authService.resend2FA(this.currentUsername).subscribe({next:t=>{this.isLoading=!1,this.successMessage=t.message||"Nouveau code envoy\xE9.",console.log("2FA resend response:",t)},error:t=>{this.isLoading=!1,this.errorMessage=t.message||"Erreur lors de l'envoi du code",console.error("2FA resend error:",t)}})}onBackToLogin(){this.requires2FA=!1,this.currentUsername="",this.pin="",this.errorMessage="",this.successMessage="",this.password=""}handleSuccessfulLogin(t){if(t.role==="CLIENT"){let e=t.clientId||this.authService.getClientId();e?(this.isLoading=!1,console.log("Navigating to client dashboard with clientId:",e),this.router.navigate([`/client/${e}/dashboard`])):(console.log("No clientId in response, fetching profile"),this.authService.getClientProfile().subscribe({next:n=>{this.isLoading=!1,e=n.clientId,console.log("Profile fetched:",n),e?this.router.navigate([`/client/${e}/dashboard`]):(this.isLoading=!1,this.errorMessage="Client ID introuvable dans le profil",console.error("No clientId in profile:",n))},error:n=>{this.isLoading=!1,this.errorMessage=n.message||"\xC9chec de la r\xE9cup\xE9ration du profil client",console.error("Profile fetch error:",n)}}))}else t.role==="ADMIN"?(this.isLoading=!1,this.router.navigate(["/admin/dashboard"])):t.role==="EMPLOYEE"?(this.isLoading=!1,this.router.navigate(["/employee"])):(this.isLoading=!1,this.errorMessage="R\xF4le non reconnu: "+t.role,console.error("Unrecognized role:",t.role))}static \u0275fac=function(e){return new(e||r)(j(Me),j(Ie))};static \u0275cmp=ee({type:r,selectors:[["app-login"]],decls:8,vars:3,consts:[["loginForm","ngForm"],["verifyForm","ngForm"],[1,"login-container"],[1,"login-card"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["appearance","fill"],["matInput","","name","username","type","text","required","",3,"ngModelChange","ngModel"],["matInput","","name","password","type","password","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["mat-raised-button","","type","submit",1,"action-btn",3,"disabled"],[4,"ngIf"],["diameter","20",4,"ngIf"],[1,"error-message"],[1,"success-message"],["diameter","20"],[1,"two-fa-info"],["matInput","","name","pin","type","text","maxlength","6","pattern","[0-9]*","required","","placeholder","123456",3,"ngModelChange","ngModel"],[1,"button-group"],["mat-raised-button","","color","primary","type","submit",1,"verify-btn",3,"disabled"],["mat-stroked-button","","type","button",1,"resend-btn",3,"click","disabled"],["mat-button","","type","button",1,"back-btn",3,"click","disabled"]],template:function(e,n){e&1&&(s(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title"),m(4),a()(),s(5,"mat-card-content"),E(6,bs,15,7,"form",4)(7,ws,21,8,"form",4),a()()()),e&2&&(d(4),W(" ",n.requires2FA?"V\xE9rification de s\xE9curit\xE9":"Login to eBanking"," "),d(2),f("ngIf",!n.requires2FA),d(),f("ngIf",n.requires2FA))},dependencies:[ye,be,Ze,Je,De,Re,Ye,Dt,Bi,Rt,Xe,It,Xr,Yr,ji,qi,Wi,Ui,zi,Qi,$i,Hi,Gi,Ki,kt,At],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;box-shadow:0 8px 25px #00000026;border-radius:12px}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{text-align:center;padding:20px 20px 10px}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;color:#333}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{background-color:#667eea;color:#fff;height:48px;font-size:16px;margin-top:16px}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#5a6fd8}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.two-fa-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.two-fa-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#666;font-size:14px}.two-fa-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-weight:500;color:#333}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px}.button-group[_ngcontent-%COMP%]   .verify-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;height:48px;font-size:16px}.button-group[_ngcontent-%COMP%]   .verify-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#45a049}.button-group[_ngcontent-%COMP%]   .verify-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc}.button-group[_ngcontent-%COMP%]   .resend-btn[_ngcontent-%COMP%]{height:40px;color:#667eea;border-color:#667eea}.button-group[_ngcontent-%COMP%]   .resend-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f5f5f5}.button-group[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{height:36px;color:#999}.button-group[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover:not(:disabled){color:#666;background-color:#f9f9f9}.error-message[_ngcontent-%COMP%]{color:#f44336;font-size:14px;text-align:center;padding:8px;background-color:#ffebee;border-radius:4px;border-left:4px solid #f44336}.success-message[_ngcontent-%COMP%]{color:#4caf50;font-size:14px;text-align:center;padding:8px;background-color:#e8f5e8;border-radius:4px;border-left:4px solid #4caf50}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.login-card[_ngcontent-%COMP%]{max-width:100%}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:15px}.button-group[_ngcontent-%COMP%]   .verify-btn[_ngcontent-%COMP%], .button-group[_ngcontent-%COMP%]   .resend-btn[_ngcontent-%COMP%], .button-group[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:100%}}"]})};var an=class r{constructor(t){this.http=t}baseUrl=`${Ce.apiUrl}/clients`;getAuthHeaders(){let t=new oe({"Content-Type":"application/json",Accept:"application/json"}),e=localStorage.getItem("authToken")||localStorage.getItem("token")||localStorage.getItem("jwt");return e&&(console.log("\u{1F510} Adding JWT token to headers"),t=t.set("Authorization",`Bearer ${e}`)),console.log("\u{1F510} Final headers:",t.keys()),t}getAccountBalance(t){console.log("\u{1F50D} Getting account balance for client:",t);let e=this.getAuthHeaders(),n=`${this.baseUrl}/${t}/assistant`,i={request:"Check my account balance"};return console.log("\u{1F4E1} Full URL:",n),console.log("\u{1F510} Headers being sent:",e),console.log("\u{1F4E1} Request body:",i),this.http.post(n,i,{headers:e,withCredentials:!0}).pipe(U(o=>{console.log("\u2705 Balance response:",o)}),fn(o=>{if(o.success&&o.response)try{return this.parseAccountBalanceFromResponse(o.response)}catch{return console.warn("Could not parse account data from response, returning empty array"),[]}return[]}),V(o=>(console.error("\u274C Complete error object:",o),console.error("\u274C Error URL:",o.url),console.error("\u274C Error status:",o.status),console.error("\u274C Error headers:",o.headers),console.error("\u274C Error body type:",typeof o.error),console.error("\u274C Error body content:",o.error),typeof o.error=="string"&&o.error.includes("<!doctype")&&console.error("\u{1F6A8} Backend returned HTML instead of JSON - likely 404 or auth redirect"),_e([]))))}parseAccountBalanceFromResponse(t){return console.log("Parsing account balance from:",t),[]}processMessage(t,e,n="fr"){console.log("\u{1F680} processMessage called with:",{clientId:t,message:e,language:n});let i=`${this.baseUrl}/${t}/assistant`,o=this.getAuthHeaders(),l={request:e},c=new Ee().set("language",n);return console.log("\u{1F4E1} Making authenticated HTTP request to:",i),console.log("\u{1F4E1} With body:",l),console.log("\u{1F4E1} With params:",c.toString()),this.http.post(i,l,{params:c,headers:o,withCredentials:!0}).pipe(U(u=>{console.log("\u2705 Backend response received:",u)}),fn(u=>{let p={responseText:u.response,success:u.success,intent:u.intent};return console.log("\u{1F504} Transformed response:",p),p}),V(u=>{if(console.error("\u274C API error:",u),console.error("\u274C Error status:",u.status),console.error("\u274C Error body:",u.error),u.status===401)return console.error("\u{1F510} Authentication failed - check your credentials"),_e({responseText:"Session expir\xE9e. Veuillez vous reconnecter.",success:!1,intent:void 0});if(u.status===403){let p=u.error?.error||"Acc\xE8s refus\xE9";return console.error("\u{1F6AB} Forbidden access:",p),_e({responseText:p,success:!1,intent:void 0})}else if(u.status===400){let p=u.error?.error||"Requ\xEAte invalide";return console.error("\u274C Bad request:",p),_e({responseText:p,success:!1,intent:void 0})}else{if(u.status===404)return console.error("\u{1F50D} Endpoint not found - check URL mapping"),_e({responseText:"Service temporairement indisponible.",success:!1,intent:void 0});if(u.status===405)return console.error("\u{1F6AB} Method not allowed - check if endpoint expects POST"),_e({responseText:"Erreur de configuration du service.",success:!1,intent:void 0});if(u.status===500){let p=u.error?.error||"Erreur serveur interne";return console.error("\u{1F4A5} Server error:",p),_e({responseText:`Erreur serveur: ${p}`,success:!1,intent:void 0})}}return _e({responseText:`Erreur de communication avec le serveur (${u.status}).`,success:!1,intent:void 0})}))}checkAssistantHealth(){let t=`${this.baseUrl}/assistant/health`,e=this.getAuthHeaders();return this.http.get(t,{headers:e,withCredentials:!0}).pipe(U(n=>{console.log("\u{1F3E5} Assistant health check:",n)}),V(n=>(console.error("\u274C Health check failed:",n),_e({modelAvailable:!1}))))}debugAuthInfo(){console.log("\u{1F50D} DEBUG: Checking available authentication info..."),console.log("\u{1F50D} localStorage keys:",Object.keys(localStorage)),console.log("\u{1F50D} sessionStorage keys:",Object.keys(sessionStorage)),["token","authToken","jwt","access_token","accessToken","bearer_token","bearerToken","authorization","auth"].forEach(e=>{let n=localStorage.getItem(e)||sessionStorage.getItem(e);n&&console.log(`\u{1F510} Found token in ${e}:`,n.substring(0,20)+"...")}),console.log("\u{1F36A} Document cookies:",document.cookie)}testConnection(t,e="test"){return console.log("\u{1F9EA} Testing connection to assistant service..."),this.checkAssistantHealth().pipe(ni(n=>(n.modelAvailable||console.warn("\u26A0\uFE0F AI model not available"),this.processMessage(t,e,"fr"))))}extractIntentFromResponse(t){if(!t)return;let e=t.toLowerCase();if(e.includes("solde")||e.includes("balance"))return"check_balance";if(e.includes("transaction")||e.includes("historique"))return"get_transactions";if(e.includes("virement")||e.includes("transfer"))return"transfer_money";if(e.includes("b\xE9n\xE9ficiaire")||e.includes("beneficiary"))return"get_beneficiaries";if(e.includes("aide")||e.includes("help"))return"help";if(e.includes("recharge"))return"recharge_phone"}getTransactions(t,e=0,n=5){let i=this.getAuthHeaders(),o=new Ee().set("page",e.toString()).set("size",n.toString());return this.http.get(`${this.baseUrl}/${t}/transactions`,{headers:i,params:o,withCredentials:!0})}getBeneficiaries(t){let e=this.getAuthHeaders();return this.http.get(`${this.baseUrl}/${t}/beneficiaries`,{headers:e,withCredentials:!0})}static \u0275fac=function(e){return new(e||r)(Z(ve))};static \u0275prov=ae({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ss=["messagesContainer"];function Es(r,t){r&1&&(s(0,"div",20)(1,"div",21),F(2,"span")(3,"span")(4,"span"),a()())}function Ps(r,t){if(r&1&&F(0,"div",22),r&2){let e=g().$implicit,n=g();f("innerHTML",n.formatMessage(e.text),ai)}}function Ts(r,t){if(r&1&&(s(0,"div",23),m(1),a()),r&2){let e=g().$implicit,n=g();d(),W(" ",n.getMessageTime(e.timestamp)," ")}}function Os(r,t){if(r&1&&(s(0,"div",16),E(1,Es,5,0,"div",17)(2,Ps,1,1,"div",18)(3,Ts,2,1,"div",19),a()),r&2){let e=t.$implicit;B("user",e.isUser)("bot",!e.isUser),d(),f("ngIf",e.isTyping),d(),f("ngIf",!e.isTyping),d(),f("ngIf",!e.isTyping)}}var cn=class r{constructor(t,e){this.http=t;this.aiAssistantService=e}messagesContainer;clientId=null;isOpen=!1;messages=[];currentMessage="";isTyping=!1;messageId=1;effectiveClientId="";isAssistantAvailable=!0;ngOnInit(){this.effectiveClientId=this.clientId||"123",this.clientId||console.warn("ChatbotComponent: No clientId provided, using fallback"),this.initializeChat(),this.checkAssistantHealth()}ngAfterViewChecked(){this.scrollToBottom()}checkAssistantHealth(){this.aiAssistantService.checkAssistantHealth().subscribe({next:t=>{this.isAssistantAvailable=t.modelAvailable,console.log("\u{1F3E5} Assistant health status:",t),this.isAssistantAvailable||console.warn("\u26A0\uFE0F AI Assistant model is not available")},error:t=>{console.error("\u274C Failed to check assistant health:",t),this.isAssistantAvailable=!1}})}toggleChat(){this.isOpen=!this.isOpen,this.isOpen&&this.messages.length===1&&this.addWelcomeMessage()}initializeChat(){let t=this.isAssistantAvailable?"\u{1F44B} Bonjour ! Je suis votre assistant bancaire IA. Comment puis-je vous aider aujourd'hui ?":"\u{1F44B} Bonjour ! Je suis votre assistant bancaire. Comment puis-je vous aider aujourd'hui ?";this.messages=[{id:this.messageId++,text:t,isUser:!1,timestamp:new Date}]}addWelcomeMessage(){setTimeout(()=>{let t=`Vous pouvez me demander :
\u2022 \u{1F4B0} Consulter votre solde
\u2022 \u{1F4CA} Voir vos derni\xE8res transactions
\u2022 \u{1F4B8} Faire un virement
\u2022 \u{1F465} G\xE9rer vos b\xE9n\xE9ficiaires
\u2022 \u2753 Obtenir de l'aide

${this.isAssistantAvailable?"Vous pouvez aussi me parler naturellement !":""}

Que souhaitez-vous faire ?`;this.addBotMessage(t)},500)}sendMessage(){if(!this.currentMessage.trim())return;this.addUserMessage(this.currentMessage);let t=this.currentMessage;this.currentMessage="",this.isAssistantAvailable?this.processUserMessageWithAI(t):this.processUserMessageWithPatterns(t)}addUserMessage(t){this.messages.push({id:this.messageId++,text:t,isUser:!0,timestamp:new Date})}addBotMessage(t){this.messages.push({id:this.messageId++,text:t,isUser:!1,timestamp:new Date})}showTyping(){this.isTyping=!0,this.messages.push({id:this.messageId++,text:"",isUser:!1,timestamp:new Date,isTyping:!0})}hideTyping(){this.isTyping=!1,this.messages=this.messages.filter(t=>!t.isTyping)}formatMessage(t){let e=document.createElement("div");return e.textContent=t,e.innerHTML}processUserMessageWithAI(t){console.log("\u{1F916} processUserMessageWithAI called with message:",t),console.log("\u{1F194} Using effectiveClientId:",this.effectiveClientId),this.showTyping(),this.aiAssistantService.processMessage(this.effectiveClientId,t,"fr").subscribe({next:e=>{if(console.log("\u2705 AI Response received in component:",e),this.hideTyping(),e&&e.success)console.log("\u2728 Processing successful AI response"),console.log("\u{1F4DD} Response text:",e.responseText),console.log("\u{1F3AF} Response intent:",e.intent),this.handleAIResponse(e,t);else if(console.log("\u26A0\uFE0F AI response indicates failure"),e?.responseText?.includes("Service ASSISTANT non activ\xE9"))this.isAssistantAvailable=!1,this.addBotMessage("\u26A0\uFE0F Le service d'assistant IA n'est pas activ\xE9 pour votre compte. Je peux quand m\xEAme vous aider avec les fonctions de base !"),this.processUserMessageWithPatterns(t);else{let n=e?.responseText||"R\xE9ponse invalide du serveur";this.addBotMessage("\u274C "+n)}},error:e=>{console.error("\u274C Error in processUserMessageWithAI:",e),this.hideTyping(),e.status===403?(this.isAssistantAvailable=!1,this.addBotMessage("\u26A0\uFE0F Service d'assistant IA non disponible. Je vais vous aider avec les fonctions de base."),this.processUserMessageWithPatterns(t)):e.status===0?this.addBotMessage("\u274C Impossible de contacter le serveur. V\xE9rifiez votre connexion."):e.status>=400&&e.status<500?this.addBotMessage(`\u274C Erreur client (${e.status}). Veuillez r\xE9essayer.`):e.status>=500?this.addBotMessage(`\u274C Erreur serveur (${e.status}). Le service est temporairement indisponible.`):this.addBotMessage("\u274C D\xE9sol\xE9, je rencontre des difficult\xE9s techniques. Veuillez r\xE9essayer.")}})}processUserMessageWithPatterns(t){console.log("\u{1F50D} Using pattern matching for message:",t);let e=t.toLowerCase();this.showTyping(),setTimeout(()=>{this.hideTyping(),e.includes("solde")||e.includes("balance")?(this.addBotMessage("\u{1F4B0} Je vais r\xE9cup\xE9rer vos soldes de compte..."),this.getAccountBalance()):e.includes("transaction")||e.includes("historique")?(this.addBotMessage("\u{1F4CA} Voici vos derni\xE8res transactions..."),this.getTransactions()):e.includes("virement")||e.includes("transfer")?(this.addBotMessage("\u{1F4B8} Pour les virements, je vais vous expliquer la proc\xE9dure..."),this.handleTransferRequest(t)):e.includes("b\xE9n\xE9ficiaire")||e.includes("beneficiary")?(this.addBotMessage("\u{1F465} Voici vos b\xE9n\xE9ficiaires enregistr\xE9s..."),this.getBeneficiaries()):e.includes("aide")||e.includes("help")||e.includes("menu")?this.showHelp():(this.addBotMessage(`Je comprends que vous souhaitez "${t}". Voici ce que je peux faire pour vous aider :`),this.showHelp())},800)}handleAIResponse(t,e){if(this.addBotMessage(t.responseText),t.intent)switch(console.log("\u{1F3AF} Handling intent:",t.intent),t.intent.toLowerCase()){case"check_balance":case"account_balance":this.getAccountBalance();break;case"get_transactions":case"transaction_history":this.getTransactions();break;case"transfer_money":case"wire_transfer":this.handleTransferRequest(e);break;case"get_beneficiaries":case"beneficiary_list":this.getBeneficiaries();break;case"help":case"show_menu":this.showHelp();break;default:console.log("\u{1F937} Unknown intent, AI response only");break}}getAccountBalance(){this.aiAssistantService.getAccountBalance(this.effectiveClientId).subscribe({next:t=>{if(t&&t.length>0){let e=`\u{1F4B0} **Vos soldes de comptes :**

`;t.forEach(n=>{e+=`\u2022 ${n.accountType||"Compte"} (${n.accountNumber}): **${n.balance}\u20AC**
`}),this.addBotMessage(e)}else this.addBotMessage("\u2139\uFE0F Aucun compte trouv\xE9.")},error:t=>{console.error("Error fetching accounts:",t),this.addBotMessage("\u274C D\xE9sol\xE9, je n'arrive pas \xE0 r\xE9cup\xE9rer les informations de vos comptes en ce moment.")}})}getTransactions(){this.aiAssistantService.getTransactions(this.effectiveClientId,0,5).subscribe({next:t=>{if(t.success&&t.data&&t.data.transactions&&t.data.transactions.length>0){let e=`\u{1F4CA} **Vos derni\xE8res transactions :**

`;t.data.transactions.forEach(n=>{let i=n.amount>0?`+${n.amount}\u20AC`:`${n.amount}\u20AC`,o=new Date(n.operationDate).toLocaleDateString("fr-FR");e+=`\u2022 ${o}: ${n.description} - **${i}**
`}),this.addBotMessage(e)}else this.addBotMessage("\u2139\uFE0F Aucune transaction r\xE9cente trouv\xE9e.")},error:t=>{console.error("Error fetching transactions:",t),this.addBotMessage("\u274C Impossible de r\xE9cup\xE9rer vos transactions pour le moment.")}})}handleTransferRequest(t){let e=t.match(/(\d+)/);if(e){let n=e[1];this.addBotMessage(`\u{1F4B8} Vous souhaitez faire un virement de ${n}\u20AC.

\u{1F510} **Pour des raisons de s\xE9curit\xE9, les virements doivent \xEAtre effectu\xE9s depuis votre tableau de bord :**

**\xC9tapes :**
1. Allez dans "Mes Virements"
2. S\xE9lectionnez le b\xE9n\xE9ficiaire
3. Saisissez le montant
4. Confirmez avec votre code

Souhaitez-vous que je vous montre vos b\xE9n\xE9ficiaires ?`)}else this.addBotMessage(`\u{1F4B8} **Pour effectuer un virement :**

Rendez-vous dans la section "Virements" de votre tableau de bord.

Voulez-vous voir la liste de vos b\xE9n\xE9ficiaires ?`)}getBeneficiaries(){this.aiAssistantService.getBeneficiaries(this.effectiveClientId).subscribe({next:t=>{if(t&&t.length>0){let e=`\u{1F465} **Vos b\xE9n\xE9ficiaires :**

`;t.forEach(n=>{e+=`\u2022 ${n.name} - ${n.bankName||n.bank||"Banque non sp\xE9cifi\xE9e"}
`}),e+=`
\u{1F4A1} Pour ajouter un b\xE9n\xE9ficiaire, allez dans la section 'B\xE9n\xE9ficiaires' de votre tableau de bord.`,this.addBotMessage(e)}else this.addBotMessage(`\u{1F465} **Aucun b\xE9n\xE9ficiaire enregistr\xE9**

Vous n'avez pas encore de b\xE9n\xE9ficiaires enregistr\xE9s.

\u{1F4A1} Pour en ajouter un, allez dans la section 'B\xE9n\xE9ficiaires' de votre tableau de bord.`)},error:t=>{console.error("Error fetching beneficiaries:",t),this.addBotMessage("\u274C Impossible de r\xE9cup\xE9rer la liste de vos b\xE9n\xE9ficiaires.")}})}showHelp(){this.addBotMessage(`\u{1F916} **Je peux vous aider avec :**

\u{1F4B0} **Comptes & Soldes**
\u2022 "Quel est mon solde ?"
\u2022 "Montre-moi mes comptes"

\u{1F4CA} **Transactions**
\u2022 "Mes derni\xE8res transactions"
\u2022 "Historique du compte"

\u{1F4B8} **Virements**
\u2022 "Faire un virement"
\u2022 "Mes b\xE9n\xE9ficiaires"

\u2753 **Aide**
\u2022 "Aide" pour ce menu
\u2022 "Menu" pour les options

${this.isAssistantAvailable?"\u{1F916} **Vous pouvez aussi me parler naturellement !** Posez vos questions comme vous le feriez \xE0 un conseiller.":""}

Comment puis-je vous aider ?`)}onKeyPress(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),this.sendMessage())}scrollToBottom(){if(this.messagesContainer){let t=this.messagesContainer.nativeElement;t.scrollTop=t.scrollHeight}}getMessageTime(t){return new Date(t).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}testConnection(){console.log("\u{1F9EA} Testing assistant connection..."),this.aiAssistantService.testConnection(this.effectiveClientId,"test de connexion").subscribe({next:t=>{console.log("\u2705 Connection test successful:",t),this.addBotMessage("\u2705 Test de connexion r\xE9ussi ! L'assistant IA est op\xE9rationnel.")},error:t=>{console.error("\u274C Connection test failed:",t),this.addBotMessage("\u26A0\uFE0F Test de connexion \xE9chou\xE9. Fonctionnement en mode basique."),this.isAssistantAvailable=!1}})}static \u0275fac=function(e){return new(e||r)(j(ve),j(an))};static \u0275cmp=ee({type:r,selectors:[["app-chatbot"]],viewQuery:function(e,n){if(e&1&&St(Ss,5),e&2){let i;Qe(i=Ke())&&(n.messagesContainer=i.first)}},inputs:{clientId:"clientId"},decls:21,vars:14,consts:[["messagesContainer",""],[1,"chatbot-container"],[1,"chatbot-toggle",3,"click"],[1,"fas"],[1,"chatbot-window"],[1,"chatbot-header"],[1,"status"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"messages-container"],["class","message",3,"user","bot",4,"ngFor","ngForOf"],[1,"chat-input-container"],[1,"chat-input-wrapper"],["placeholder","Tapez votre message...","rows","1",1,"chat-input",3,"ngModelChange","keypress","ngModel","disabled"],[1,"send-btn",3,"click","disabled"],[1,"fas","fa-paper-plane"],[1,"message"],["class","typing-indicator",4,"ngIf"],["class","message-bubble",3,"innerHTML",4,"ngIf"],["class","message-time",4,"ngIf"],[1,"typing-indicator"],[1,"typing-dots"],[1,"message-bubble",3,"innerHTML"],[1,"message-time"]],template:function(e,n){if(e&1){let i=L();s(0,"div",1)(1,"button",2),w("click",function(){return _(i),b(n.toggleChat())}),F(2,"i",3),a(),s(3,"div",4)(4,"div",5)(5,"div")(6,"h3"),m(7,"\u{1F916} Assistant Bancaire"),a(),s(8,"div",6),m(9,"En ligne"),a()(),s(10,"button",7),w("click",function(){return _(i),b(n.toggleChat())}),F(11,"i",8),a()(),s(12,"div",9,0),E(14,Os,4,7,"div",10),a(),s(15,"div",11)(16,"div",12)(17,"textarea",13),A("ngModelChange",function(l){return _(i),O(n.currentMessage,l)||(n.currentMessage=l),b(l)}),w("keypress",function(l){return _(i),b(n.onKeyPress(l))}),m(18,"        "),a(),s(19,"button",14),w("click",function(){return _(i),b(n.sendMessage())}),F(20,"i",15),a()()()()()}e&2&&(d(),B("active",n.isOpen),le("aria-label",n.isOpen?"Close chat":"Open chat"),d(),B("fa-comments",!n.isOpen)("fa-times",n.isOpen),d(),B("open",n.isOpen),d(11),f("ngForOf",n.messages),d(3),T("ngModel",n.currentMessage),f("disabled",n.isTyping),d(2),f("disabled",!n.currentMessage.trim()||n.isTyping),le("aria-label","Send message"))},dependencies:[ye,Ge,be,Ze,De,Re,Xe],styles:['.chatbot-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000;font-family:Arial,sans-serif}.chatbot-toggle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;cursor:pointer;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;justify-content:center;font-size:24px;transition:all .3s ease;position:relative}.chatbot-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 20px #0003}.chatbot-toggle.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#764ba2,#667eea)}.chatbot-toggle[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-2px;right:-2px;width:12px;height:12px;background:#ff4757;border-radius:50%;opacity:0;animation:_ngcontent-%COMP%_pulse 2s infinite}.chatbot-toggle.has-notification[_ngcontent-%COMP%]:after{opacity:1}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.7}to{transform:scale(1);opacity:1}}.chatbot-window[_ngcontent-%COMP%]{position:absolute;bottom:80px;right:0;width:380px;height:500px;background:#fff;border-radius:20px;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;flex-direction:column;overflow:hidden;transform:translateY(20px);opacity:0;pointer-events:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.chatbot-window.open[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;pointer-events:all}.chatbot-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;display:flex;align-items:center;justify-content:space-between}.chatbot-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.chatbot-header[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:20px;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .2s}.close-btn[_ngcontent-%COMP%]:hover{background:#fff3}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;background:#f8f9fa}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:2px}.message[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;animation:_ngcontent-%COMP%_slideInUp .3s ease}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.message.user[_ngcontent-%COMP%]{justify-content:flex-end}.message.bot[_ngcontent-%COMP%]{justify-content:flex-start}.message-bubble[_ngcontent-%COMP%]{max-width:80%;padding:12px 16px;border-radius:18px;font-size:14px;line-height:1.4;position:relative}.message.user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-bottom-right-radius:4px}.message.bot[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#fff;color:#333;border:1px solid #e9ecef;border-bottom-left-radius:4px;box-shadow:0 2px 4px #0000000d}.typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;background:#fff;border-radius:18px 18px 18px 4px;max-width:fit-content;border:1px solid #e9ecef}.typing-dots[_ngcontent-%COMP%]{display:flex;gap:4px}.typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;background:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_typingBounce 1.4s infinite ease-in-out both}.typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_typingBounce{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}.message-time[_ngcontent-%COMP%]{font-size:11px;color:#999;margin-top:4px;text-align:right}.message.bot[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{text-align:left}.chat-input-container[_ngcontent-%COMP%]{padding:20px;background:#fff;border-top:1px solid #e9ecef}.chat-input-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-end}.chat-input[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:2px solid #e9ecef;border-radius:24px;font-size:14px;resize:none;outline:none;font-family:inherit;transition:border-color .2s;max-height:100px}.chat-input[_ngcontent-%COMP%]:focus{border-color:#667eea}.send-btn[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;transition:all .2s;flex-shrink:0}.send-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.send-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}@media (max-width: 480px){.chatbot-window[_ngcontent-%COMP%]{width:calc(100vw - 40px);height:80vh;bottom:20px;right:20px}.chatbot-container[_ngcontent-%COMP%]{bottom:20px;right:20px}}.dashboard-container[_ngcontent-%COMP%]{position:relative;min-height:100vh;padding-bottom:100px}.message-bubble[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.message-bubble[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.message-bubble[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0}.message.bot[_ngcontent-%COMP%]   .message-bubble.error[_ngcontent-%COMP%]{border-left:4px solid #ff4757;background:#fff5f5}.message.bot[_ngcontent-%COMP%]   .message-bubble.success[_ngcontent-%COMP%]{border-left:4px solid #2ed573;background:#f0fff4}']})};var dn=class r{constructor(t,e){this.http=t;this.platformId=e}apiUrl=`${Ce.apiUrl}/client/recharge`;getAuthHeaders(){if(!lt(this.platformId))return new oe({"Content-Type":"application/json"});let t=localStorage.getItem("token");if(!t)throw new Error("Token d'authentification non trouv\xE9");return new oe({"Content-Type":"application/json",Authorization:`Bearer ${t}`})}rechargePhone(t){console.log("\u{1F504} Processing phone recharge:",{phone:t.phoneNumber,operator:t.operatorCode,amount:t.amount});let e=this.getAuthHeaders();return this.http.post(`${this.apiUrl}/phone`,t,{headers:e}).pipe(U(n=>{console.log("\u2705 Recharge response:",n),(n.status==="SUCCESS"||n.status==="PENDING")&&console.log(`\u{1F4B0} Recharge successful - Transaction: ${n.transactionReference}`)}),V(n=>{console.error("\u274C Recharge failed:",n);let i=n.error?.message||n.error||"Erreur lors de la recharge";return re(()=>new Error(i))}))}getSupportedOperators(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/operators`,{headers:t}).pipe(U(e=>{console.log("\u{1F4F1} Loaded operators:",e.length)}),V(e=>{console.error("\u274C Error loading operators:",e);let n=e.error?.message||"Erreur lors du chargement des op\xE9rateurs";return re(()=>new Error(n))}))}getPredefinedAmounts(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/amounts`,{headers:t}).pipe(U(e=>{console.log("\u{1F4B0} Loaded predefined amounts:",e)}),V(e=>{console.error("\u274C Error loading amounts:",e);let n=e.error?.message||"Erreur lors du chargement des montants";return re(()=>new Error(n))}))}validatePhoneNumber(t){let e=this.getAuthHeaders();return this.http.post(`${this.apiUrl}/validate-phone`,t,{headers:e}).pipe(U(n=>{console.log("\u{1F4DE} Phone validation result:",n)}),V(n=>{console.error("\u274C Phone validation error:",n);let i=n.error?.message||"Erreur lors de la validation du num\xE9ro";return re(()=>new Error(i))}))}getRechargeHistory(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/history`,{headers:t}).pipe(U(e=>{console.log("\u{1F4CB} Loaded recharge history:",e.totalTransactions,"transactions")}),V(e=>{console.error("\u274C Error loading history:",e);let n=e.error?.message||"Erreur lors du chargement de l'historique";return re(()=>new Error(n))}))}getAccountInfo(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/account-info`,{headers:t}).pipe(U(e=>{console.log("\u{1F3E6} Account info loaded:",{balance:e.balance,currency:e.currency,provider:e.rechargeProvider})}),V(e=>{console.error("\u274C Error loading account info:",e);let n=e.error?.message||"Erreur lors du chargement des informations du compte";return re(()=>new Error(n))}))}getDailyLimits(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/daily-limits`,{headers:t}).pipe(U(e=>{console.log("\u{1F4CA} Daily limits loaded:",{daily:e.dailyLimit,remaining:e.remainingLimit,transaction:e.transactionLimit})}),V(e=>{console.error("\u274C Error loading daily limits:",e);let n=e.error?.message||"Erreur lors du chargement des limites";return re(()=>new Error(n))}))}testConnection(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/test-connection`,{headers:t}).pipe(U(e=>{console.log("\u{1F517} Connection test result:",e)}),V(e=>{console.error("\u274C Connection test failed:",e);let n=e.error?.message||"Erreur de connexion au service de recharge";return re(()=>new Error(n))}))}getServiceStatus(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/service-status`,{headers:t}).pipe(U(e=>{console.log("\u{1F4E1} Service status:",{available:e.serviceAvailable,provider:"Reloadly"})}),V(e=>{console.error("\u274C Error getting service status:",e);let n=e.error?.message||"Erreur lors de la v\xE9rification du statut du service";return re(()=>new Error(n))}))}isValidMoroccanPhoneNumber(t,e){if(!t||t.trim().length===0)return!1;let n=t.replace(/[\s\-\(\)]/g,"");if(n.startsWith("+212")?n="0"+n.substring(4):n.startsWith("212")&&(n="0"+n.substring(3)),n.length!==10||!n.startsWith("0"))return!1;if(e)switch(e){case"IAM":return/^0(6[0-6]|7[0-1])\d{7}$/.test(n);case"ORANGE":return/^0(6[7-9])\d{7}$/.test(n);case"INWI":return/^0(6[5-6])\d{7}$/.test(n);default:return/^0[67]\d{8}$/.test(n)}return/^0[67]\d{8}$/.test(n)}detectOperatorFromNumber(t){if(!this.isValidMoroccanPhoneNumber(t))return null;let e=t.replace(/[\s\-\(\)]/g,"");return e.startsWith("+212")?e="0"+e.substring(4):e.startsWith("212")&&(e="0"+e.substring(3)),/^0(6[0-6]|7[0-1])\d{7}$/.test(e)?"IAM":/^0(6[7-9])\d{7}$/.test(e)?"ORANGE":/^0(6[5-6])\d{7}$/.test(e)?"INWI":null}formatPhoneNumber(t){if(!t)return"";let e=t.replace(/[\s\-\(\)]/g,"");return e.startsWith("+212")?e="0"+e.substring(4):e.startsWith("212")&&(e="0"+e.substring(3)),e.length===10&&e.startsWith("0")?`${e.substring(0,4)} ${e.substring(4,6)} ${e.substring(6,8)} ${e.substring(8)}`:t}getOperatorIcon(t){switch(t){case"IAM":return"/assets/iam-logo.png";case"ORANGE":return"/assets/orange-logo.png";case"INWI":return"/assets/inwi-logo.png";default:return"/assets/default-operator.png"}}getOperatorColor(t){switch(t){case"IAM":return"#e74c3c";case"ORANGE":return"#ff8c00";case"INWI":return"#3498db";default:return"#95a5a6"}}getDebugPinInfo(){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/debug-pin`,{headers:t}).pipe(U(e=>{console.warn("\u{1F6A8} DEBUG: PIN Info loaded - REMOVE IN PRODUCTION!",e)}),V(e=>(console.error("\u274C Debug PIN error:",e),re(()=>new Error("Debug info not available")))))}static \u0275fac=function(e){return new(e||r)(Z(ve),Z(Mt))};static \u0275prov=ae({token:r,factory:r.\u0275fac,providedIn:"root"})};var mn=class r{constructor(t){this.http=t}apiUrl=`${Ce.apiUrl}/crypto`;portfolioValueSubject=new vt(0);balancesSubject=new vt({});ratesSubject=new vt({});getAuthHeaders(){let t=localStorage.getItem("token");return new oe({Authorization:`Bearer ${t}`,"Content-Type":"application/json"})}buyCrypto(t,e){let n=new Ee().set("symbol",t).set("usdAmount",e.toString());return this.http.post(`${this.apiUrl}/buy`,null,{headers:this.getAuthHeaders(),params:n}).pipe(U(()=>{this.refreshPortfolioData()}),V(this.handleError))}sellCrypto(t,e){let n=new Ee().set("symbol",t).set("quantity",e.toString());return this.http.post(`${this.apiUrl}/sell`,null,{headers:this.getAuthHeaders(),params:n}).pipe(U(()=>{this.refreshPortfolioData()}),V(this.handleError))}getPortfolioValue(){return this.http.get(`${this.apiUrl}/portfolio-value`,{headers:this.getAuthHeaders()}).pipe(U(t=>{this.portfolioValueSubject.next(t.portfolioUsdValue)}),V(this.handleError))}getCryptoStats(){return this.http.get(`${this.apiUrl}/stats`,{headers:this.getAuthHeaders()}).pipe(V(this.handleError))}getCryptoBalance(t){let e=new Ee;return t&&(e=e.set("currency",t)),this.http.get(`${this.apiUrl}/balance`,{headers:this.getAuthHeaders(),params:e}).pipe(U(n=>{this.balancesSubject.next(n)}),V(this.handleError))}getRate(t){return this.http.get(`${this.apiUrl}/rate/${t}`,{headers:this.getAuthHeaders()}).pipe(V(this.handleError))}getAllRates(){return this.http.get(`${this.apiUrl}/rates`,{headers:this.getAuthHeaders()}).pipe(U(t=>{this.ratesSubject.next(t)}),V(this.handleError))}getTransactionHistory(){return this.http.get(`${this.apiUrl}/history`,{headers:this.getAuthHeaders()}).pipe(V(this.handleError))}searchTransactions(t,e,n){let i=new Ee;return t&&(i=i.set("currency",t)),e&&(i=i.set("startDate",e)),n&&(i=i.set("endDate",n)),this.http.get(`${this.apiUrl}/search`,{headers:this.getAuthHeaders(),params:i}).pipe(V(this.handleError))}getTestnetDepositAddress(t){let e=new Ee().set("currency",t);return this.http.get(`${this.apiUrl}/testnet/address`,{headers:this.getAuthHeaders(),params:e}).pipe(V(this.handleError))}get portfolioValue$(){return this.portfolioValueSubject.asObservable()}get balances$(){return this.balancesSubject.asObservable()}get rates$(){return this.ratesSubject.asObservable()}refreshPortfolioData(){this.getPortfolioValue().subscribe(),this.getCryptoBalance().subscribe(),this.getAllRates().subscribe()}formatSymbol(t){return t.endsWith("USDT")?t:t+"USDT"}calculateProfitLossPercentage(t,e){return(e-t)/t*100}isSupportedSymbol(t){return["BTCUSDT","ETHUSDT"].includes(this.formatSymbol(t))}getSupportedSymbols(){return["BTCUSDT","ETHUSDT"]}formatUSD(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}formatCryptoAmount(t,e=8){return t.toFixed(e)}handleError=t=>{console.error("CryptoService Error:",t);let e="Une erreur est survenue";return t.error?.error?e=t.error.error:t.error?.message?e=t.error.message:t.message&&(e=t.message),re(()=>new Error(e))};startRealTimeRates(t=1e4){setInterval(()=>{this.getAllRates().subscribe({error:e=>console.warn("Failed to update rates:",e)})},t)}getMarketData(t){return this.getRate(t)}static \u0275fac=function(e){return new(e||r)(Z(ve))};static \u0275prov=ae({token:r,factory:r.\u0275fac,providedIn:"root"})};function Is(r,t){if(r&1&&(s(0,"div",13),m(1),a()),r&2){let e=g();xe(e.messageType==="success"?"alert-success":"alert-danger"),d(),W(" ",e.message," ")}}function Ds(r,t){if(r&1&&(s(0,"option",39),m(1),ce(2,"currency"),a()),r&2){let e=t.$implicit;f("value",e.id),d(),pi(" ",e.rib," - ",Se(2,4,e.balance,"EUR")," (",e.type,") ")}}function Rs(r,t){if(r&1&&(s(0,"option",39),m(1),a()),r&2){let e=t.$implicit;f("value",e.id),d(),ke(" ",e.nom," - ",e.rib," ")}}function Ns(r,t){if(r&1){let e=L();s(0,"div",20)(1,"label",23),m(2,"Choisir un b\xE9n\xE9ficiaire"),a(),s(3,"div",40)(4,"select",41),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.selectedBeneficiaryId,i)||(o.selectedBeneficiaryId=i),b(i)}),w("change",function(){_(e);let i=g(2);return i.onBeneficiarySelect(),b(i.onFormChange())}),s(5,"option",25),m(6,"S\xE9lectionner un b\xE9n\xE9ficiaire"),a(),E(7,Rs,2,3,"option",26),a(),s(8,"button",42),w("click",function(){_(e);let i=g(2);return b(i.loadBeneficiaries())}),m(9," Actualiser "),a()()()}if(r&2){let e=g(2);d(4),T("ngModel",e.selectedBeneficiaryId),d(3),f("ngForOf",e.beneficiaries)}}function Vs(r,t){if(r&1&&(s(0,"div",48),m(1),a()),r&2){let e=g(4);d(),ke(" \u2713 Compte valide: ",e.ribValidation.accountHolder," (",e.ribValidation.accountType,") ")}}function Bs(r,t){r&1&&(s(0,"div",49),m(1," \u2717 RIB invalide "),a())}function Fs(r,t){if(r&1&&(s(0,"div",45),E(1,Vs,2,2,"div",46)(2,Bs,2,0,"div",47),a()),r&2){let e=g(3);d(),f("ngIf",e.ribValidation.valid),d(),f("ngIf",!e.ribValidation.valid)}}function Ls(r,t){if(r&1){let e=L();s(0,"div",20)(1,"label",23),m(2,"RIB destinataire"),a(),s(3,"div",40)(4,"input",43),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.transferRequest.toRib,i)||(o.transferRequest.toRib=i),b(i)}),w("input",function(){_(e);let i=g(2);return b(i.onFormChange())}),a(),s(5,"button",42),w("click",function(){_(e);let i=g(2);return b(i.validateRib())}),m(6," Valider RIB "),a()(),E(7,Fs,3,2,"div",44),a()}if(r&2){let e=g(2);d(4),T("ngModel",e.transferRequest.toRib),f("required",e.destinationType==="manual"),d(3),f("ngIf",e.ribValidation)}}function qs(r,t){if(r&1&&(s(0,"div",50)(1,"strong"),m(2),a(),F(3,"br"),s(4,"small"),m(5),ce(6,"currency"),a()()),r&2){let e=t.$implicit;d(2),N(e.rib),d(3),ke("",e.type," - ",Se(6,3,e.balance,"EUR"),"")}}function zs(r,t){if(r&1){let e=L();s(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"h5"),m(6,"Nouveau Virement"),a()(),s(7,"div",19)(8,"div",20)(9,"button",21),w("click",function(){_(e);let i=g();return b(i.loadClientAccounts())}),m(10," Charger mes comptes "),a()(),s(11,"form",22,0),w("ngSubmit",function(){_(e);let i=g();return b(i.executeTransfer())}),s(13,"div",20)(14,"label",23),m(15,"Compte source"),a(),s(16,"select",24),A("ngModelChange",function(i){_(e);let o=g();return O(o.transferRequest.fromAccountId,i)||(o.transferRequest.fromAccountId=i),b(i)}),w("change",function(){_(e);let i=g();return b(i.onFormChange())}),s(17,"option",25),m(18,"S\xE9lectionner un compte"),a(),E(19,Ds,3,7,"option",26),a()(),s(20,"div",20)(21,"label",27),m(22,"Destinataire"),a(),s(23,"div",28)(24,"input",29),A("ngModelChange",function(i){_(e);let o=g();return O(o.destinationType,i)||(o.destinationType=i),b(i)}),w("change",function(){_(e);let i=g();return b(i.onFormChange())}),a(),s(25,"label",30),m(26," B\xE9n\xE9ficiaire existant "),a()(),s(27,"div",28)(28,"input",31),A("ngModelChange",function(i){_(e);let o=g();return O(o.destinationType,i)||(o.destinationType=i),b(i)}),w("change",function(){_(e);let i=g();return b(i.onFormChange())}),a(),s(29,"label",32),m(30," Saisie manuelle du RIB "),a()()(),E(31,Ns,10,2,"div",33)(32,Ls,8,3,"div",33),s(33,"div",20)(34,"label",23),m(35,"Montant (\u20AC)"),a(),s(36,"input",34),A("ngModelChange",function(i){_(e);let o=g();return O(o.transferRequest.amount,i)||(o.transferRequest.amount=i),b(i)}),w("input",function(){_(e);let i=g();return b(i.onFormChange())}),a()(),s(37,"div",20)(38,"label",23),m(39,"Nom du b\xE9n\xE9ficiaire"),a(),s(40,"input",35),A("ngModelChange",function(i){_(e);let o=g();return O(o.transferRequest.beneficiaryName,i)||(o.transferRequest.beneficiaryName=i),b(i)}),w("input",function(){_(e);let i=g();return b(i.onFormChange())}),a()(),s(41,"div",20)(42,"label",23),m(43,"Description"),a(),s(44,"textarea",36),A("ngModelChange",function(i){_(e);let o=g();return O(o.transferRequest.description,i)||(o.transferRequest.description=i),b(i)}),a()(),s(45,"button",37),m(46," Effectuer le virement "),a()()()()(),s(47,"div",16)(48,"div",17)(49,"div",18)(50,"h5"),m(51,"Mes Comptes"),a()(),s(52,"div",19),E(53,qs,7,6,"div",38),a()()()()()}if(r&2){let e=g();d(16),T("ngModel",e.transferRequest.fromAccountId),d(3),f("ngForOf",e.clientAccounts),d(5),T("ngModel",e.destinationType),d(4),T("ngModel",e.destinationType),d(3),f("ngIf",e.destinationType==="beneficiary"),d(),f("ngIf",e.destinationType==="manual"),d(4),T("ngModel",e.transferRequest.amount),d(4),T("ngModel",e.transferRequest.beneficiaryName),f("readonly",e.destinationType==="beneficiary"),d(4),T("ngModel",e.transferRequest.description),d(),f("disabled",!e.isTransferFormValid()),d(8),f("ngForOf",e.clientAccounts)}}function Ws(r,t){if(r&1){let e=L();s(0,"div",20)(1,"label",23),m(2,"RIB"),a(),s(3,"input",69),A("ngModelChange",function(i){_(e);let o=g(3);return O(o.beneficiaryData.rib,i)||(o.beneficiaryData.rib=i),b(i)}),a()()}if(r&2){let e=g(3);d(3),T("ngModel",e.beneficiaryData.rib)}}function Us(r,t){if(r&1&&(s(0,"option",39),m(1),a()),r&2){let e=t.$implicit;f("value",e.key),d(),W(" ",e.value," ")}}function js(r,t){if(r&1){let e=L();s(0,"div",64)(1,"div",17)(2,"div",18)(3,"h6"),m(4),a()(),s(5,"div",19)(6,"form",22,1),w("ngSubmit",function(){_(e);let i=g(2);return b(i.saveBeneficiary())}),s(8,"div",20)(9,"label",23),m(10,"Nom"),a(),s(11,"input",65),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.beneficiaryData.nom,i)||(o.beneficiaryData.nom=i),b(i)}),a()(),E(12,Ws,4,1,"div",33),s(13,"div",20)(14,"label",23),m(15,"Relation"),a(),s(16,"select",66),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.beneficiaryData.relation,i)||(o.beneficiaryData.relation=i),b(i)}),s(17,"option",25),m(18,"S\xE9lectionner"),a(),E(19,Us,2,2,"option",26),ce(20,"keyvalue"),a()(),s(21,"div",67)(22,"button",37),m(23),a(),s(24,"button",68),w("click",function(){_(e);let i=g(2);return b(i.cancelBeneficiary())}),m(25," Annuler "),a()()()()()()}if(r&2){let e=Ae(7),n=g(2);d(4),W("",n.editingBeneficiary?"Modifier":"Ajouter"," B\xE9n\xE9ficiaire"),d(7),T("ngModel",n.beneficiaryData.nom),d(),f("ngIf",!n.editingBeneficiary),d(4),T("ngModel",n.beneficiaryData.relation),d(3),f("ngForOf",Et(20,7,n.relationTypes)),d(3),f("disabled",!e.form.valid),d(),W(" ",n.editingBeneficiary?"Modifier":"Ajouter"," ")}}function Hs(r,t){if(r&1){let e=L();s(0,"div",70)(1,"div",19)(2,"div",71)(3,"div",51)(4,"h6"),m(5),a(),s(6,"small",72),m(7),a(),s(8,"span",73),m(9),a()(),s(10,"div",74)(11,"button",75),w("click",function(){let i=_(e).$implicit,o=g(2);return b(o.loadBeneficiaryDetails(i.id))}),m(12," D\xE9tails "),a(),s(13,"button",76),w("click",function(){let i=_(e).$implicit,o=g(2);return b(o.editBeneficiary(i))}),m(14," Modifier "),a(),s(15,"button",77),w("click",function(){let i=_(e).$implicit,o=g(2);return b(o.deleteBeneficiary(i.id))}),m(16," Supprimer "),a()()()()()}if(r&2){let e=t.$implicit;d(5),N(e.nom),d(2),ke(" RIB: ",e.rib," | Relation: ",e.relation," "),d(),xe(e.actif?"bg-success":"bg-secondary"),d(),W(" ",e.actif?"Actif":"Inactif"," ")}}function $s(r,t){if(r&1){let e=L();s(0,"div",14)(1,"div",15)(2,"div",51)(3,"div",17)(4,"div",52)(5,"h5"),m(6,"Liste des B\xE9n\xE9ficiaires"),a(),s(7,"div")(8,"button",53),w("click",function(){_(e);let i=g();return b(i.loadRelationTypes())}),m(9," Types de relation "),a(),s(10,"button",54),w("click",function(){_(e);let i=g();return b(i.showAddBeneficiary=!i.showAddBeneficiary)}),m(11," Ajouter B\xE9n\xE9ficiaire "),a()()(),E(12,js,26,9,"div",55),s(13,"div",19)(14,"div",56)(15,"div",16)(16,"input",57),A("ngModelChange",function(i){_(e);let o=g();return O(o.searchQuery,i)||(o.searchQuery=i),b(i)}),w("input",function(){_(e);let i=g();return b(i.searchBeneficiaries())}),a()(),s(17,"div",58)(18,"select",59),A("ngModelChange",function(i){_(e);let o=g();return O(o.activeFilter,i)||(o.activeFilter=i),b(i)}),w("change",function(){_(e);let i=g();return b(i.loadBeneficiaries())}),s(19,"option",25),m(20,"Tous"),a(),s(21,"option",60),m(22,"Actifs"),a(),s(23,"option",61),m(24,"Inactifs"),a()()(),s(25,"div",58)(26,"button",62),w("click",function(){_(e);let i=g();return b(i.loadBeneficiaries())}),m(27," Charger "),a()()(),E(28,Hs,17,6,"div",63),a()()()()()}if(r&2){let e=g();d(12),f("ngIf",e.showAddBeneficiary||e.editingBeneficiary),d(4),T("ngModel",e.searchQuery),d(2),T("ngModel",e.activeFilter),d(10),f("ngForOf",e.beneficiaries)}}function Qs(r,t){if(r&1&&(s(0,"tr")(1,"td"),m(2),a(),s(3,"td")(4,"span",89),m(5),a()(),s(6,"td"),m(7),ce(8,"currency"),a(),s(9,"td"),m(10),a(),s(11,"td"),m(12),a()()),r&2){let e=t.$implicit,n=g(2);d(2),N(e.id),d(2),xe(e.type==="VIREMENT_SORTANT"?"bg-danger":"bg-success"),d(),W(" ",e.type," "),d(),xe(e.amount<0?"text-danger":"text-success"),d(),W(" ",Se(8,9,e.amount,"MAD")," "),d(3),N(n.parseCustomDate(e.date)),d(2),N(e.description||"-")}}function Ks(r,t){if(r&1){let e=L();s(0,"div",14)(1,"div",17)(2,"div",52)(3,"h5"),m(4,"Historique des Virements"),a(),s(5,"div")(6,"label",78),m(7,"Page:"),a(),s(8,"input",79),A("ngModelChange",function(i){_(e);let o=g();return O(o.historyPage,i)||(o.historyPage=i),b(i)}),a(),s(9,"label",80),m(10,"Taille:"),a(),s(11,"select",81),A("ngModelChange",function(i){_(e);let o=g();return O(o.historySize,i)||(o.historySize=i),b(i)}),s(12,"option",82),m(13,"10"),a(),s(14,"option",83),m(15,"20"),a(),s(16,"option",84),m(17,"50"),a()(),s(18,"button",85),w("click",function(){_(e);let i=g();return b(i.loadTransferHistory())}),m(19," Charger "),a()()(),s(20,"div",19)(21,"div",86)(22,"table",87)(23,"thead")(24,"tr")(25,"th"),m(26,"ID Transaction"),a(),s(27,"th"),m(28,"Type"),a(),s(29,"th"),m(30,"Montant"),a(),s(31,"th"),m(32,"Date"),a(),s(33,"th"),m(34,"Description"),a()()(),s(35,"tbody"),E(36,Qs,13,12,"tr",88),a()()()()()()}if(r&2){let e=g();d(8),T("ngModel",e.historyPage),d(3),T("ngModel",e.historySize),d(25),f("ngForOf",e.transferHistory)}}function Gs(r,t){if(r&1&&(s(0,"div",100)(1,"h5"),m(2,"QR Code G\xE9n\xE9r\xE9 :"),a(),F(3,"img",101),a()),r&2){let e=g(2);d(3),f("src",e.qrImage,li)}}function Ys(r,t){if(r&1&&(s(0,"option",39),m(1),ce(2,"currency"),a()),r&2){let e=t.$implicit;f("value",e.id),d(),ke(" ",e.rib," (",Se(2,3,e.balance,"MAD"),") ")}}function Xs(r,t){if(r&1){let e=L();s(0,"div",102)(1,"div",18),m(2,"Effectuer un Paiement depuis un QR"),a(),s(3,"div",19)(4,"form")(5,"div",20)(6,"label"),m(7,"Compte Source"),a(),s(8,"select",103),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.qrPaymentData.sourceAccountId,i)||(o.qrPaymentData.sourceAccountId=i),b(i)}),s(9,"option",25),m(10,"S\xE9lectionner un compte"),a(),E(11,Ys,3,6,"option",26),a()(),s(12,"div",20)(13,"label"),m(14,"RIB du Destinataire"),a(),s(15,"input",104),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.qrPaymentData.rib,i)||(o.qrPaymentData.rib=i),b(i)}),a()(),s(16,"div",20)(17,"label"),m(18,"Montant"),a(),s(19,"input",105),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.qrPaymentData.amount,i)||(o.qrPaymentData.amount=i),b(i)}),a()(),s(20,"div",20)(21,"label"),m(22,"Description"),a(),s(23,"input",106),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.qrPaymentData.description,i)||(o.qrPaymentData.description=i),b(i)}),a()(),s(24,"button",107),w("click",function(){_(e);let i=g(2);return b(i.processQrPayment())}),m(25," Effectuer le Paiement "),a()()()()}if(r&2){let e=g(2);d(8),T("ngModel",e.qrPaymentData.sourceAccountId),d(3),f("ngForOf",e.clientAccounts),d(4),T("ngModel",e.qrPaymentData.rib),d(4),T("ngModel",e.qrPaymentData.amount),d(4),T("ngModel",e.qrPaymentData.description),d(),f("disabled",!e.isQrPaymentValid())}}function Js(r,t){if(r&1&&(s(0,"div",108),m(1),a()),r&2){let e=g(2);d(),W(" ",e.qrError," ")}}function Zs(r,t){if(r&1){let e=L();s(0,"div",14)(1,"div",17)(2,"div",18),m(3,"G\xE9n\xE9rer un QR Code pour Paiement"),a(),s(4,"div",19)(5,"form",90,2),w("ngSubmit",function(){_(e);let i=g();return b(i.generateQr())}),s(7,"div",20)(8,"label"),m(9,"RIB Destinataire"),a(),s(10,"input",91),A("ngModelChange",function(i){_(e);let o=g();return O(o.qrData.rib,i)||(o.qrData.rib=i),b(i)}),a()(),s(11,"div",20)(12,"label"),m(13,"Montant"),a(),s(14,"input",92),A("ngModelChange",function(i){_(e);let o=g();return O(o.qrData.amount,i)||(o.qrData.amount=i),b(i)}),a()(),s(15,"div",20)(16,"label"),m(17,"Description"),a(),s(18,"input",93),A("ngModelChange",function(i){_(e);let o=g();return O(o.qrData.description,i)||(o.qrData.description=i),b(i)}),a()(),s(19,"button",37),m(20,"G\xE9n\xE9rer QR"),a()(),E(21,Gs,4,1,"div",94),s(22,"div",95)(23,"button",96),w("click",function(){_(e);let i=g();return b(i.useQrToPay())}),m(24,"Utiliser ce QR pour payer"),a()(),F(25,"hr",97),E(26,Xs,26,6,"div",98)(27,Js,2,1,"div",99),a()()()}if(r&2){let e=Ae(6),n=g();d(10),T("ngModel",n.qrData.rib),d(4),T("ngModel",n.qrData.amount),d(4),T("ngModel",n.qrData.description),d(),f("disabled",!e.form.valid),d(2),f("ngIf",n.qrImage),d(5),f("ngIf",n.qrImage),d(),f("ngIf",n.qrError)}}function ea(r,t){if(r&1&&(s(0,"option",39),m(1),a()),r&2){let e=t.$implicit;f("value",e.code),d(),N(e.name)}}function ta(r,t){if(r&1&&(s(0,"small"),m(1),a()),r&2){let e=g(2);B("text-success",e.phoneValidation.valid)("text-danger",!e.phoneValidation.valid),d(),W(" ",e.phoneValidation.message," ")}}function na(r,t){if(r&1&&(s(0,"tr")(1,"td"),m(2),a(),s(3,"td"),m(4),a(),s(5,"td"),m(6),a(),s(7,"td"),m(8),ce(9,"currency"),a(),s(10,"td"),m(11),a(),s(12,"td")(13,"span",89),m(14),a()()()),r&2){let e=t.$implicit,n=g(2);d(2),N(e.transactionReference||"-"),d(2),N(e.phoneNumber),d(2),N(e.operatorCode),d(2),N(Se(9,12,e.amount,(n.accountInfo==null?null:n.accountInfo.currency)||"MAD")),d(3),N(n.parseCustomDate(e.createdAt)),d(2),B("badge-success",e.status==="SUCCESS")("badge-warning",e.status==="PENDING")("badge-danger",e.status==="FAILED"),d(),W(" ",e.status," ")}}function ia(r,t){if(r&1){let e=L();s(0,"div",109)(1,"div",110)(2,"div",18),m(3,"Recharge T\xE9l\xE9phonique"),a(),s(4,"div",19)(5,"form",22),w("ngSubmit",function(){_(e);let i=g();return b(i.executeRecharge())}),s(6,"div",15)(7,"div",111)(8,"label",112),m(9,"Op\xE9rateur"),a(),s(10,"select",113),A("ngModelChange",function(i){_(e);let o=g();return O(o.rechargeRequest.operatorCode,i)||(o.rechargeRequest.operatorCode=i),b(i)}),E(11,ea,2,2,"option",26),a()(),s(12,"div",111)(13,"label",114),m(14,"Num\xE9ro de t\xE9l\xE9phone"),a(),s(15,"input",115),A("ngModelChange",function(i){_(e);let o=g();return O(o.rechargeRequest.phoneNumber,i)||(o.rechargeRequest.phoneNumber=i),b(i)}),w("blur",function(){_(e);let i=g();return b(i.validatePhoneNumber())}),a(),E(16,ta,2,5,"small",116),a(),s(17,"div",117)(18,"label",118),m(19,"Montant"),a(),s(20,"input",119),A("ngModelChange",function(i){_(e);let o=g();return O(o.rechargeRequest.amount,i)||(o.rechargeRequest.amount=i),b(i)}),a()(),s(21,"div",117)(22,"label",120),m(23,"PIN"),a(),s(24,"input",121),A("ngModelChange",function(i){_(e);let o=g();return O(o.rechargeRequest.transactionPin,i)||(o.rechargeRequest.transactionPin=i),b(i)}),a()()(),s(25,"button",122),m(26," Recharger "),a()()()(),s(27,"div",123)(28,"div",18),m(29,"Historique des recharges"),a(),s(30,"div",19)(31,"div",124)(32,"table",87)(33,"thead")(34,"tr")(35,"th"),m(36,"R\xE9f\xE9rence"),a(),s(37,"th"),m(38,"Num\xE9ro"),a(),s(39,"th"),m(40,"Op\xE9rateur"),a(),s(41,"th"),m(42,"Montant"),a(),s(43,"th"),m(44,"Date"),a(),s(45,"th"),m(46,"Statut"),a()()(),s(47,"tbody"),E(48,na,15,15,"tr",88),a()()()()()()}if(r&2){let e=g();d(10),T("ngModel",e.rechargeRequest.operatorCode),d(),f("ngForOf",e.operators),d(4),T("ngModel",e.rechargeRequest.phoneNumber),d(),f("ngIf",e.phoneValidation),d(4),T("ngModel",e.rechargeRequest.amount),d(4),T("ngModel",e.rechargeRequest.transactionPin),d(),f("disabled",!e.rechargeRequest.phoneNumber||!e.rechargeRequest.operatorCode||!e.rechargeRequest.amount||!e.rechargeRequest.transactionPin),d(23),f("ngForOf",e.rechargeHistory==null?null:e.rechargeHistory.history)}}function ra(r,t){if(r&1&&(s(0,"option",39),m(1),a()),r&2){let e=t.$implicit;f("value",e),d(),N(e)}}function oa(r,t){if(r&1){let e=L();s(0,"div",127)(1,"label",137),m(2,"Montant (USD)"),a(),s(3,"input",138),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.cryptoTransaction.usdAmount,i)||(o.cryptoTransaction.usdAmount=i),b(i)}),a()()}if(r&2){let e=g(2);d(3),T("ngModel",e.cryptoTransaction.usdAmount)}}function sa(r,t){if(r&1){let e=L();s(0,"div",127)(1,"label",139),m(2,"Quantit\xE9"),a(),s(3,"input",140),A("ngModelChange",function(i){_(e);let o=g(2);return O(o.cryptoTransaction.quantity,i)||(o.cryptoTransaction.quantity=i),b(i)}),a()()}if(r&2){let e=g(2);d(3),T("ngModel",e.cryptoTransaction.quantity)}}function aa(r,t){if(r&1&&(s(0,"li"),m(1),a()),r&2){let e=t.$implicit;d(),ke(" ",e.key,": ",e.value," ")}}function la(r,t){if(r&1&&(s(0,"li"),m(1),ce(2,"number"),a()),r&2){let e=t.$implicit;d(),ke(" ",e.key,": ",Se(2,2,e.value,"1.2-8")," ")}}function ca(r,t){if(r&1&&(s(0,"tr")(1,"td"),m(2),a(),s(3,"td"),m(4),a(),s(5,"td"),m(6),a(),s(7,"td"),m(8),a(),s(9,"td"),m(10),ce(11,"currency"),a()()),r&2){let e=t.$implicit,n=g(2);d(2),N(n.parseCustomDate(e.timestamp)),d(2),N(e.side),d(2),N(e.symbol),d(2),N(e.quantity),d(2),N(Se(11,5,e.price,"USD"))}}function da(r,t){if(r&1){let e=L();s(0,"div",125)(1,"div",126)(2,"div",18),m(3,"Op\xE9rations Crypto"),a(),s(4,"div",19)(5,"form",22),w("ngSubmit",function(){_(e);let i=g();return b(i.executeCryptoTrade())}),s(6,"div",15)(7,"div",127)(8,"label",128),m(9,"Crypto"),a(),s(10,"select",129),A("ngModelChange",function(i){_(e);let o=g();return O(o.cryptoTransaction.symbol,i)||(o.cryptoTransaction.symbol=i),b(i)}),E(11,ra,2,2,"option",26),a()(),s(12,"div",127)(13,"label",130),m(14,"Type"),a(),s(15,"select",131),A("ngModelChange",function(i){_(e);let o=g();return O(o.cryptoTransaction.side,i)||(o.cryptoTransaction.side=i),b(i)}),s(16,"option",132),m(17,"Achat"),a(),s(18,"option",133),m(19,"Vente"),a()()(),E(20,oa,4,1,"div",134)(21,sa,4,1,"div",134),a(),s(22,"button",122),m(23),a()()()(),s(24,"div",15)(25,"div",16)(26,"div",126)(27,"div",18),m(28,"Solde Crypto"),a(),s(29,"div",19)(30,"ul"),E(31,aa,2,2,"li",88),ce(32,"keyvalue"),a(),s(33,"div"),m(34,"Valeur totale du portefeuille: "),s(35,"b"),m(36),ce(37,"currency"),a()()()()(),s(38,"div",16)(39,"div",126)(40,"div",18),m(41,"Taux de change"),a(),s(42,"div",19)(43,"ul"),E(44,la,3,5,"li",88),ce(45,"keyvalue"),a()()()()(),s(46,"div",135)(47,"div",18),m(48,"Historique des transactions crypto"),a(),s(49,"div",19)(50,"div",136)(51,"table",87)(52,"thead")(53,"tr")(54,"th"),m(55,"Date"),a(),s(56,"th"),m(57,"Type"),a(),s(58,"th"),m(59,"Symbole"),a(),s(60,"th"),m(61,"Quantit\xE9"),a(),s(62,"th"),m(63,"Prix"),a()()(),s(64,"tbody"),E(65,ca,12,8,"tr",88),a()()()()()()}if(r&2){let e=g();d(10),T("ngModel",e.cryptoTransaction.symbol),d(),f("ngForOf",e.supportedSymbols),d(4),T("ngModel",e.cryptoTransaction.side),d(5),f("ngIf",e.cryptoTransaction.side==="BUY"),d(),f("ngIf",e.cryptoTransaction.side==="SELL"),d(),f("disabled",!e.cryptoTransaction.symbol||e.cryptoTransaction.side==="BUY"&&!e.cryptoTransaction.usdAmount||e.cryptoTransaction.side==="SELL"&&!e.cryptoTransaction.quantity),d(),W(" ",e.cryptoTransaction.side==="BUY"?"Acheter":"Vendre"," "),d(8),f("ngForOf",Et(32,11,e.cryptoBalance)),d(5),N(Se(37,13,e.portfolioValue,"USD")),d(8),f("ngForOf",Et(45,16,e.cryptoRates)),d(21),f("ngForOf",e.cryptoHistory)}}var un=class r{constructor(t,e,n,i){this.http=t;this.authService=e;this.rechargeService=n;this.cryptoService=i}clientId=null;_activeTab="virement";subscriptions=[];clientAccounts=[];destinationType="manual";selectedBeneficiaryId=null;transferRequest={fromAccountId:0,toRib:"",amount:0,description:"",beneficiaryName:""};ribValidation=null;beneficiaries=[];selectedBeneficiary=null;showAddBeneficiary=!1;editingBeneficiary=null;beneficiaryData={nom:"",rib:"",relation:""};relationTypes={};activeFilter="";searchQuery="";transferHistory=[];historyPage=0;historySize=10;operators=[];rechargeRequest={phoneNumber:"",operatorCode:"",amount:0,transactionPin:""};phoneValidation=null;accountInfo=null;dailyLimits=null;rechargeHistory=null;cryptoBalance={};cryptoRates={};cryptoStats=[];portfolioValue=0;cryptoTransaction={symbol:"",usdAmount:0,quantity:0,side:"BUY"};cryptoHistory=[];supportedSymbols=[];message="";messageType="";apiUrl=`${Ce.apiUrl}/clients`;httpOptions={headers:new oe};onTabChange(t){switch(t){case"virement":this.clientId&&(this.loadClientAccounts(),this.loadBeneficiaries());break;case"beneficiaires":this.clientId&&(this.loadBeneficiaries(),this.loadRelationTypes());break;case"historique":this.clientId&&this.loadTransferHistory();break;case"recharge":this.loadRechargeData();break;case"crypto":this.loadCryptoData();break;case"qr":this.clientId&&this.loadClientAccounts();break}}qrData={rib:"",amount:0,description:""};qrImage=null;qrError=null;generateQr(){console.log("Token:",this.authService.getToken());let t=new oe({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.authService.getToken()}`}),e={rib:this.qrData.rib,amount:this.qrData.amount,description:this.qrData.description};console.log("Payload:",e),this.http.post(`${Ce.apiUrl}/v1/qr-payments/generate`,e,{headers:t}).subscribe({next:n=>{n.success?(this.qrImage=n.data,this.qrError=null):(this.qrError=n.error||"Erreur inconnue",this.qrImage=null)},error:n=>{this.qrError=n.error?.error||"Erreur r\xE9seau ou serveur",this.qrImage=null}})}qrPaymentData={sourceAccountId:"",rib:"",amount:0,description:""};processQrPayment(){console.log("Selected account ID:",this.qrPaymentData.sourceAccountId);let t=new oe({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.authService.getToken()}`}),e=$e({},this.qrPaymentData);this.http.post(`${Ce.apiUrl}/v1/qr-payments/process`,e,{headers:t}).subscribe({next:n=>{n.success?(this.showMessage("Paiement QR effectu\xE9 avec succ\xE8s \u2705","success"),this.qrPaymentData={sourceAccountId:"",rib:"",amount:0,description:""},this.loadClientAccounts()):this.showMessage(n.error||"Erreur lors du traitement du paiement QR","error")},error:n=>{this.showMessage(n.error?.error||"Erreur serveur","error")}})}useQrToPay(){this.qrPaymentData.rib=this.qrData.rib,this.qrPaymentData.amount=this.qrData.amount,this.qrPaymentData.description=this.qrData.description,this.activeTab="qr",this.showMessage("Formulaire de paiement pr\xE9rempli avec les donn\xE9es du QR.","success")}isQrPaymentValid(){return this.qrPaymentData.sourceAccountId!==""&&this.qrPaymentData.rib.trim()!==""&&this.qrPaymentData.amount>0}ngOnInit(){let t=this.authService.clientId$.subscribe(n=>{this.clientId=n,n&&(this.updateHttpOptions(),this.initializeData())});this.subscriptions.push(t);let e=this.authService.getClientId();e&&(this.clientId=e,this.updateHttpOptions(),this.initializeData())}get activeTab(){return this._activeTab}set activeTab(t){this._activeTab=t,this.onTabChange(t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}updateHttpOptions(){let t=this.authService.getToken();this.httpOptions={headers:new oe({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""})}}initializeData(){this.onTabChange(this.activeTab)}loadClientAccounts(){if(console.log(this.clientAccounts),!this.clientId){this.showMessage("ClientId non disponible","error");return}let t={headers:new oe({"Content-Type":"application/json",Accept:"application/xml, application/json",Authorization:this.authService.getToken()?`Bearer ${this.authService.getToken()}`:""}),responseType:"text"};this.http.get(`${this.apiUrl}/${this.clientId}/services/virement/accounts`,t).subscribe({next:e=>{typeof e=="string"&&e.includes("<PersistentBag>")?this.clientAccounts=this.parseXmlAccounts(e):this.clientAccounts=e,this.showMessage(`${this.clientAccounts.length} compte(s) charg\xE9(s)`,"success")},error:e=>this.showMessage("Erreur lors du chargement des comptes: "+(e.error?.error||e.message),"error")})}parseXmlAccounts(t){let n=new DOMParser().parseFromString(t,"text/xml"),i=[];return n.querySelectorAll("item").forEach(l=>{let c={id:this.getXmlElementText(l,"id"),rib:this.getXmlElementText(l,"rib"),balance:parseFloat(this.getXmlElementText(l,"balance"))||0,type:this.getXmlElementText(l,"type")};i.push(c)}),i}getXmlElementText(t,e){let n=t.querySelector(e);return n?n.textContent:""}onBeneficiarySelect(){if(this.selectedBeneficiaryId){let t=this.beneficiaries.find(e=>e.id.toString()===this.selectedBeneficiaryId);t&&(this.transferRequest.toRib=t.rib,this.transferRequest.beneficiaryName=t.nom,this.ribValidation=null)}else this.transferRequest.toRib="",this.transferRequest.beneficiaryName="",this.ribValidation=null;this.onFormChange()}onFormChange(){console.log("Form changed, current validity:",this.isTransferFormValid())}isTransferFormValid(){let t=this.transferRequest.amount>0,e=this.transferRequest.fromAccountId!==0&&this.transferRequest.fromAccountId!==null,n=this.transferRequest.beneficiaryName.trim()!=="";if(this.destinationType==="beneficiary"){let i=this.selectedBeneficiaryId!==null&&this.selectedBeneficiaryId!=="";return t&&e&&n&&i}else if(this.destinationType==="manual"){let i=this.transferRequest.toRib.trim()!=="";return t&&e&&n&&i}return!1}validateRib(){!this.transferRequest.toRib||!this.clientId||this.http.post(`${this.apiUrl}/${this.clientId}/services/virement/validate-rib`,{rib:this.transferRequest.toRib},this.httpOptions).subscribe({next:t=>{this.ribValidation=t},error:t=>this.showMessage("Erreur lors de la validation du RIB","error")})}executeTransfer(){this.clientId&&this.http.post(`${this.apiUrl}/${this.clientId}/services/virement`,this.transferRequest,this.httpOptions).subscribe({next:t=>{this.showMessage("Virement effectu\xE9 avec succ\xE8s!","success"),this.resetTransferForm(),this.loadClientAccounts()},error:t=>this.showMessage("Erreur lors du virement: "+t.error?.error,"error")})}resetTransferForm(){this.transferRequest={fromAccountId:0,toRib:"",amount:0,description:"",beneficiaryName:""},this.ribValidation=null,this.destinationType="manual",this.selectedBeneficiaryId=null}loadBeneficiaries(){if(!this.clientId)return;let t=`${this.apiUrl}/${this.clientId}/beneficiaries`;this.activeFilter!==""&&(t+=`?actif=${this.activeFilter}`),this.http.get(t,this.httpOptions).subscribe({next:e=>{this.beneficiaries=e,this.showMessage("B\xE9n\xE9ficiaires charg\xE9s","success")},error:e=>this.showMessage("Erreur lors du chargement des b\xE9n\xE9ficiaires","error")})}searchBeneficiaries(){if(this.clientId){if(this.searchQuery.length<2){this.loadBeneficiaries();return}this.http.get(`${this.apiUrl}/${this.clientId}/beneficiaries/search?query=${this.searchQuery}`,this.httpOptions).subscribe({next:t=>{this.beneficiaries=t},error:t=>this.showMessage("Erreur lors de la recherche","error")})}}loadRelationTypes(){this.clientId&&this.http.get(`${this.apiUrl}/${this.clientId}/beneficiaries/relation-types`,this.httpOptions).subscribe({next:t=>{this.relationTypes=t,this.showMessage("Types de relation charg\xE9s","success")},error:t=>this.showMessage("Erreur lors du chargement des types","error")})}loadBeneficiaryDetails(t){if(!this.clientId){this.showMessage("Client ID non disponible","error");return}this.http.get(`${this.apiUrl}/${this.clientId}/beneficiaries/${t}`,this.httpOptions).subscribe({next:e=>{this.selectedBeneficiary=e,this.showMessage(`D\xE9tails du b\xE9n\xE9ficiaire ${e.nom} charg\xE9s`,"success")},error:e=>this.showMessage("Erreur lors du chargement des d\xE9tails: "+(e.error?.error||e.message),"error")})}clearBeneficiaryDetails(){this.selectedBeneficiary=null}editBeneficiary(t){this.editingBeneficiary=t,this.beneficiaryData={nom:t.nom,relation:t.relation},this.showAddBeneficiary=!0}saveBeneficiary(){this.clientId&&(this.editingBeneficiary?this.http.put(`${this.apiUrl}/${this.clientId}/beneficiaries/${this.editingBeneficiary.id}`,this.beneficiaryData,this.httpOptions).subscribe({next:t=>{this.showMessage("B\xE9n\xE9ficiaire modifi\xE9 avec succ\xE8s","success"),this.cancelBeneficiary(),this.loadBeneficiaries()},error:t=>this.showMessage("Erreur lors de la modification","error")}):this.http.post(`${this.apiUrl}/${this.clientId}/beneficiaries`,this.beneficiaryData,this.httpOptions).subscribe({next:t=>{this.showMessage("B\xE9n\xE9ficiaire ajout\xE9 avec succ\xE8s","success"),this.cancelBeneficiary(),this.loadBeneficiaries()},error:t=>this.showMessage("Erreur lors de l'ajout: "+t.error?.error,"error")}))}deleteBeneficiary(t){this.clientId&&confirm("\xCAtes-vous s\xFBr de vouloir supprimer ce b\xE9n\xE9ficiaire?")&&this.http.delete(`${this.apiUrl}/${this.clientId}/beneficiaries/${t}`,this.httpOptions).subscribe({next:e=>{this.showMessage("B\xE9n\xE9ficiaire supprim\xE9 avec succ\xE8s","success"),this.loadBeneficiaries()},error:e=>this.showMessage("Erreur lors de la suppression","error")})}cancelBeneficiary(){this.showAddBeneficiary=!1,this.editingBeneficiary=null,this.beneficiaryData={nom:"",rib:"",relation:""}}loadTransferHistory(){this.clientId&&this.http.get(`${this.apiUrl}/${this.clientId}/services/virement/history?page=${this.historyPage}&size=${this.historySize}`,this.httpOptions).subscribe({next:t=>{this.transferHistory=t,this.showMessage("Historique charg\xE9","success")},error:t=>this.showMessage("Erreur lors du chargement de l'historique","error")})}loadRechargeData(){this.rechargeService.getSupportedOperators().subscribe({next:t=>this.operators=t,error:t=>this.showMessage("Erreur lors du chargement des op\xE9rateurs: "+t.message,"error")}),this.rechargeService.getAccountInfo().subscribe({next:t=>this.accountInfo=t,error:t=>this.showMessage("Erreur lors du chargement des infos du compte: "+t.message,"error")}),this.rechargeService.getDailyLimits().subscribe({next:t=>this.dailyLimits=t,error:t=>this.showMessage("Erreur lors du chargement des limites: "+t.message,"error")}),this.rechargeService.getRechargeHistory().subscribe({next:t=>this.rechargeHistory=t,error:t=>this.showMessage("Erreur lors du chargement de l'historique: "+t.message,"error")})}validatePhoneNumber(){!this.rechargeRequest.phoneNumber||!this.rechargeRequest.operatorCode||this.rechargeService.validatePhoneNumber({phoneNumber:this.rechargeRequest.phoneNumber,operatorCode:this.rechargeService.detectOperatorFromNumber(this.rechargeRequest.phoneNumber)||this.rechargeRequest.operatorCode}).subscribe({next:t=>{this.phoneValidation=t,this.showMessage(t.valid?"Num\xE9ro valide":"Num\xE9ro invalide",t.valid?"success":"error")},error:t=>this.showMessage("Erreur lors de la validation du num\xE9ro: "+t.message,"error")})}executeRecharge(){this.rechargeService.rechargePhone(this.rechargeRequest).subscribe({next:t=>{this.showMessage("Recharge effectu\xE9e avec succ\xE8s!","success"),this.resetRechargeForm(),this.loadRechargeData()},error:t=>this.showMessage("Erreur lors de la recharge: "+t.message,"error")})}resetRechargeForm(){this.rechargeRequest={phoneNumber:"",operatorCode:"",amount:0,transactionPin:""},this.phoneValidation=null}loadCryptoData(){this.cryptoService.getSupportedSymbols().forEach(t=>this.supportedSymbols.push(t)),this.cryptoService.getCryptoBalance().subscribe({next:t=>this.cryptoBalance=t,error:t=>this.showMessage("Erreur lors du chargement du solde crypto: "+t.message,"error")}),this.cryptoService.getAllRates().subscribe({next:t=>this.cryptoRates=t,error:t=>this.showMessage("Erreur lors du chargement des taux: "+t.message,"error")}),this.cryptoService.getCryptoStats().subscribe({next:t=>this.cryptoStats=t,error:t=>this.showMessage("Erreur lors du chargement des stats: "+t.message,"error")}),this.cryptoService.getPortfolioValue().subscribe({next:t=>this.portfolioValue=t.portfolioUsdValue,error:t=>this.showMessage("Erreur lors du chargement de la valeur du portfolio: "+t.message,"error")}),this.cryptoService.getTransactionHistory().subscribe({next:t=>this.cryptoHistory=t,error:t=>this.showMessage("Erreur lors du chargement de l'historique crypto: "+t.message,"error")})}executeCryptoTrade(){let{symbol:t,usdAmount:e,quantity:n,side:i}=this.cryptoTransaction;i==="BUY"?this.cryptoService.buyCrypto(t,e).subscribe({next:()=>{this.showMessage("Achat effectu\xE9 avec succ\xE8s!","success"),this.resetCryptoForm(),this.loadCryptoData()},error:o=>this.showMessage("Erreur lors de l'achat: "+o.message,"error")}):this.cryptoService.sellCrypto(t,n).subscribe({next:()=>{this.showMessage("Vente effectu\xE9e avec succ\xE8s!","success"),this.resetCryptoForm(),this.loadCryptoData()},error:o=>this.showMessage("Erreur lors de la vente: "+o.message,"error")})}resetCryptoForm(){this.cryptoTransaction={symbol:"",usdAmount:0,quantity:0,side:"BUY"}}showMessage(t,e){this.message=t,this.messageType=e,setTimeout(()=>{this.message=""},5e3)}parseCustomDate(t){if(!t)return"-";try{let e;if(Array.isArray(t))e=t;else if(typeof t=="string")e=t.split(",").map(i=>parseInt(i.trim()));else{if(t instanceof Date)return t.toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});{let i=String(t);if(i.includes(","))e=i.split(",").map(o=>parseInt(o.trim()));else{let o=new Date(i);return isNaN(o.getTime())?i:o.toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}}if(e.length<6)return String(t);let n=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5],e[6]?Math.floor(e[6]/1e6):0);return isNaN(n.getTime())?String(t):n.toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch(e){return console.error("Error parsing date:",e,"Original value:",t),String(t)}}static \u0275fac=function(e){return new(e||r)(j(ve),j(Me),j(dn),j(mn))};static \u0275cmp=ee({type:r,selectors:[["app-client-dashboard"]],decls:30,vars:19,consts:[["transferForm","ngForm"],["beneficiaryForm","ngForm"],["qrForm","ngForm"],[1,"container","mt-4"],[1,"nav","nav-tabs","mb-4","custom-nav-tabs"],[1,"nav-item","left"],[1,"nav-link",3,"click"],[1,"nav-item","center"],[1,"nav-item","right"],["class","alert mt-3",3,"class",4,"ngIf"],["class","tab-content",4,"ngIf"],["class","tab-content recharge-tab",4,"ngIf"],["class","tab-content crypto-tab",4,"ngIf"],[1,"alert","mt-3"],[1,"tab-content"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],[1,"btn","btn-secondary","mb-3",3,"click"],[3,"ngSubmit"],[1,"form-label"],["name","fromAccount","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-label","fw-bold"],[1,"form-check"],["type","radio","name","destinationType","id","beneficiary","value","beneficiary",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","beneficiary",1,"form-check-label"],["type","radio","name","destinationType","id","manual","value","manual",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","manual",1,"form-check-label"],["class","mb-3",4,"ngIf"],["type","number","name","amount","min","0.01","step","0.01","required","",1,"form-control",3,"ngModelChange","input","ngModel"],["type","text","name","beneficiaryName","required","",1,"form-control",3,"ngModelChange","input","ngModel","readonly"],["name","description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","mb-2 p-2 border rounded",4,"ngFor","ngForOf"],[3,"value"],[1,"input-group"],["name","selectedBeneficiary",1,"form-select",3,"ngModelChange","change","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","text","name","toRib",1,"form-control",3,"ngModelChange","input","ngModel","required"],["class","mt-2",4,"ngIf"],[1,"mt-2"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"],[1,"mb-2","p-2","border","rounded"],[1,"col-md-8"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-success","me-2",3,"click"],[1,"btn","btn-primary",3,"click"],["class","col-md-4",4,"ngIf"],[1,"row","mb-3"],["type","text","placeholder","Rechercher...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","true"],["value","false"],[1,"btn","btn-secondary","w-100",3,"click"],["class","card mb-2",4,"ngFor","ngForOf"],[1,"col-md-4"],["type","text","name","nom","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","relation","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","text","name","rib","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"card","mb-2"],[1,"row","align-items-center"],[1,"text-muted"],[1,"badge","ms-2"],[1,"col-md-4","text-end"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"btn","btn-sm","btn-outline-warning","me-1",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"me-2"],["type","number","min","0",1,"form-control","d-inline-block",2,"width","80px",3,"ngModelChange","ngModel"],[1,"ms-3","me-2"],[1,"form-select","d-inline-block",2,"width","80px",3,"ngModelChange","ngModel"],["value","10"],["value","20"],["value","50"],[1,"btn","btn-secondary","ms-2",3,"click"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"badge"],["novalidate","",3,"ngSubmit"],["type","text","name","rib","required","","pattern","^\\d{24}$",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","amount","required","","min","0.01",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","description",1,"form-control",3,"ngModelChange","ngModel"],["class","text-center mt-3",4,"ngIf"],[1,"text-center","mt-2"],[1,"btn","btn-outline-primary",3,"click"],[1,"my-4"],["class","card mt-4",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"text-center","mt-3"],["alt","QR Code",2,"max-width","200px",3,"src"],[1,"card","mt-4"],["name","sourceAccountId","required","",1,"form-select",3,"ngModelChange","ngModel"],["name","rib","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","amount","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["name","description","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success",3,"click","disabled"],[1,"alert","alert-danger","mt-3"],[1,"tab-content","recharge-tab"],[1,"card","recharge-card","mb-3"],[1,"col-md-4","mb-2"],["for","operator"],["id","operator","name","operatorCode","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","phone"],["id","phone","name","phoneNumber","required","",1,"form-control",3,"ngModelChange","blur","ngModel"],[3,"text-success","text-danger",4,"ngIf"],[1,"col-md-2","mb-2"],["for","amount"],["id","amount","type","number","name","amount","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","pin"],["id","pin","type","password","name","transactionPin","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"],[1,"card","recharge-card"],[1,"table-responsive","recharge-table"],[1,"tab-content","crypto-tab"],[1,"card","crypto-card","mb-3"],[1,"col-md-3","mb-2"],["for","crypto-symbol"],["id","crypto-symbol","name","symbol","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","side"],["id","side","name","side","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","BUY"],["value","SELL"],["class","col-md-3 mb-2",4,"ngIf"],[1,"card","crypto-card"],[1,"table-responsive","crypto-table"],["for","usdAmount"],["id","usdAmount","type","number","name","usdAmount","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","quantity"],["id","quantity","type","number","name","quantity","min","0.00000001","step","any","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,n){e&1&&(s(0,"div",3)(1,"h2"),m(2,"Dashboard Client"),a(),s(3,"ul",4)(4,"li",5)(5,"a",6),w("click",function(){return n.activeTab="virement"}),m(6,"Virements"),a()(),s(7,"li",7)(8,"a",6),w("click",function(){return n.activeTab="beneficiaires"}),m(9,"B\xE9n\xE9ficiaires"),a()(),s(10,"li",8)(11,"a",6),w("click",function(){return n.activeTab="historique",n.loadTransferHistory()}),m(12,"Historique"),a()(),s(13,"li",8)(14,"a",6),w("click",function(){return n.activeTab="crypto",n.loadTransferHistory()}),m(15,"Crypto"),a()(),s(16,"li",8)(17,"a",6),w("click",function(){return n.activeTab="qr"}),m(18," QR Paiement "),a()(),s(19,"li",8)(20,"a",6),w("click",function(){return n.activeTab="recharge",n.loadTransferHistory()}),m(21,"recharge"),a()()(),E(22,Is,2,3,"div",9)(23,zs,54,12,"div",10)(24,$s,29,4,"div",10)(25,Ks,37,3,"div",10)(26,Zs,28,7,"div",10)(27,ia,49,8,"div",11)(28,da,66,18,"div",12),F(29,"app-chatbot"),a()),e&2&&(d(5),B("active",n.activeTab==="virement"),d(3),B("active",n.activeTab==="beneficiaires"),d(3),B("active",n.activeTab==="historique"),d(3),B("active",n.activeTab==="Crypto"),d(3),B("active",n.activeTab==="qr"),d(3),B("active",n.activeTab==="Recharge"),d(2),f("ngIf",n.message),d(),f("ngIf",n.activeTab==="virement"),d(),f("ngIf",n.activeTab==="beneficiaires"),d(),f("ngIf",n.activeTab==="historique"),d(),f("ngIf",n.activeTab==="qr"),d(),f("ngIf",n.activeTab==="recharge"),d(),f("ngIf",n.activeTab==="crypto"))},dependencies:[ye,Ge,be,_i,bi,fi,Ze,Je,Ri,Ni,De,Oi,Di,Ai,Re,Ye,Dt,Rt,Vi,Xe,It,cn],styles:['body[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f7ff,#e0f2fe);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;min-height:100vh}.container[_ngcontent-%COMP%]{max-width:1200px}h2[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:700;font-size:2.5rem;margin-bottom:2rem;text-align:center;position:relative}h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:80px;height:4px;background:linear-gradient(135deg,#1e40af,#3b82f6);border-radius:2px}.custom-nav-tabs[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;justify-content:space-between;align-items:center}.custom-nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{flex:1;text-align:center}.custom-nav-tabs[_ngcontent-%COMP%]   .nav-item.left[_ngcontent-%COMP%]{text-align:left}.custom-nav-tabs[_ngcontent-%COMP%]   .nav-item.center[_ngcontent-%COMP%]{text-align:center}.custom-nav-tabs[_ngcontent-%COMP%]   .nav-item.right[_ngcontent-%COMP%]{text-align:right}.nav-tabs[_ngcontent-%COMP%]{border:none;background:#fff;border-radius:12px;padding:.5rem;box-shadow:0 10px 25px #1e40af1a;margin-bottom:2rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;border-radius:8px;color:#1e40af;font-weight:600;padding:12px 24px;margin:0 4px;transition:all .3s ease;position:relative;overflow:hidden}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background:#dbeafe;color:#1e3a8a;transform:translateY(-2px)}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);color:#fff;box-shadow:0 4px 15px #1e40af33}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:3px;background:#60a5fa;transform:scaleX(0);transition:transform .3s ease}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:before{transform:scaleX(1)}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus{outline:2px solid #60a5fa;outline-offset:2px}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 10px 25px #1e40af1a;background:#fff;overflow:hidden;margin-bottom:1.5rem;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #1e40af26}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);color:#fff;border:none;padding:1.25rem;font-weight:600}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;color:#fff}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:2px solid #e5e7eb;border-radius:8px;padding:12px 16px;transition:all .3s ease;background:#f8fafc}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:2px solid #60a5fa;outline-offset:2px}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#1e3a8a;margin-bottom:8px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:3}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{z-index:2}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0;margin-left:-1px}.btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:600;padding:10px 20px;transition:all .3s ease;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn[_ngcontent-%COMP%]:focus{outline:2px solid #60a5fa;outline-offset:2px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);border:none;box-shadow:0 4px 15px #1e40af33}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #1e40af4d}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#9ca3af);border:none;color:#fff}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#10b981);border:none}.btn-outline-primary[_ngcontent-%COMP%]{border:2px solid #3b82f6;color:#3b82f6;background:transparent}.btn-outline-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#3b82f6;color:#fff;transform:translateY(-2px)}.btn-outline-secondary[_ngcontent-%COMP%]{border:2px solid #6b7280;color:#6b7280}.btn-outline-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#6b7280;color:#fff;transform:translateY(-2px)}.btn-outline-warning[_ngcontent-%COMP%]{border:2px solid #f59e0b;color:#f59e0b}.btn-outline-warning[_ngcontent-%COMP%]:hover:not(:disabled){background:#f59e0b;color:#fff;transform:translateY(-2px)}.btn-outline-danger[_ngcontent-%COMP%]{border:2px solid #ef4444;color:#ef4444}.btn-outline-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#ef4444;color:#fff;transform:translateY(-2px)}.card-body[_ngcontent-%COMP%]   .mb-2.p-2.border.rounded[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#f0f9ff);border:2px solid transparent!important;border-radius:12px!important;padding:1rem!important;margin-bottom:1rem!important;transition:all .3s ease}.card-body[_ngcontent-%COMP%]   .mb-2.p-2.border.rounded[_ngcontent-%COMP%]:hover{border-color:#60a5fa!important;transform:translate(5px)}.card.mb-2[_ngcontent-%COMP%]{border-left:4px solid #3b82f6;transition:all .3s ease}.card.mb-2[_ngcontent-%COMP%]:hover{border-left-color:#1e40af;transform:translate(5px)}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:6px 12px;border-radius:20px;font-weight:600}.badge.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#10b981)!important}.badge.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#ef4444)!important}.badge.bg-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#9ca3af)!important}.table-responsive[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 10px 25px #1e40af1a}.table[_ngcontent-%COMP%]{background:#fff;margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);color:#fff;border:none;font-weight:600;padding:1rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#dbeafe}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-color:#e5e7eb;vertical-align:middle}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f8fafc}.alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:1rem 1.5rem;font-weight:600;margin-top:1.5rem}.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d1fae5,#a7f3d0);color:#065f46;border-left:4px solid #10b981}.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#991b1b;border-left:4px solid #ef4444}.text-success[_ngcontent-%COMP%]{color:#059669!important;font-weight:600}.text-danger[_ngcontent-%COMP%]{color:#dc2626!important;font-weight:600}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem}h2[_ngcontent-%COMP%]{font-size:2rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem}.card-body[_ngcontent-%COMP%]{padding:1rem}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem;font-size:.9rem}}@media (max-width: 576px){.nav-tabs[_ngcontent-%COMP%]{flex-direction:column}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin:2px 0;text-align:center}.btn-group-vertical[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.d-flex.justify-content-between.align-items-center[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch!important}.d-flex.justify-content-between.align-items-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:1rem}}.form-control.d-inline-block[_ngcontent-%COMP%], .form-select.d-inline-block[_ngcontent-%COMP%]{width:auto!important;min-width:80px}*[_ngcontent-%COMP%]{transition:color .3s ease,background-color .3s ease,border-color .3s ease}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]{border-left:5px solid #3b82f6;background:linear-gradient(135deg,#dbeafe,#f0f9ff);box-shadow:0 10px 25px #1e40af1a;border-radius:12px;margin-bottom:1.5rem}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);color:#fff;font-weight:700;font-size:1.2rem;border-bottom:none;padding:1rem 1.5rem}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #1e40af0d;padding:1rem 1.5rem;margin-bottom:1rem}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{align-items:end}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#1e3a8a;font-weight:600}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e5e7eb;border-radius:8px;transition:all .3s ease}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#fff}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.85rem;margin-top:2px}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);color:#fff;font-weight:600;border:none}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#dbeafe}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:1rem}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .badge-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#10b981)!important;color:#065f46!important}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .badge-warning[_ngcontent-%COMP%]{background:#f59e0b!important;color:#fff!important}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   .badge-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#ef4444)!important;color:#fff!important}@media (max-width: 768px){.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}.recharge-tab[_ngcontent-%COMP%]   .recharge-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:.5rem 1rem}.recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .recharge-tab[_ngcontent-%COMP%]   .recharge-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem!important;font-size:.95rem}}']})};function ma(r,t){r&1&&(s(0,"div",7),F(1,"div",8),s(2,"p"),m(3,"Validation du lien en cours..."),a()())}function ua(r,t){if(r&1){let e=L();s(0,"div",9)(1,"div",10),m(2,"\u26A0\uFE0F"),a(),s(3,"h3"),m(4,"Lien invalide ou expir\xE9"),a(),s(5,"p"),m(6),a(),s(7,"div",11)(8,"button",12),w("click",function(){_(e);let i=g();return b(i.resendActivationLink())}),m(9," Renvoyer un nouveau lien "),a(),s(10,"button",13),w("click",function(){_(e);let i=g();return b(i.router.navigate(["/login"]))}),m(11," Aller \xE0 la connexion "),a()()()}if(r&2){let e=g();d(6),N(e.errorMessage)}}function pa(r,t){if(r&1&&(s(0,"div"),m(1),a()),r&2){let e=t.$implicit;d(),N(e)}}function ga(r,t){if(r&1&&(s(0,"div",29),E(1,pa,2,1,"div",30),a()),r&2){let e=g(2);d(),f("ngForOf",e.getPasswordErrors())}}function ha(r,t){r&1&&(s(0,"div",29),m(1," Les mots de passe ne correspondent pas "),a())}function fa(r,t){if(r&1&&(s(0,"div",31),m(1),a()),r&2){let e=g(2);d(),W(" ",e.errorMessage," ")}}function _a(r,t){if(r&1&&(s(0,"div",32),m(1),a()),r&2){let e=g(2);d(),W(" ",e.successMessage," ")}}function ba(r,t){r&1&&F(0,"span",33)}function ya(r,t){if(r&1){let e=L();s(0,"form",14),w("ngSubmit",function(){_(e);let i=g();return b(i.onSubmit())}),s(1,"div",15)(2,"label",16),m(3,"Nouveau mot de passe *"),a(),s(4,"div",17),F(5,"input",18),s(6,"button",19),w("click",function(){_(e);let i=g();return b(i.togglePasswordVisibility())}),m(7),a()(),E(8,ga,2,1,"div",20),a(),s(9,"div",15)(10,"label",21),m(11,"Confirmer le mot de passe *"),a(),s(12,"div",17),F(13,"input",22),s(14,"button",19),w("click",function(){_(e);let i=g();return b(i.toggleConfirmPasswordVisibility())}),m(15),a()(),E(16,ha,2,0,"div",20),a(),s(17,"div",23)(18,"h4"),m(19,"Votre mot de passe doit contenir :"),a(),s(20,"ul")(21,"li"),m(22," Au moins 8 caract\xE8res "),a(),s(23,"li"),m(24," Au moins une majuscule "),a(),s(25,"li"),m(26," Au moins une minuscule "),a(),s(27,"li"),m(28," Au moins un chiffre "),a(),s(29,"li"),m(30," Au moins un caract\xE8re sp\xE9cial (@$!%*?&) "),a()()(),E(31,fa,2,1,"div",24)(32,_a,2,1,"div",25),s(33,"div",26)(34,"button",27),E(35,ba,1,0,"span",28),m(36),a()()()}if(r&2){let e,n,i,o,l,c,u,p,y,h=g();f("formGroup",h.setPasswordForm),d(5),B("is-invalid",((e=h.setPasswordForm.get("password"))==null?null:e.invalid)&&((e=h.setPasswordForm.get("password"))==null?null:e.touched)),f("type",h.showPassword?"text":"password"),d(),le("aria-label",h.showPassword?"Masquer le mot de passe":"Afficher le mot de passe"),d(),W(" ",h.showPassword?"\u{1F648}":"\u{1F441}\uFE0F"," "),d(),f("ngIf",((n=h.setPasswordForm.get("password"))==null?null:n.invalid)&&((n=h.setPasswordForm.get("password"))==null?null:n.touched)),d(5),B("is-invalid",((i=h.setPasswordForm.get("confirmPassword"))==null?null:i.invalid)&&((i=h.setPasswordForm.get("confirmPassword"))==null?null:i.touched)),f("type",h.showConfirmPassword?"text":"password"),d(),le("aria-label",h.showConfirmPassword?"Masquer le mot de passe":"Afficher le mot de passe"),d(),W(" ",h.showConfirmPassword?"\u{1F648}":"\u{1F441}\uFE0F"," "),d(),f("ngIf",((o=h.setPasswordForm.get("confirmPassword"))==null?null:o.hasError("passwordMismatch"))&&((o=h.setPasswordForm.get("confirmPassword"))==null?null:o.touched)),d(5),B("valid",h.isMinLength((l=h.setPasswordForm.get("password"))==null?null:l.value)),d(2),B("valid",h.hasUpperCase((c=h.setPasswordForm.get("password"))==null?null:c.value)),d(2),B("valid",h.hasLowerCase((u=h.setPasswordForm.get("password"))==null?null:u.value)),d(2),B("valid",h.hasNumber((p=h.setPasswordForm.get("password"))==null?null:p.value)),d(2),B("valid",h.hasSpecialChar((y=h.setPasswordForm.get("password"))==null?null:y.value)),d(2),f("ngIf",h.errorMessage),d(),f("ngIf",h.successMessage),d(2),f("disabled",h.setPasswordForm.invalid||h.isLoading),d(),f("ngIf",h.isLoading),d(),W(" ",h.isLoading?"D\xE9finition en cours...":"D\xE9finir le mot de passe"," ")}}var pn=class r{constructor(t,e,n,i){this.fb=t;this.route=e;this.router=n;this.authService=i;this.setPasswordForm=this.fb.group({password:["",[mt.required,mt.minLength(8),mt.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/)]],confirmPassword:["",mt.required]},{validators:this.passwordMatchValidator})}setPasswordForm;token="";isLoading=!1;tokenValid=!1;tokenChecked=!1;errorMessage="";successMessage="";showPassword=!1;showConfirmPassword=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{this.token=t.token,this.token?this.validateToken():(this.errorMessage="Token manquant dans l'URL",this.tokenChecked=!0)})}validateToken(){this.isLoading=!0,this.authService.validateToken(this.token).subscribe({next:t=>{this.tokenValid=t.valid,this.tokenChecked=!0,this.isLoading=!1,this.tokenValid||(this.errorMessage=t.message||"Token invalide ou expir\xE9")},error:t=>{this.tokenValid=!1,this.tokenChecked=!0,this.isLoading=!1,this.errorMessage="Erreur lors de la validation du token",console.error("Token validation error:",t)}})}passwordMatchValidator(t){let e=t.get("password"),n=t.get("confirmPassword");return e&&n&&e.value!==n.value?(n.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(n?.hasError("passwordMismatch")&&(delete n.errors.passwordMismatch,Object.keys(n.errors).length===0&&n.setErrors(null)),null)}onSubmit(){if(this.setPasswordForm.valid&&this.tokenValid){this.isLoading=!0,this.errorMessage="",this.successMessage="";let t={token:this.token,newPassword:this.setPasswordForm.get("password")?.value};this.authService.setPassword(t).subscribe({next:e=>{this.isLoading=!1,this.successMessage="Mot de passe d\xE9fini avec succ\xE8s ! Redirection vers la page de connexion...",setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:e=>{this.isLoading=!1,this.errorMessage=e.error?.error||"Erreur lors de la d\xE9finition du mot de passe",console.error("Set password error:",e)}})}}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}getPasswordErrors(){let t=[],e=this.setPasswordForm.get("password");return e?.hasError("required")&&t.push("Le mot de passe est requis"),e?.hasError("minlength")&&t.push("Le mot de passe doit contenir au moins 8 caract\xE8res"),e?.hasError("pattern")&&t.push("Le mot de passe doit contenir au moins : une majuscule, une minuscule, un chiffre et un caract\xE8re sp\xE9cial"),t}isMinLength(t){return t?.length>=8}hasUpperCase(t){return/[A-Z]/.test(t||"")}hasLowerCase(t){return/[a-z]/.test(t||"")}hasNumber(t){return/\d/.test(t||"")}hasSpecialChar(t){return/[@$!%*?&]/.test(t||"")}resendActivationLink(){console.log("Fonctionnalit\xE9 de renvoi de lien \xE0 impl\xE9menter")}static \u0275fac=function(e){return new(e||r)(j(Fi),j(wi),j(Ie),j(Me))};static \u0275cmp=ee({type:r,selectors:[["app-set-password"]],decls:11,vars:3,consts:[[1,"set-password-container"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"error-container"],[1,"error-icon"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","password"],[1,"password-input-container"],["id","password","formControlName","password","placeholder","Saisissez votre mot de passe",1,"form-control",3,"type"],["type","button",1,"password-toggle-btn",3,"click"],["class","invalid-feedback",4,"ngIf"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirmez votre mot de passe",1,"form-control",3,"type"],[1,"password-criteria"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["class","spinner-small",4,"ngIf"],[1,"invalid-feedback"],[4,"ngFor","ngForOf"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"spinner-small"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),m(4,"D\xE9finir votre mot de passe"),a(),s(5,"p"),m(6,"Cr\xE9ez un mot de passe s\xE9curis\xE9 pour votre compte"),a()(),s(7,"div",3),E(8,ma,4,0,"div",4)(9,ua,12,1,"div",5)(10,ya,37,28,"form",6),a()()()),e&2&&(d(8),f("ngIf",n.isLoading&&!n.tokenChecked),d(),f("ngIf",n.tokenChecked&&!n.tokenValid),d(),f("ngIf",n.tokenChecked&&n.tokenValid))},dependencies:[ye,Ge,be,Li,Je,De,Re,Ye,ki,Ii],styles:['@charset "UTF-8";.set-password-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#020839);padding:20px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 15px 35px #0000001a;overflow:hidden;width:100%;max-width:500px}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:30px;text-align:center;border-bottom:1px solid #e9ecef}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#343a40;font-size:1.8rem;font-weight:600}.card-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6c757d;font-size:.95rem}.card-body[_ngcontent-%COMP%]{padding:30px}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #007bff;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid #ffffff;border-radius:50%;border-top-color:transparent;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.error-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc3545;margin-bottom:15px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#343a40}.password-input-container[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 45px 12px 15px;border:2px solid #e9ecef;border-radius:8px;font-size:1rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.password-toggle-btn[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:5px;font-size:1.2rem}.password-toggle-btn[_ngcontent-%COMP%]:hover{opacity:.7}.invalid-feedback[_ngcontent-%COMP%]{display:block;color:#dc3545;font-size:.875rem;margin-top:8px}.password-criteria[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:25px}.password-criteria[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;font-size:1rem;color:#343a40}.password-criteria[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.password-criteria[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#dc3545;margin-bottom:8px;font-size:.9rem}.password-criteria[_ngcontent-%COMP%]   li.valid[_ngcontent-%COMP%]{color:#28a745}.password-criteria[_ngcontent-%COMP%]   li.valid[_ngcontent-%COMP%]:before{content:"\\2713  ";font-weight:700}.alert[_ngcontent-%COMP%]{padding:15px;border-radius:8px;margin-bottom:20px;font-size:.9rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;border:1px solid #c3e6cb;color:#155724}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .15s ease-in-out;text-decoration:none;display:inline-block;text-align:center}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px);box-shadow:0 4px 8px #007bff4d}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;margin-right:10px}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-block[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}.form-actions[_ngcontent-%COMP%]{margin-top:30px}.action-buttons[_ngcontent-%COMP%]{margin-top:20px}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:5px}@media (max-width: 576px){.set-password-container[_ngcontent-%COMP%]{padding:10px}.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:20px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;width:100%;margin:10px 0}.password-criteria[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:red}.password-criteria[_ngcontent-%COMP%]   li.valid[_ngcontent-%COMP%]{color:green;font-weight:700}}']})};var rt=class r{constructor(t,e){this.authService=t;this.router=e}canActivate(){return console.log("AuthGuard check, isLoggedIn:",this.authService.isLoggedIn()),this.authService.isLoggedIn()?!0:(console.warn("AuthGuard redirecting to login"),this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||r)(Z(Me),Z(Ie))};static \u0275prov=ae({token:r,factory:r.\u0275fac,providedIn:"root"})};var Jr=[{path:"login",component:sn},{path:"set-password",component:pn},{path:"admin",loadChildren:()=>import("./chunk-EKVJFI5C.js").then(r=>r.AdminModule),canActivate:[rt]},{path:"employee",loadChildren:()=>import("./chunk-GB5RHHVO.js").then(r=>r.BanqueModule),canActivate:[rt]},{path:"clients",loadComponent:()=>import("./chunk-KUTWDLIM.js").then(r=>r.ClientListComponent)},{path:"client/:clientId/dashboard",component:un,canActivate:[rt]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}];vi(tn,{providers:[Si(Jr),Ci(Mi()),$r(),Pi({positionClass:"toast-bottom-right",preventDuplicates:!0})]}).catch(r=>console.error(r));
